(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ;a=self;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JS=c.JS||{};e=a.Error;f=c.NonStandardPromiseRejectionException=c.NonStandardPromiseRejectionException||{};g=c.Promise=c.Promise||{};h=c.Pervasives=c.Pervasives||{};i=b.Json=b.Json||{};j=b.Obj=b.Obj||{};k=b.Remoting=b.Remoting||{};l=k.XhrProvider=k.XhrProvider||{};m=k.AjaxRemotingProvider=k.AjaxRemotingProvider||{};n=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};o=b.HtmlContentExtensions=b.HtmlContentExtensions||{};p=o.SingleNode=o.SingleNode||{};q=o.IControlBody=o.IControlBody||{};r=b.Activator=b.Activator||{};s=a.StartupCode$WebSharper_Main$Html=a.StartupCode$WebSharper_Main$Html||{};t=b.Collections=b.Collections||{};u=t.EqualityComparer=t.EqualityComparer||{};v=b.Comparers=b.Comparers||{};w=v.EquatableEqualityComparer=v.EquatableEqualityComparer||{};x=v.BaseEqualityComparer=v.BaseEqualityComparer||{};y=t.Comparer=t.Comparer||{};z=v.ComparableComparer=v.ComparableComparer||{};A=v.BaseComparer=v.BaseComparer||{};B=b.Operators=b.Operators||{};C=b.Nullable=b.Nullable||{};D=b.Utils=b.Utils||{};E=b.Concurrency=b.Concurrency||{};F=E.CT=E.CT||{};G=E.AsyncBody=E.AsyncBody||{};H=E.Scheduler=E.Scheduler||{};I=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};J=b.Enumerator=b.Enumerator||{};K=J.T=J.T||{};L=c.Optional=c.Optional||{};M=b.Arrays=b.Arrays||{};N=b.Seq=b.Seq||{};O=b.List=b.List||{};P=b.Arrays2D=b.Arrays2D||{};Q=b.CancellationTokenSource=b.CancellationTokenSource||{};R=b.Char=b.Char||{};S=b.Util=b.Util||{};T=b.DateUtil=b.DateUtil||{};U=b.DateTimeOffset=b.DateTimeOffset||{};V=b.Delegate=b.Delegate||{};W=t.DictionaryUtil=t.DictionaryUtil||{};X=t.KeyCollection=t.KeyCollection||{};Y=t.ValueCollection=t.ValueCollection||{};Z=t.Dictionary=t.Dictionary||{};_0=b.Exception=b.Exception||{};_1=b.MatchFailureException=b.MatchFailureException||{};_2=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};_3=b.OperationCanceledException=b.OperationCanceledException||{};_4=b.ArgumentException=b.ArgumentException||{};_5=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};_6=b.ArgumentNullException=b.ArgumentNullException||{};_7=b.InvalidOperationException=b.InvalidOperationException||{};_8=b.AggregateException=b.AggregateException||{};_9=b.TimeoutException=b.TimeoutException||{};_=b.FormatException=b.FormatException||{};$=b.OverflowException=b.OverflowException||{};ba=b.TaskCanceledException=b.TaskCanceledException||{};bb=a.System=a.System||{};bc=bb.Guid=bb.Guid||{};bd=t.HashSetUtil=t.HashSetUtil||{};be=t.HashSet=t.HashSet||{};bf=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bg=bf.LazyRecord=bf.LazyRecord||{};bh=b.Lazy=b.Lazy||{};bi=O.T=O.T||{};bj=b.Slice=b.Slice||{};bk=b.Option=b.Option||{};bl=b.Queue=b.Queue||{};bm=b.Random=b.Random||{};bn=b.Ref=b.Ref||{};bo=b.Result=b.Result||{};bp=b.Control=b.Control||{};bq=b.Stack=b.Stack||{};br=b.Strings=b.Strings||{};bs=b.Task=b.Task||{};bt=b.Task1=b.Task1||{};bu=b.TaskCompletionSource=b.TaskCompletionSource||{};bv=b.Unchecked=b.Unchecked||{};bw=a.Microsoft=a.Microsoft||{};bx=bw.FSharp=bw.FSharp||{};by=bx.Core=bx.Core||{};bz=by.FSharpValueOption=by.FSharpValueOption||{};bA=b.ValueOption=b.ValueOption||{};bB=b.Numeric=b.Numeric||{};bC=a.IntelliFactory;bD=bC&&bC.Runtime;bE=a.Promise;bF=a.JSON;bG=a.String;bH=a.Date;bI=a.console;bJ=a.Math;d.GetFieldValues=function(bK){var bL,bM;bL=[];for(var bN in bK)bL.push(bK[bN]);return bL;};d.GetFieldNames=function(bK){var bL,bM;bL=[];for(var bN in bK)bL.push(bN);return bL;};d.GetFields=function(bK){var bL,bM;bL=[];for(var bN in bK)bL.push([bN,bK[bN]]);return bL;};f=c.NonStandardPromiseRejectionException=bD.Class({get_Reason:function(){return this.reason;}},e,f);f.New=bD.Ctor(function(bK){this.message="Promise rejected";a.Object.setPrototypeOf(this,f.prototype);this.reason=bK;},f);g.For=function(bK,bL){var bM;function bN(){return bM.MoveNext()?bL(bM.Current()).then(function(){return bN();}):bE.resolve(null);}bM=J.Get(bK);return new bE(function(bO){bN();bO();})["finally"](function(){return bM.Dispose();});};g.AsTask=function(bK){var bL;bL=new bu.New();bK.then(function(bM){return bL.SetResult(bM);},function(bM){return bL.SetException$1(g.unwrapExn(bM));});return bL.get_Task();};g.AsAsync=function(bK){return E.FromContinuations(function(bL,bM){bK.then(bL,function(bN){return bM(g.unwrapExn(bN));});});};g.OfTask=function(bK){return new bE(function(bL,bM){bK.ContinueWith$1(function(bN){return bN.get_IsCanceled()?bM(new ba.New()):bN.get_IsFaulted()?bM(bN.get_Exception()):bL(bN.get_Result());},E.noneCT());});};g.OfAsync=function(bK){return new bE(function(bL,bM){E.StartWithContinuations(bK,bL,function(bN){bM(bN);},function(bN){bM(bN);},null);});};g.unwrapExn=function(bK){return bK instanceof e?bK:new f.New(bK);};h.GetJS=function(bK,bL){var bM,bN;bM=bK;bN=J.Get(bL);try{while(bN.MoveNext())bM=bM[bN.Current()];}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}return bM;};h.NewFromSeq=function(bK){var bL,bM,bN;bL={};bM=J.Get(bK);try{while(bM.MoveNext()){bN=bM.Current();bL[bN[0]]=bN[1];}}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}return bL;};i.Activate=function(bK){var bL,bN,bO,bP,bQ,bR,bS;function bM(bT){var bU,bV,bW,bX,bY;if(bv.Equals(bT,null))return bT;else if(typeof bT=="object"){if(bT instanceof a.Array)return i.shallowMap(bM,bT);else{bU=i.shallowMap(bM,bT.$V);bV=bT.$T;if(bV===void 0)return bU;else{bW=M.get(bN,bV);if(bW===1)return O.ofArray(bU);else if(bW===2)return self.WebSharper.Decimal.CreateDecimalBits(bU);else{bX=new(M.get(bN,bV))();for(var bZ in bU)if(function(b0){bX[b0]=bU[b0];return false;}(bZ))break;return bX;}}}}else return bT;}bN=bK?bK.$TYPES:void 0;if(bN===void 0)bL=bK;else{for(bO=0,bP=M.length(bN)-1;bO<=bP;bO++){bS=M.get(bN,bO);switch(!bv.Equals(bS,null)&&bS.length===3?M.get(bS,0)==="WebSharper"?M.get(bS,1)==="List"?M.get(bS,2)==="T"?0:(bR=bS,2):(bR=bS,2):(bR=bS,2):!bv.Equals(bS,null)&&bS.length===2?M.get(bS,0)==="WebSharper"?M.get(bS,1)==="Decimal"?1:(bR=bS,2):(bR=bS,2):(bR=bS,2)){case 0:bQ=1;break;case 1:bQ=2;break;case 2:bQ=i.lookup(bR);break;}M.set(bN,bO,bQ);}bL=bK.$DATA;}return bM(bL);};i.shallowMap=function(bK,bL){var bM,bN;if(bL instanceof a.Array)return M.map(bK,bL);else if(typeof bL=="object"){bM={};for(var bO in bL)if(function(bP){bM[bP]=bK(bL[bP]);return false;}(bO))break;return bM;}else return bL;};i.lookup=function(bK){var bL,bM,bN,bO,bP;bN=M.length(bK);bL=self;bM=0;while(bM<bN){bO=M.get(bK,bM);bP=bL[bO];!bv.Equals(typeof bP,void 0)?(bL=bP,bM=bM+1):B.FailWith("Invalid server reply. Failed to find type: "+bO);}return bL;};j=b.Obj=bD.Class({Equals:function(bK){return this===bK;},GetHashCode:function(){return -1;}},null,j);j.New=bD.Ctor(function(){},j);l=k.XhrProvider=bD.Class({Sync:function(bK,bL,bM){var bN;bN=[null];k.ajax(false,bK,bL,bM,function(bO){bN[0]=bO;},function(bO){throw bO;},function(){k.ajax(false,bK,bL,bM,function(bO){bN[0]=bO;},function(bO){throw bO;},void 0);});return bN[0];},Async:function(bK,bL,bM,bN,bO){k.ajax(true,bK,bL,bM,bN,bO,function(){k.ajax(true,bK,bL,bM,bN,bO,void 0);});}},j,l);l.New=bD.Ctor(function(){j.New.call(this);},l);m=k.AjaxRemotingProvider=bD.Class({get_EndPoint:function(){return k.EndPoint();},AsyncBase:function(bK,bL){var bM,bN;bM=this;bN=null;return E.Delay(function(){var bO,bP;bO=k.makeHeaders(bK);bP=k.makePayload(bL);return E.Bind(E.GetCT(),function(bQ){return E.FromContinuations(function(bR,bS,bT){var bU,bV,bW;function bX(bY){return bU[0]?(bU[0]=false,bT(new _3.New(bQ))):null;}bU=[true];bV=E.Register(bQ,function(){bX();});bW=bM.get_EndPoint();return k.AjaxProvider().Async(bW,bO,bP,function(bY){if(bU[0]){bU[0]=false;bV.Dispose();bR(i.Activate(bF.parse(bY)));}},function(bY){if(bU[0]){bU[0]=false;bV.Dispose();bS(bY);}});});});});},Send:function(bK,bL){E.Start(this.AsyncBase(bK,bL),null);},Task:function(bK,bL){return E.StartAsTask(this.AsyncBase(bK,bL),null);},Async:function(bK,bL){return this.AsyncBase(bK,bL);},Sync:function(bK,bL){var bM,bN,bO;return i.Activate(bF.parse((bM=this.get_EndPoint(),(bN=k.makeHeaders(bK),(bO=k.makePayload(bL),k.AjaxProvider().Sync(bM,bN,bO))))));}},j,m);m.New=bD.Ctor(function(){j.New.call(this);},m);k.ajax=function(bK,bL,bM,bN,bO,bP,bQ){var bR,bS,bT;bR=new a.XMLHttpRequest();bS=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bR.open("POST",bL,bK);if(bK==true)bR.withCredentials=true;for(var bV in bM)bR.setRequestHeader(bV,bM[bV]);if(bS)bR.setRequestHeader("x-csrftoken",bS);function bU(){var bW;if(bR.status==200)bO(bR.responseText);else if(bQ&&bR.status==403&&bR.responseText=="CSRF")bQ();else{bW="Response status is not 200: ";bP(new e(bW+bR.status));}}if("onload"in bR)bR.onload=bR.onerror=bR.onabort=bU;else bR.onreadystatechange=function(){if(bR.readyState==4)bU();};bR.send(bN);};k.makePayload=function(bK){return bF.stringify(bK);};k.makeHeaders=function(bK){return{"content-type":"application/json","x-websharper-rpc":bK};};k.AjaxProvider=function(){n.$cctor();return n.AjaxProvider;};k.set_AjaxProvider=function(bK){n.$cctor();n.AjaxProvider=bK;};k.UseHttps=function(){try{return!br.StartsWith(self.location.href,"https://")&&(k.set_EndPoint(br.Replace(self.location.href,"http://","https://")),true);}catch(bK){return false;}};k.EndPoint=function(){n.$cctor();return n.EndPoint;};k.set_EndPoint=function(bK){n.$cctor();n.EndPoint=bK;};n.$cctor=function(){n.$cctor=a.ignore;n.EndPoint="?";n.AjaxProvider=new l.New();};p=o.SingleNode=bD.Class({ReplaceInDom:function(bK){this.node.parentNode.replaceChild(this.node,bK);}},j,p);p.New=bD.Ctor(function(bK){j.New.call(this);this.node=bK;},p);q.SingleNode=function(bK){return new p.New(bK);};r.Activate=function(){var bK;if(self.document){bK=self.document.getElementById("websharper-data");bK?r.onReady(function(){var bL,bM;function bN(bQ,bR){if(typeof bR=="object"&&"$init"in bR)bR.$preinit(bQ);}function bO(bQ,bR){if(typeof bR=="object"&&"Body"in bR)bR.Body().ReplaceInDom(self.document.getElementById(bQ));else if(typeof bR=="object"&&"$init"in bR)bR.$init(bQ);}function bP(bQ,bR){if(typeof bR=="object"&&"$init"in bR)bR.$postinit(bQ);}bL=i.Activate(bF.parse(bK.getAttribute("content")));r.set_Instances(bL);bM=d.GetFields(bL);M.iter(function(bQ){return bN(bQ[0],bQ[1]);},bM);M.iter(function(bQ){return bO(bQ[0],bQ[1]);},bM);M.iter(function(bQ){return bP(bQ[0],bQ[1]);},bM);}):void 0;}};r.onReady=function(bK){var bL;function bM(){if(!bL){bL=true;bK();self.document.removeEventListener("DOMContentLoaded",bM,false);self.removeEventListener("load",bM,false);}}bL=false;self.document.readyState==="complete"?bM():(self.document.addEventListener("DOMContentLoaded",bM,false),self.addEventListener("load",bM,false));};r.Instances=function(){s.$cctor();return s.Instances;};r.set_Instances=function(bK){s.$cctor();s.Instances=bK;};r.META_ID=function(){s.$cctor();return s.META_ID;};s.$cctor=function(){s.$cctor=a.ignore;s.META_ID="websharper-data";s.Instances=null;};u=t.EqualityComparer=bD.Class({CGetHashCode0:function(bK){return this.GetHashCode$1(bK);},CEquals0:function(bK,bL){return this.Equals$1(bK,bL);},CGetHashCode:function(bK){return this.GetHashCode$1(bK);},CEquals:function(bK,bL){return this.Equals$1(bK,bL);}},j,u);u.New=bD.Ctor(function(){j.New.call(this);},u);w=v.EquatableEqualityComparer=bD.Class({GetHashCode$1:function(bK){return bv.Hash(bK);},Equals$1:function(bK,bL){return bK.EEquals(bL);}},u,w);w.New=bD.Ctor(function(){u.New.call(this);},w);x=v.BaseEqualityComparer=bD.Class({GetHashCode$1:function(bK){return bv.Hash(bK);},Equals$1:function(bK,bL){return bv.Equals(bK,bL);}},u,x);x.New=bD.Ctor(function(){u.New.call(this);},x);y=t.Comparer=bD.Class({Compare0:function(bK,bL){return this.Compare$1(bK,bL);},Compare:function(bK,bL){return this.Compare$1(bK,bL);}},j,y);y.New=bD.Ctor(function(){j.New.call(this);},y);z=v.ComparableComparer=bD.Class({Compare$1:function(bK,bL){return bK.CompareTo(bL);}},y,z);z.New=bD.Ctor(function(){y.New.call(this);},z);A=v.BaseComparer=bD.Class({Compare$1:function(bK,bL){return bv.Compare(bK,bL);}},y,A);A.New=bD.Ctor(function(){y.New.call(this);},A);B.charRange=function(bK,bL){var bM,bN;bM=bK.charCodeAt();bN=1+bL.charCodeAt()-bM;return bN<=0?[]:N.init(bN,function(bO){return bG.fromCharCode(bO+bM);});};C.op=function(bK,bL,bM){return bK==null||bL==null?null:bM(bK,bL);};C.opL=function(bK,bL,bM){return bK==null?null:bM(bK,bL);};C.opR=function(bK,bL,bM){return bL==null?null:bM(bK,bL);};C.cmp=function(bK,bL,bM){return bK==null||bL==null?false:bM(bK,bL);};C.cmpE=function(bK,bL,bM){return bK==null?bL==null:bL==null?false:bM(bK,bL);};C.cmpL=function(bK,bL,bM){return bK==null?false:bM(bK,bL);};C.cmpR=function(bK,bL,bM){return bL==null?false:bM(bK,bL);};C.conv=function(bK,bL){return bK==null?null:bL(bK);};D.prettyPrint=function(bK){var bL,bM;function bN(bO,bP){return bO+" = "+D.prettyPrint(bP);}return bK===null?"null":(bL=typeof bK,bL=="string"?"\""+bK+"\"":bL=="object"?bK instanceof a.Array?"[|"+br.concat("; ",M.map(D.prettyPrint,bK))+"|]":(bM=bG(bK),bM==="[object Object]"?"{"+br.concat("; ",M.map(function(bO){return bN(bO[0],bO[1]);},d.GetFields(bK)))+"}":bM):bG(bK));};D.printArray2D=function(bK,bL){return bL===null?"null":"[["+br.concat("][",N.delay(function(){var bM;bM=bL.length?bL[0].length:0;return N.map(function(bN){return br.concat("; ",N.delay(function(){return N.map(function(bO){return bK(M.get2D(bL,bN,bO));},B.range(0,bM-1));}));},B.range(0,bL.length-1));}))+"]]";};D.printArray=function(bK,bL){return bL===null?"null":"[|"+br.concat("; ",M.map(bK,bL))+"|]";};D.printList=function(bK,bL){return"["+br.concat("; ",N.map(bK,bL))+"]";};D.padNumLeft=function(bK,bL){var bM;bM=M.get(bK,0);return bM===" "||bM==="+"||bM==="-"?bM+br.PadLeftWith(bK.substr(1),bL-1,"0"):br.PadLeftWith(bK,bL,"0");};D.spaceForPos=function(bK,bL){return 0<=bK?" "+bL:bL;};D.plusForPos=function(bK,bL){return 0<=bK?"+"+bL:bL;};D.toSafe=function(bK){return bK==null?"":bK;};F.New=function(bK,bL){return{c:bK,r:bL};};G.New=function(bK,bL){return{k:bK,ct:bL};};H=E.Scheduler=bD.Class({tick:function(){var bK,bL,bM;bL=this;bM=bH.now();bK=true;while(bK)if(this.robin.length===0){this.idle=true;bK=false;}else{(this.robin.shift())();bH.now()-bM>40?(a.setTimeout(function(){bL.tick();},0),bK=false):void 0;}},Fork:function(bK){var bL;bL=this;this.robin.push(bK);this.idle?(this.idle=false,a.setTimeout(function(){bL.tick();},0)):void 0;}},j,H);H.New=bD.Ctor(function(){j.New.call(this);this.idle=true;this.robin=[];},H);E.For=function(bK,bL){return E.Using(J.Get(bK),function(bM){return E.While(function(){return bM.MoveNext();},E.Delay(function(){return bL(bM.Current());}));});};E.While=function(bK,bL){return bK()?E.Bind(bL,function(){return E.While(bK,bL);}):E.Return();};E.Using=function(bK,bL){return E.TryFinally(bL(bK),function(){bK.Dispose();});};E.TryCancelled=function(bK,bL){return function(bM){bK(G.New(function(bN){if(bN.$==2){bL(bN.$0);bM.k(bN);}else bM.k(bN);},bM.ct));};};E.OnCancel=function(bK){return function(bL){bL.k({$:0,$0:E.Register(bL.ct,bK)});};};E.StartChildAsTask=function(bK){return function(bL){(E.StartChild(bK,null))(G.New(function(bM){if(bM.$==0)bL.k({$:0,$0:E.StartImmediateAsTask(bM.$0,{$:1,$0:bL.ct})});},bL.ct));};};E.StartChild=function(bK,bL){return function(bM){var bN,bO,bP,bQ;bN=[true];bO=[null];bP=[];bQ=bL!=null&&bL.$==1?{$:1,$0:a.setTimeout(function(){var bR;bN[0]=false;bR={$:1,$0:new _9.New()};while(bP.length>0)(bP.shift())(bR);},bL.$0)}:null;E.scheduler().Fork(function(){if(!bM.ct.c)bK(G.New(function(bR){if(bN[0]){bO[0]={$:1,$0:bR};bQ!=null&&bQ.$==1?a.clearTimeout(bQ.$0):void 0;while(bP.length>0)(bP.shift())(bR);}},bM.ct));});bM.k({$:0,$0:function(bR){var bS;if(bN[0]){bS=bO[0];bS==null?bP.push(bR.k):bR.k(bS.$0);}else bR.k({$:1,$0:new _9.New()});}});};};E.Sequential=function(bK){var bL;bL=M.ofSeq(bK);return M.length(bL)===0?E.Return([]):function(bM){var bN,bO;function bP(bR){var bS;while(true){bS=function(bT){return function(){(M.get(bL,bT))(G.New(function(bU){return bQ(bT,bU);},bM.ct));};}(bR);return E.scheduler().Fork(bS);}}function bQ(bR,bS){return bS.$==0?(M.set(bO,bR,bS.$0),bR===bN-1?bM.k({$:0,$0:bO}):bM.ct.c?E.cancel(bM):bP(bR+1)):bM.k(bS);}bN=bL.length;bO=new a.Array(bN);bP(0);};};E.ParallelWithMaxDegree=function(bK,bL){var bM;bL<=0?B.InvalidArg("maxDegreeOfParallelism","maxDegreeOfParallelism must be positive, was "+bG(bL)):void 0;bM=M.ofSeq(bK);return M.length(bM)===0?E.Return([]):function(bN){var bQ,bR,bS,bT,bU;function bO(bV){E.scheduler().Fork(function(){(M.get(bM,bV))(G.New(function(bW){return bP(bV,bW);},bN.ct));});}function bP(bV,bW){var bX,bY,bZ;bY=bR[0];switch(bY===0?0:bY===1?bW.$==0?1:(bX=[bY,bW],3):bW.$==0?2:(bX=[bY,bW],3)){case 0:return null;case 1:M.set(bS,bV,bW.$0);bR[0]=0;return bN.k({$:0,$0:bS});case 2:return bN.ct.c?(bR[0]=0,E.cancel(bN)):(M.set(bS,bV,bW.$0),bR[0]=bY-1,bZ=bQ-bY+bL,bZ<bQ?bO(bZ):null);case 3:bR[0]=0;return bN.k(bX[1]);}}bQ=bM.length;bR=[bQ];bS=new a.Array(bQ);for(bT=0,bU=(bv.Compare(bL,bQ)===-1?bL:bQ)-1;bT<=bU;bT++)bO(bT);};};E.Parallel=function(bK){var bL;bL=M.ofSeq(bK);return M.length(bL)===0?E.Return([]):function(bM){var bO,bP,bQ,bR,bS;function bN(bT,bU){var bV,bW;bW=bP[0];switch(bW===0?0:bW===1?bU.$==0?1:(bV=bU,3):bU.$==0?2:(bV=bU,3)){case 0:return null;case 1:M.set(bQ,bT,bU.$0);bP[0]=0;return bM.k({$:0,$0:bQ});case 2:M.set(bQ,bT,bU.$0);{bP[0]=bW-1;return;}break;case 3:bP[0]=0;return bM.k(bV);}}bO=bL.length;bP=[bO];bQ=new a.Array(bO);for(bR=0,bS=bO-1;bR<=bS;bR++)(function(bT){return E.scheduler().Fork(function(){(M.get(bL,bT))(G.New(function(bU){return bN(bT,bU);},bM.ct));});}(bR));};};E.Sleep=function(bK){return function(bL){var bM,bN;bM=void 0;bN=void 0;bM=a.setTimeout(function(){bN.Dispose();E.scheduler().Fork(function(){bL.k({$:0,$0:null});});},bK);bN=E.Register(bL.ct,function(){a.clearTimeout(bM);E.scheduler().Fork(function(){E.cancel(bL);});});};};E.StartImmediateAsTask=function(bK,bL){var bM;bM=new bu.New();E.StartWithContinuations(bK,function(bN){bM.SetResult(bN);},function(bN){bM.SetException$1(bN);},function(){bM.SetCanceled();},bL);return bM.get_Task();};E.StartAsTask=function(bK,bL){var bM;bM=new bu.New();E.scheduler().Fork(function(){E.StartWithContinuations(bK,function(bN){bM.SetResult(bN);},function(bN){bM.SetException$1(bN);},function(){bM.SetCanceled();},bL);});return bM.get_Task();};E.AwaitTask1=function(bK){return E.FromContinuations(function(bL,bM,bN){bK.get_Status()===0?bK.Start():void 0;bK.ContinueWith$1(function(bO){return bO.get_IsCanceled()?bN(new _3.New(E.noneCT())):bO.get_IsFaulted()?bM(bO.get_Exception()):bL(bO.get_Result());},E.noneCT());});};E.AwaitTask=function(bK){return E.FromContinuations(function(bL,bM,bN){bK.get_Status()===0?bK.Start():void 0;bK.ContinueWith$1(function(bO){return bO.get_IsCanceled()?bN(new _3.New(E.noneCT())):bO.get_IsFaulted()?bM(bO.get_Exception()):bL();},E.noneCT());});};E.AwaitEvent=function(bK,bL){return function(bM){var bN,bO;bN=void 0;bO=void 0;bN=bK.Subscribe(S.observer(function(bP){bN.Dispose();bO.Dispose();E.scheduler().Fork(function(){bM.k({$:0,$0:bP});});}));bO=E.Register(bM.ct,function(){if(bL!=null&&bL.$==1)bL.$0();else{bN.Dispose();E.scheduler().Fork(function(){E.cancel(bM);});}});};};E.StartImmediate=function(bK,bL){var bM,bN;bM=(bN=(E.defCTS())[0],bL==null?bN:bL.$0);!bM.c?bK(G.New(function(bO){if(bO.$==1)E.UncaughtAsyncError(bO.$0);},bM)):void 0;};E.Start=function(bK,bL){var bM,bN;bM=(bN=(E.defCTS())[0],bL==null?bN:bL.$0);E.scheduler().Fork(function(){if(!bM.c)bK(G.New(function(bO){if(bO.$==1)E.UncaughtAsyncError(bO.$0);},bM));});};E.UncaughtAsyncError=function(bK){bI.log("WebSharper: Uncaught asynchronous exception",bK);};E.StartWithContinuations=function(bK,bL,bM,bN,bO){var bP,bQ;bP=(bQ=(E.defCTS())[0],bO==null?bQ:bO.$0);!bP.c?bK(G.New(function(bR){if(bR.$==1)bM(bR.$0);else if(bR.$==2)bN(bR.$0);else bL(bR.$0);},bP)):void 0;};E.FromContinuations=function(bK){return function(bL){var bM;function bN(bO){if(bM[0])B.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bM[0]=true;E.scheduler().Fork(bO);}}bM=[false];bK(function(bO){bN(function(){bL.k({$:0,$0:bO});});},function(bO){bN(function(){bL.k({$:1,$0:bO});});},function(bO){bN(function(){bL.k({$:2,$0:bO});});});};};E.GetCT=function(){I.$cctor();return I.GetCT;};E.Catch=function(bK){return function(bL){try{bK(G.New(function(bM){if(bM.$==0)bL.k({$:0,$0:{$:0,$0:bM.$0}});else if(bM.$==1)bL.k({$:0,$0:{$:1,$0:bM.$0}});else bL.k(bM);},bL.ct));}catch(bM){bL.k({$:0,$0:{$:1,$0:bM}});}};};E.TryWith=function(bK,bL){return function(bM){bK(G.New(function(bN){if(bN.$==0)bM.k({$:0,$0:bN.$0});else if(bN.$==1)try{(bL(bN.$0))(bM);}catch(bO){bM.k(bN);}else bM.k(bN);},bM.ct));};};E.TryFinally=function(bK,bL){return function(bM){bK(G.New(function(bN){try{bL();bM.k(bN);}catch(bO){bM.k({$:1,$0:bO});}},bM.ct));};};E.Delay=function(bK){return function(bL){try{(bK(null))(bL);}catch(bM){bL.k({$:1,$0:bM});}};};E.Combine=function(bK,bL){return E.Bind(bK,function(){return bL;});};E.Bind=function(bK,bL){return E.checkCancel(function(bM){bK(G.New(function(bN){var bO;if(bN.$==0){bO=bN.$0;E.scheduler().Fork(function(){try{(bL(bO))(bM);}catch(bP){bM.k({$:1,$0:bP});}});}else E.scheduler().Fork(function(){bM.k(bN);});},bM.ct));});};E.Zero=function(){I.$cctor();return I.Zero;};E.Return=function(bK){return function(bL){bL.k({$:0,$0:bK});};};E.checkCancel=function(bK){return function(bL){if(bL.ct.c)E.cancel(bL);else bK(bL);};};E.cancel=function(bK){bK.k({$:2,$0:new _3.New(bK.ct)});};E.defCTS=function(){I.$cctor();return I.defCTS;};E.scheduler=function(){I.$cctor();return I.scheduler;};E.Register=function(bK,bL){var bM;return bK===E.noneCT()?{Dispose:function(){return null;}}:(bM=bK.r.push(bL)-1,{Dispose:function(){return M.set(bK.r,bM,a.ignore);}});};E.noneCT=function(){I.$cctor();return I.noneCT;};I.$cctor=function(){I.$cctor=a.ignore;I.noneCT=F.New(false,[]);I.scheduler=new H.New();I.defCTS=[new Q.New()];I.Zero=E.Return();I.GetCT=function(bK){bK.k({$:0,$0:bK.ct});};};K=J.T=bD.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},j,K);K.New=bD.Ctor(function(bK,bL,bM,bN){j.New.call(this);this.s=bK;this.c=bL;this.n=bM;this.d=bN;},K);J.Get0=function(bK){return bK instanceof a.Array?J.ArrayEnumerator(bK):bv.Equals(typeof bK,"string")?J.StringEnumerator(bK):"GetEnumerator0"in bK?bK.GetEnumerator0():bK.GetEnumerator();};J.Get=function(bK){return bK instanceof a.Array?J.ArrayEnumerator(bK):bv.Equals(typeof bK,"string")?J.StringEnumerator(bK):bK.GetEnumerator();};J.StringEnumerator=function(bK){return new K.New(0,null,function(bL){var bM;bM=bL.s;return bM<bK.length&&(bL.c=bK[bM],bL.s=bM+1,true);},void 0);};J.ArrayEnumerator=function(bK){return new K.New(0,null,function(bL){var bM;bM=bL.s;return bM<M.length(bK)&&(bL.c=M.get(bK,bM),bL.s=bM+1,true);},void 0);};L.Undefined={$:0};M.splitInto=function(bK,bL){var bM,bN,bO,bP,bQ,bR,bS,bT,bU;if(bK<=0)B.FailWith("Count must be positive");bN=M.length(bL);if(bN===0)return[];else{bO=bv.Compare(bK,bN)===-1?bK:bN;bP=M.create(bO,null);bQ=bN/bO>>0;bM=0;for(bR=0,bS=bN%bO-1;bR<=bS;bR++){bP[bR]=M.sub(bL,bM,bQ+1);bM=bM+bQ+1;}for(bT=bN%bO,bU=bO-1;bT<=bU;bT++){bP[bT]=M.sub(bL,bM,bQ);bM=bM+bQ;}return bP;}};M.contains=function(bK,bL){var bM,bN,bO,bP;bM=true;bN=0;bP=M.length(bL);while(bM&&bN<bP)if(bv.Equals(bL[bN],bK))bM=false;else bN=bN+1;return!bM;};M.tryFindBack=function(bK,bL){var bM,bN,bO;bM=null;bN=bL.length-1;while(bN>=0&&bM==null){bO=bL[bN];bK(bO)?bM={$:1,$0:bO}:void 0;bN=bN-1;}return bM;};M.tryFindIndexBack=function(bK,bL){var bM,bN;bM=null;bN=bL.length-1;while(bN>=0&&bM==null){bK(M.get(bL,bN))?bM={$:1,$0:bN}:void 0;bN=bN-1;}return bM;};M.mapFold=function(bK,bL,bM){var bN,bO,bP,bQ,bR;bO=new a.Array(bM.length);bN=bL;for(bP=0,bQ=bM.length-1;bP<=bQ;bP++){bR=bK(bN,bM[bP]);bO[bP]=bR[0];bN=bR[1];}return[bO,bN];};M.mapFoldBack=function(bK,bL,bM){var bN,bO,bP,bQ,bR,bS,bT,bU;bP=new a.Array(bL.length);bN=bM;bQ=bL.length;for(bR=1,bS=bQ;bR<=bS;bR++){bT=bQ-bR;bU=bK(bL[bT],bN);bP[bT]=bU[0];bN=bU[1];}return[bP,bN];};M.mapInPlace=function(bK,bL){var bM,bN;for(bM=0,bN=bL.length-1;bM<=bN;bM++)bL[bM]=bK(bL[bM]);};M.mapiInPlace=function(bK,bL){var bM,bN;for(bM=0,bN=bL.length-1;bM<=bN;bM++)bL[bM]=bK(bM,bL[bM]);return bL;};M.sortInPlaceByDescending=function(bK,bL){M.mapInPlace(function(bM){return bM[0];},M.mapiInPlace(function(bM,bN){return[bN,[bK(bN),bM]];},bL).sort(function(bM,bN){return-bv.Compare(bM[1],bN[1]);}));};N.tryHead=function(bK){var bL;bL=J.Get(bK);try{return bL.MoveNext()?{$:1,$0:bL.Current()}:null;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.tryItem=function(bK,bL){var bM,bN,bO;if(bK<0)return null;else{bM=0;bN=J.Get(bL);try{bO=true;while(bO&&bM<=bK)if(bN.MoveNext())bM=bM+1;else bO=false;return bO?{$:1,$0:bN.Current()}:null;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}}};N.tryLast=function(bK){var bL,bM;bL=J.Get(bK);try{if(bL.MoveNext()){while(bL.MoveNext());bM={$:1,$0:bL.Current()};}else bM=null;return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.chunkBySize=function(bK,bL){bK<=0?B.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bM;bM=J.Get(bL);return new K.New(true,null,function(bN){var bO;if(bN.s&&bM.MoveNext()){bO=[bM.Current()];while(bN.s&&M.length(bO)<bK)if(bM.MoveNext())bO.push(bM.Current());else bN.s=false;bN.c=bO;return true;}else return false;},function(){bM.Dispose();});}};};M.countBy=function(bK,bL){var bM,bN,bO,bP,bQ;bM=new Z.New$5();bN=[];for(bO=0,bP=M.length(bL)-1;bO<=bP;bO++){bQ=bK(bL[bO]);bM.ContainsKey(bQ)?bM.set_Item(bQ,bM.get_Item(bQ)+1):(bN.push(bQ),bM.Add(bQ,1));}M.mapInPlace(function(bR){return[bR,bM.get_Item(bR)];},bN);return bN;};N.except=function(bK,bL){return{GetEnumerator:function(){var bM,bN;bM=J.Get(bL);bN=new be.New$2(bK);return new K.New(null,null,function(bO){var bP,bQ;if(bM.MoveNext()){bP=bM.Current();bQ=bN.Add(bP);while(!bQ&&bM.MoveNext()){bP=bM.Current();bQ=bN.Add(bP);}return bQ&&(bO.c=bP,true);}else return false;},function(){bM.Dispose();});}};};O.skip=function(bK,bL){var bM,bN,bO;bM=bL;for(bN=1,bO=bK;bN<=bO;bN++)if(bM.$==0)B.FailWith("Input list too short.");else bM=bM.$1;return bM;};M.groupBy=function(bK,bL){var bM,bN,bO,bP,bQ,bR;bM=new Z.New$5();bN=[];for(bO=0,bP=M.length(bL)-1;bO<=bP;bO++){bQ=bL[bO];bR=bK(bQ);bM.ContainsKey(bR)?bM.get_Item(bR).push(bQ):(bN.push(bR),bM.Add(bR,[bQ]));}M.mapInPlace(function(bS){return[bS,bM.get_Item(bS)];},bN);return bN;};N.insufficient=function(){return B.FailWith("The input sequence has an insufficient number of elements.");};N.last=function(bK){var bL,bM;bL=J.Get(bK);try{if(!bL.MoveNext())bM=N.insufficient();else{while(bL.MoveNext());bM=bL.Current();}return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.contains=function(bK,bL){var bM,bN;bM=J.Get(bL);try{bN=false;while(!bN&&bM.MoveNext())bN=bv.Equals(bM.Current(),bK);return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};O.skipWhile=function(bK,bL){var bM;bM=bL;while(!(bM.$==0)&&bK(O.head(bM)))bM=O.tail(bM);return bM;};N.nonNegative=function(){return B.FailWith("The input must be non-negative.");};M.transposeArray=function(bK){var bL,bM,bN,bO,bP,bQ,bR,bS,bT;bL=M.length(bK);if(bL===0)return[];else{bM=M.length(M.get(bK,0));for(bN=1,bO=bL-1;bN<=bO;bN++)if(bM!==M.length(M.get(bK,bN)))B.FailWith("The arrays have different lengths.");bP=new a.Array(bM);for(bQ=0,bR=bM-1;bQ<=bR;bQ++){bP[bQ]=new a.Array(bL);for(bS=0,bT=bL-1;bS<=bT;bS++)bP[bQ][bS]=M.get(M.get(bK,bS),bQ);}return bP;}};M.checkBounds=function(bK,bL){if(bL<0||bL>=bK.length)B.FailWith("Index was outside the bounds of the array.");};M.checkBounds2D=function(bK,bL,bM){if(bL<0||bM<0||bL>=bK.length||bM>=(bK.length?bK[0].length:0))throw new _2.New();};M.checkRange=function(bK,bL,bM){if(bM<0||bL<0||bK.length<bL+bM)B.FailWith("Index was outside the bounds of the array.");};M.set=function(bK,bL,bM){M.checkBounds(bK,bL);bK[bL]=bM;};M.get=function(bK,bL){M.checkBounds(bK,bL);return bK[bL];};M.sub=function(bK,bL,bM){M.checkRange(bK,bL,bM);return bK.slice(bL,bL+bM);};M.setSub=function(bK,bL,bM,bN){var bO,bP;for(bO=0,bP=bM-1;bO<=bP;bO++)M.set(bK,bL+bO,M.get(bN,bO));};M.get2D=function(bK,bL,bM){M.checkBounds2D(bK,bL,bM);return bK[bL][bM];};M.set2D=function(bK,bL,bM,bN){M.checkBounds2D(bK,bL,bM);bK[bL][bM]=bN;};M.zeroCreate2D=function(bK,bL){var bM;bM=M.init(bK,function(){return M.create(bL,null);});bM.dims=2;return bM;};M.sub2D=function(bK,bL,bM,bN,bO){var bP,bQ,bR,bS,bT,bU,bV;bP=bN<0?0:bN;bQ=bO<0?0:bO;bR=M.zeroCreate2D(bP,bQ);for(bS=0,bT=bP-1;bS<=bT;bS++){for(bU=0,bV=bQ-1;bU<=bV;bU++)M.set2D(bR,bS,bU,M.get2D(bK,bL+bS,bM+bU));}return bR;};M.setSub2D=function(bK,bL,bM,bN,bO,bP){var bQ,bR,bS,bT;for(bQ=0,bR=bN-1;bQ<=bR;bQ++){for(bS=0,bT=bO-1;bS<=bT;bS++)M.set2D(bK,bL+bQ,bM+bS,M.get2D(bP,bQ,bS));}};M.length=function(bK){return bK.dims===2?bK.length*bK.length:bK.length;};b.checkThis=function(bK){return bv.Equals(bK,null)?B.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bK;};M.binarySearch=function(bK,bL,bM,bN){var bO,bP,bQ,bR;bO=bM;bP=bN-1;if(bM<0)throw new _5.New("index","Non-negative number required.");else null;if(bN>M.length(bK))throw new _4.New$2("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");else null;if(bN<bM)throw new _5.New("length","Non-negative number required.");else null;while(true)if(bO>bP)return~bO;else{bQ=(bO+bP)/2>>0;bR=bL(M.get(bK,bQ));if(bO===bP)return bR===0?bO:bR>0?~(bO+1):~bO;else if(bR<=0)bP=bQ;else bO=bQ+1;}};M.binarySearchComparer=function(bK){return bK.CompareTo0?function(bL){return bK.CompareTo0(bL);}:function(bL){if(bL.CompareTo0)return-bL.CompareTo0(bK);else throw new _7.New$2("Failed to compare two elements in the array.",new _4.New$2("At least one object must implement IComparable."));};};M.sortInternal=function(bK,bL,bM,bN,bO){function bP(bR,bS){var bT,bU,bV,bW;bU=bK[bS];bT=bR-1;for(bV=bR,bW=bS-1;bV<=bW;bV++)if(bN(bK[bV],bU)<0){bT=bT+1;bO(bT,bV);}bN(bK[bS],bK[bT+1])<0?bO(bT+1,bS):void 0;return bT+1;}function bQ(bR,bS){var bT;return bR<bS?(bT=bP(bR,bS),(bQ(bR,bT-1),bQ(bT+1,bS))):null;}bQ(bL,bL+bM-1);};M.sortSub=function(bK,bL,bM,bN){M.sortInternal(bK,bL,bM,bN,function(bO,bP){var bQ;bQ=bK[bO];bK[bO]=bK[bP];bK[bP]=bQ;});};M.sortByKeys=function(bK,bL,bM,bN,bO){M.sortInternal(bK,bM,bN,bO,function(bP,bQ){var bR,bS;bR=bK[bP];bK[bP]=bK[bQ];bK[bQ]=bR;bS=bL[bP];bL[bP]=bL[bQ];bL[bQ]=bS;});};M.clear=function(bK,bL,bM){var bN,bO;if(bK==null)throw new _6.New$1("array");else void 0;if(bL<0||bM<0||bL+bM>M.length(bK))throw new _2.New();else void 0;for(bN=bL,bO=bL+bM-1;bN<=bO;bN++)bK[bN]=typeof bK[bN]=="number"?0:null;};M.constrainedCopy=function(bK,bL,bM,bN,bO){if(bK===bM&&bN<=bL+bO)M.blit(M.init(bO,function(bP){return M.get(bK,bL+bP);}),0,bM,bN,bO);else M.blit(bK,bL,bM,bN,bO);};M.findIndexBound=function(bK,bL,bM,bN){var bO,bP;bO=bL+bM;bP=bL;if(bK==null)throw new _6.New$1("array");else null;if(bN==null)throw new _6.New$1("match");else null;if(bL<0)throw new _5.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bM<0||bL+bM>M.length(bK))throw new _5.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;while(true)if(bP===bO)return -1;else if(bN(M.get(bK,bP)))return bP;else bP=bP+1;};M.findLastIndexBound=function(bK,bL,bM,bN){var bO;bO=bL+bM-1;if(bK==null)throw new _6.New$1("array");else null;if(bN==null)throw new _6.New$1("match");else null;if(bL<0)throw new _5.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bM<0||bL+bM>M.length(bK))throw new _5.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;while(true)if(bO<bL)return -1;else if(bN(M.get(bK,bO)))return bO;else bO=bO-1;};M.reverse=function(bK,bL,bM){var bN;bN=M.sub(bK,bL,bM).slice().reverse();M.blit(bN,0,bK,bL,M.length(bN));};M.sum=function(bK){var bL,bM;bL=0;bM=0;for(;bM<bK.length;bM++)bL+=bK[bM];return bL;};M.sumBy=function(bK,bL){var bM,bN;bM=0;bN=0;for(;bN<bL.length;bN++)bM+=bK(bL[bN]);return bM;};M.allPairs=function(bK,bL){var bM,bN,bO,bP,bQ,bR,bS;bM=bK.length;bN=bL.length;bO=new a.Array(bM*bN);for(bP=0,bQ=bM-1;bP<=bQ;bP++){for(bR=0,bS=bN-1;bR<=bS;bR++)bO[bP*bN+bR]=[bK[bP],bL[bR]];}return bO;};M.average=function(bK){return a.Number(M.sum(bK))/bK.length;};M.averageBy=function(bK,bL){return a.Number(M.sumBy(bK,bL))/bL.length;};M.blit=function(bK,bL,bM,bN,bO){var bP,bQ;M.checkRange(bK,bL,bO);M.checkRange(bM,bN,bO);for(bP=0,bQ=bO-1;bP<=bQ;bP++)bM[bN+bP]=bK[bL+bP];};M.choose=function(bK,bL){var bM,bN,bO,bP;bM=[];for(bN=0,bO=bL.length-1;bN<=bO;bN++){bP=bK(bL[bN]);bP==null?void 0:bM.push(bP.$0);}return bM;};M.collect=function(bK,bL){return a.Array.prototype.concat.apply([],M.map(bK,bL));};M.concat=function(bK){return a.Array.prototype.concat.apply([],M.ofSeq(bK));};M.create=function(bK,bL){var bM,bN,bO;bM=new a.Array(bK);for(bN=0,bO=bK-1;bN<=bO;bN++)bM[bN]=bL;return bM;};M.exists=function(bK,bL){var bM,bN,bO,bP;bM=false;bN=0;bP=M.length(bL);while(!bM&&bN<bP)if(bK(bL[bN]))bM=true;else bN=bN+1;return bM;};M.exists2=function(bK,bL,bM){var bN,bO,bP,bQ;M.checkLength(bL,bM);bN=false;bO=0;bQ=M.length(bL);while(!bN&&bO<bQ)if(bK(bL[bO],bM[bO]))bN=true;else bO=bO+1;return bN;};M.fill=function(bK,bL,bM,bN){var bO,bP;M.checkRange(bK,bL,bM);for(bO=bL,bP=bL+bM-1;bO<=bP;bO++)bK[bO]=bN;};M.filter=function(bK,bL){var bM,bN,bO;bM=[];for(bN=0,bO=bL.length-1;bN<=bO;bN++)if(bK(bL[bN]))bM.push(bL[bN]);return bM;};M.find=function(bK,bL){var bM;bM=M.tryFind(bK,bL);return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};M.findIndex=function(bK,bL){var bM;bM=M.tryFindIndex(bK,bL);return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};M.fold=function(bK,bL,bM){var bN,bO,bP;bN=bL;for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN=bK(bN,bM[bO]);return bN;};M.fold2=function(bK,bL,bM,bN){var bO,bP,bQ;M.checkLength(bM,bN);bO=bL;for(bP=0,bQ=bM.length-1;bP<=bQ;bP++)bO=bK(bO,bM[bP],bN[bP]);return bO;};M.foldBack=function(bK,bL,bM){var bN,bO,bP,bQ,bR;bN=bM;bP=bL.length;for(bQ=1,bR=bP;bQ<=bR;bQ++)bN=bK(bL[bP-bQ],bN);return bN;};M.foldBack2=function(bK,bL,bM,bN){var bO,bP,bQ,bR,bS;M.checkLength(bL,bM);bQ=bL.length;bP=bN;for(bR=1,bS=bQ;bR<=bS;bR++)bP=bK(bL[bQ-bR],bM[bQ-bR],bP);return bP;};M.forall=function(bK,bL){var bM,bN,bO,bP;bM=true;bN=0;bP=M.length(bL);while(bM&&bN<bP)if(bK(bL[bN]))bN=bN+1;else bM=false;return bM;};M.forall2=function(bK,bL,bM){var bN,bO,bP,bQ;M.checkLength(bL,bM);bN=true;bO=0;bQ=M.length(bL);while(bN&&bO<bQ)if(bK(bL[bO],bM[bO]))bO=bO+1;else bN=false;return bN;};M.init=function(bK,bL){var bM,bN,bO;bK<0?B.FailWith("Negative size given."):null;bM=new a.Array(bK);for(bN=0,bO=bK-1;bN<=bO;bN++)bM[bN]=bL(bN);return bM;};M.iter=function(bK,bL){var bM,bN;for(bM=0,bN=bL.length-1;bM<=bN;bM++)bK(bL[bM]);};M.iter2=function(bK,bL,bM){var bN,bO;M.checkLength(bL,bM);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bK(bL[bN],bM[bN]);};M.iteri=function(bK,bL){var bM,bN;for(bM=0,bN=bL.length-1;bM<=bN;bM++)bK(bM,bL[bM]);};M.iteri2=function(bK,bL,bM){var bN,bO;M.checkLength(bL,bM);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bK(bN,bL[bN],bM[bN]);};M.map=function(bK,bL){var bM,bN,bO;bM=new a.Array(bL.length);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM[bN]=bK(bL[bN]);return bM;};M.map2=function(bK,bL,bM){var bN,bO,bP;M.checkLength(bL,bM);bN=new a.Array(bM.length);for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN[bO]=bK(bL[bO],bM[bO]);return bN;};M.mapi=function(bK,bL){var bM,bN,bO;bM=new a.Array(bL.length);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM[bN]=bK(bN,bL[bN]);return bM;};M.mapi2=function(bK,bL,bM){var bN,bO,bP;M.checkLength(bL,bM);bN=new a.Array(bL.length);for(bO=0,bP=bL.length-1;bO<=bP;bO++)bN[bO]=bK(bO,bL[bO],bM[bO]);return bN;};M.max=function(bK){var bL,bM,bN,bO;M.nonEmpty(bK);bL=bK[0];for(bM=1,bN=bK.length-1;bM<=bN;bM++){bO=bK[bM];bv.Compare(bO,bL)===1?bL=bO:void 0;}return bL;};M.maxBy=function(bK,bL){var bM,bN,bO,bP,bQ,bR;M.nonEmpty(bL);bM=bL[0];bN=bK(bM);for(bO=1,bP=bL.length-1;bO<=bP;bO++){bQ=bL[bO];bR=bK(bQ);bv.Compare(bR,bN)===1?(bM=bQ,bN=bR):void 0;}return bM;};M.min=function(bK){var bL,bM,bN,bO;M.nonEmpty(bK);bL=bK[0];for(bM=1,bN=bK.length-1;bM<=bN;bM++){bO=bK[bM];bv.Compare(bO,bL)===-1?bL=bO:void 0;}return bL;};M.minBy=function(bK,bL){var bM,bN,bO,bP,bQ,bR;M.nonEmpty(bL);bM=bL[0];bN=bK(bM);for(bO=1,bP=bL.length-1;bO<=bP;bO++){bQ=bL[bO];bR=bK(bQ);bv.Compare(bR,bN)===-1?(bM=bQ,bN=bR):void 0;}return bM;};M.ofList=function(bK){var bL,bM;bM=[];bL=bK;while(!(bL.$==0)){bM.push(O.head(bL));bL=O.tail(bL);}return bM;};M.ofSeq=function(bK){var bL,bM;if(bK instanceof a.Array)return bK.slice();else if(bK instanceof bi)return M.ofList(bK);else{bL=[];bM=J.Get(bK);try{while(bM.MoveNext())bL.push(bM.Current());return bL;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}}};M.partition=function(bK,bL){var bM,bN,bO,bP;bM=[];bN=[];for(bO=0,bP=bL.length-1;bO<=bP;bO++)if(bK(bL[bO]))bM.push(bL[bO]);else bN.push(bL[bO]);return[bM,bN];};M.permute=function(bK,bL){var bM,bN,bO;bM=new a.Array(bL.length);for(bN=0,bO=bL.length-1;bN<=bO;bN++)bM[bK(bN)]=bL[bN];return bM;};M.pick=function(bK,bL){var bM;bM=M.tryPick(bK,bL);return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};M.reduce=function(bK,bL){var bM,bN,bO;M.nonEmpty(bL);bM=bL[0];for(bN=1,bO=bL.length-1;bN<=bO;bN++)bM=bK(bM,bL[bN]);return bM;};M.reduceBack=function(bK,bL){var bM,bN,bO,bP,bQ;M.nonEmpty(bL);bO=bL.length;bN=bL[bO-1];for(bP=2,bQ=bO;bP<=bQ;bP++)bN=bK(bL[bO-bP],bN);return bN;};M.scan=function(bK,bL,bM){var bN,bO,bP;bN=new a.Array(1+bM.length);bN[0]=bL;for(bO=0,bP=bM.length-1;bO<=bP;bO++)bN[bO+1]=bK(bN[bO],bM[bO]);return bN;};M.scanBack=function(bK,bL,bM){var bN,bO,bP,bQ;bN=bL.length;bO=new a.Array(1+bN);bO[bN]=bM;for(bP=0,bQ=bN-1;bP<=bQ;bP++)bO[bN-bP-1]=bK(bL[bN-bP-1],bO[bN-bP]);return bO;};M.sort=function(bK){return M.map(function(bL){return bL[0];},M.mapi(function(bL,bM){return[bM,bL];},bK).sort(bv.Compare));};M.sortBy=function(bK,bL){return M.map(function(bM){return bM[0];},M.mapi(function(bM,bN){return[bN,[bK(bN),bM]];},bL).sort(function(bM,bN){return bv.Compare(bM[1],bN[1]);}));};M.sortInPlace=function(bK){M.mapInPlace(function(bL){return bL[0];},M.mapiInPlace(function(bL,bM){return[bM,bL];},bK).sort(bv.Compare));};M.sortInPlaceBy=function(bK,bL){M.mapInPlace(function(bM){return bM[0];},M.mapiInPlace(function(bM,bN){return[bN,[bK(bN),bM]];},bL).sort(function(bM,bN){return bv.Compare(bM[1],bN[1]);}));};M.sortInPlaceWith=function(bK,bL){bL.sort(bK);};M.sortWith=function(bK,bL){return bL.slice().sort(bK);};M.sortByDescending=function(bK,bL){return M.map(function(bM){return bM[0];},M.mapi(function(bM,bN){return[bN,[bK(bN),bM]];},bL).sort(function(bM,bN){return-bv.Compare(bM[1],bN[1]);}));};M.sortDescending=function(bK){return M.map(function(bL){return bL[0];},M.mapi(function(bL,bM){return[bM,bL];},bK).sort(function(bL,bM){return-bv.Compare(bL,bM);}));};M.transpose=function(bK){return bK instanceof a.Array?M.transposeArray(bK):M.transposeArray(M.ofSeq(bK));};M.tryFind=function(bK,bL){var bM,bN;bM=null;bN=0;while(bN<bL.length&&bM==null){bK(bL[bN])?bM={$:1,$0:bL[bN]}:void 0;bN=bN+1;}return bM;};M.tryFindIndex=function(bK,bL){var bM,bN;bM=null;bN=0;while(bN<bL.length&&bM==null){bK(bL[bN])?bM={$:1,$0:bN}:void 0;bN=bN+1;}return bM;};M.tryHead=function(bK){return bK.length===0?null:{$:1,$0:bK[0]};};M.tryItem=function(bK,bL){return bL.length<=bK||bK<0?null:{$:1,$0:bL[bK]};};M.tryLast=function(bK){var bL;bL=bK.length;return bL===0?null:{$:1,$0:bK[bL-1]};};M.tryPick=function(bK,bL){var bM,bN,bO;bM=null;bN=0;while(bN<bL.length&&bM==null){bO=bK(bL[bN]);bO!=null&&bO.$==1?bM=bO:void 0;bN=bN+1;}return bM;};M.unzip=function(bK){var bL,bM,bN,bO,bP;bL=[];bM=[];for(bN=0,bO=bK.length-1;bN<=bO;bN++){bP=bK[bN];bL.push(bP[0]);bM.push(bP[1]);}return[bL,bM];};M.unzip3=function(bK){var bL,bM,bN,bO,bP,bQ;bL=[];bM=[];bN=[];for(bO=0,bP=bK.length-1;bO<=bP;bO++){bQ=bK[bO];bL.push(bQ[0]);bM.push(bQ[1]);bN.push(bQ[2]);}return[bL,bM,bN];};M.zip=function(bK,bL){var bM,bN,bO;M.checkLength(bK,bL);bM=M.create(bK.length,null);for(bN=0,bO=bK.length-1;bN<=bO;bN++)bM[bN]=[bK[bN],bL[bN]];return bM;};M.zip3=function(bK,bL,bM){var bN,bO,bP;M.checkLength(bK,bL);M.checkLength(bL,bM);bN=M.create(bK.length,null);for(bO=0,bP=bK.length-1;bO<=bP;bO++)bN[bO]=[bK[bO],bL[bO],bM[bO]];return bN;};M.chunkBySize=function(bK,bL){return M.ofSeq(N.chunkBySize(bK,bL));};M.compareWith=function(bK,bL,bM){return N.compareWith(bK,bL,bM);};M.distinct=function(bK){return M.ofSeq(N.distinct(bK));};M.distinctBy=function(bK,bL){return M.ofSeq(N.distinctBy(bK,bL));};M.except=function(bK,bL){return M.ofSeq(N.except(bK,bL));};M.findBack=function(bK,bL){var bM;bM=M.tryFindBack(bK,bL);return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};M.findIndexBack=function(bK,bL){var bM;bM=M.tryFindIndexBack(bK,bL);return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};M.head=function(bK){M.nonEmpty(bK);return bK[0];};M.last=function(bK){M.nonEmpty(bK);return bK[bK.length-1];};M.map3=function(bK,bL,bM,bN){var bO,bP,bQ;M.checkLength(bL,bM);M.checkLength(bL,bN);bO=new a.Array(bN.length);for(bP=0,bQ=bN.length-1;bP<=bQ;bP++)bO[bP]=bK(bL[bP],bM[bP],bN[bP]);return bO;};M.pairwise=function(bK){return M.ofSeq(N.pairwise(bK));};M.replicate=function(bK,bL){return M.create(bK,bL);};M.indexed=function(bK){return M.mapi(function(bL,bM){return[bL,bM];},bK);};M.skip=function(bK,bL){return bK<0?N.nonNegative():bK>bL.length?N.insufficient():bL.slice(bK);};M.skipWhile=function(bK,bL){var bM,bN;bN=bL.length;bM=0;while(bM<bN&&bK(bL[bM]))bM=bM+1;return bL.slice(bM);};M.tail=function(bK){return M.skip(1,bK);};M.take=function(bK,bL){return bK<0?N.nonNegative():bK>bL.length?N.insufficient():bL.slice(0,bK);};M.takeWhile=function(bK,bL){var bM,bN;bN=bL.length;bM=0;while(bM<bN&&bK(bL[bM]))bM=bM+1;return bL.slice(0,bM);};M.exactlyOne=function(bK){return bK.length===1?bK[0]:B.FailWith("The input does not have precisely one element.");};M.tryExactlyOne=function(bK){return bK.length===1?{$:1,$0:bK[0]}:null;};M.unfold=function(bK,bL){return M.ofSeq(N.unfold(bK,bL));};M.windowed=function(bK,bL){return M.ofSeq(N.windowed(bK,bL));};M.splitAt=function(bK,bL){return[M.take(bK,bL),M.skip(bK,bL)];};M.nonEmpty=function(bK){if(bK.length===0)B.FailWith("The input array was empty.");};M.checkLength=function(bK,bL){if(bK.length!==bL.length)B.FailWith("The arrays have different lengths.");};P.init=function(bK,bL,bM){var bN,bO,bP,bQ,bR;bN=M.zeroCreate2D(bK,bL);for(bO=0,bP=bK-1;bO<=bP;bO++){for(bQ=0,bR=bL-1;bQ<=bR;bQ++)M.set2D(bN,bO,bQ,bM(bO,bQ));}return bN;};P.iter=function(bK,bL){var bM,bN,bO,bP,bQ,bR;bM=bL.length;bN=bL.length?bL[0].length:0;for(bO=0,bP=bM-1;bO<=bP;bO++){for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bK(M.get2D(bL,bO,bQ));}};P.iteri=function(bK,bL){var bM,bN,bO,bP,bQ,bR;bM=bL.length;bN=bL.length?bL[0].length:0;for(bO=0,bP=bM-1;bO<=bP;bO++){for(bQ=0,bR=bN-1;bQ<=bR;bQ++)bK(bO,bQ,M.get2D(bL,bO,bQ));}};P.map=function(bK,bL){return P.init(bL.length,bL.length?bL[0].length:0,function(bM,bN){return bK(M.get2D(bL,bM,bN));});};P.mapi=function(bK,bL){return P.init(bL.length,bL.length?bL[0].length:0,function(bM,bN){return bK(bM,bN,M.get2D(bL,bM,bN));});};P.copy=function(bK){return P.init(bK.length,bK.length?bK[0].length:0,function(bL,bM){return M.get2D(bK,bL,bM);});};Q=b.CancellationTokenSource=bD.Class({CancelAfter:function(bK){var bL,bM;bL=this;!this.c?(bM=this.pending,bM==null?void 0:a.clearTimeout(bM.$0),this.pending={$:1,$0:a.setTimeout(function(){bL.Cancel$1();},bK)}):void 0;},Cancel:function(bK){if(!bK)this.Cancel$1();else if(!this.c){this.c=true;M.iter(function(bL){bL();},this.r);}},Cancel$1:function(){var bK;if(!this.c){this.c=true;bK=M.choose(function(bL){try{bL();return null;}catch(bM){return{$:1,$0:bM};}},this.r);if(M.length(bK)>0)throw new _8.New$3(bK);else void 0;}}},j,Q);Q.CreateLinkedTokenSource=function(bK,bL){return Q.CreateLinkedTokenSource$1([bK,bL]);};Q.CreateLinkedTokenSource$1=function(bK){var bL;bL=new Q.New();M.iter(function(bM){function bN(bO){return bL.Cancel$1();}E.Register(bM,function(){bN();});},bK);return bL;};Q.New=bD.Ctor(function(){j.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},Q);R.IsWhiteSpace=function(bK){return bK.match(new a.RegExp("\\s"))!==null;};R.Parse=function(bK){return bK.length===1?bK:B.FailWith("String must be exactly one character long.");};R.IsUpper=function(bK){return bK>="A"&&bK<="Z";};R.IsLower=function(bK){return bK>="a"&&bK<="z";};R.IsLetterOrDigit=function(bK){return R.IsLetter(bK)||R.IsDigit(bK);};R.IsLetter=function(bK){return bK>="A"&&bK<="Z"||bK>="a"&&bK<="z";};R.IsDigit=function(bK){return bK>="0"&&bK<="9";};R.IsControl=function(bK){return bK>="\u0000"&&bK<="\u001f"||bK>="\u0080"&&bK<="\u009f";};R.GetNumericValue=function(bK){return bK>="0"&&bK<="9"?bK.charCodeAt()-"0".charCodeAt():-1;};S.observer=function(bK){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bK};};T.LongTime=function(bK){return(new bH(bK)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};T.ShortTime=function(bK){return(new bH(bK)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};T.LongDate=function(bK){return(new bH(bK)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};T.Parse=function(bK){var bL;bL=T.TryParse(bK);return bL!=null&&bL.$==1?bL.$0:B.FailWith("Failed to parse date string.");};T.TryParse=function(bK){var bL;bL=bH.parse(bK);return a.isNaN(bL)?null:{$:1,$0:bL};};T.AddMonths=function(bK,bL){var bM;bM=new bH(bK);return(new bH(bM.getFullYear(),bM.getMonth()+bL,bM.getDate(),bM.getHours(),bM.getMinutes(),bM.getSeconds(),bM.getMilliseconds())).getTime();};T.AddYears=function(bK,bL){var bM;bM=new bH(bK);return(new bH(bM.getFullYear()+bL,bM.getMonth(),bM.getDate(),bM.getHours(),bM.getMinutes(),bM.getSeconds(),bM.getMilliseconds())).getTime();};T.TimePortion=function(bK){var bL;bL=new bH(bK);return(((24*0+bL.getHours())*60+bL.getMinutes())*60+bL.getSeconds())*1000+bL.getMilliseconds();};T.DatePortion=function(bK){var bL;bL=new bH(bK);return(new bH(bL.getFullYear(),bL.getMonth(),bL.getDate())).getTime();};U.get_Now=function(){var bK;bK=new bH();return{d:bK.getTime(),o:-bK.getTimezoneOffset()};};U.get_DateTime=function(bK){return bK.d;};V.InvocationList=function(bK){return bK.$Invokes||[bK];};V.RemoveAll=function(bK,bL){var bM;bM=V.InvocationList(bK);M.length(V.InvocationList(bL))>1?B.FailWith("TODO: Remove multicast delegates"):void 0;return bD.CreateDelegate(M.filter(function(bN){return!bv.Equals(bN,bL);},bM));};V.Remove=function(bK,bL){var bM,bN,bO,bP,bQ,bR,bS;bO=V.InvocationList(bK);if(M.length(V.InvocationList(bL))>1)B.FailWith("TODO: Remove multicast delegates");bP=[];bN=false;for(bQ=M.length(bO)-1,bR=0;bQ>=bR;bQ--){bS=M.get(bO,bQ);!bN&&bD.DelegateEqual(bS,bL)?bN=true:bP.unshift(bS);}return bD.CreateDelegate(bP);};V.DelegateTarget=function(bK){var bL;return!bK?null:"$Target"in bK?bK.$Target:"$Invokes"in bK?(bL=bK.$Invokes,(M.get(bL,M.length(bL)-1))[1]):null;};W.getHashCode=function(bK,bL){return bK.CGetHashCode(bL);};W.equals=function(bK){return function(bL,bM){return bK.CEquals(bL,bM);};};W.alreadyAdded=function(){return B.FailWith("An item with the same key has already been added.");};W.notPresent=function(){return B.FailWith("The given key was not present in the dictionary.");};X=t.KeyCollection=bD.Class({GetEnumerator$1:function(){return J.Get(N.map(function(bK){return bK.K;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},j,X);X.New=bD.Ctor(function(bK){j.New.call(this);this.d=bK;},X);Y=t.ValueCollection=bD.Class({GetEnumerator$1:function(){return J.Get(N.map(function(bK){return bK.V;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},j,Y);Y.New=bD.Ctor(function(bK){j.New.call(this);this.d=bK;},Y);Z=t.Dictionary=bD.Class({remove:function(bK){var bL,bM,bN,bO;bL=this;bM=this.hash(bK);bN=this.data[bM];return bN==null?false:(bO=M.filter(function(bP){return!bL.equals.apply(null,[(B.KeyValue(bP))[0],bK]);},bN),M.length(bO)<bN.length&&(this.count=this.count-1,this.data[bM]=bO,true));},add:function(bK,bL){var bM,bN,bO;bM=this;bN=this.hash(bK);bO=this.data[bN];bO==null?(this.count=this.count+1,this.data[bN]=new a.Array({K:bK,V:bL})):(M.exists(function(bP){return bM.equals.apply(null,[(B.KeyValue(bP))[0],bK]);},bO)?W.alreadyAdded():void 0,this.count=this.count+1,bO.push({K:bK,V:bL}));},set:function(bK,bL){var bM,bN,bO,bP;bM=this;bN=this.hash(bK);bO=this.data[bN];bO==null?(this.count=this.count+1,this.data[bN]=new a.Array({K:bK,V:bL})):(bP=M.tryFindIndex(function(bQ){return bM.equals.apply(null,[(B.KeyValue(bQ))[0],bK]);},bO),bP==null?(this.count=this.count+1,bO.push({K:bK,V:bL})):bO[bP.$0]={K:bK,V:bL});},get:function(bK){var bL,bM;bL=this;bM=this.data[this.hash(bK)];return bM==null?W.notPresent():M.pick(function(bN){var bO;bO=B.KeyValue(bN);return bL.equals.apply(null,[bO[0],bK])?{$:1,$0:bO[1]}:null;},bM);},get_Keys:function(){return new X.New(this);},get_Values:function(){return new Y.New(this);},TryGetValue:function(bK,bL){var bM,bN,bO;bM=this;bN=this.data[this.hash(bK)];return bN==null?false:(bO=M.tryPick(function(bP){var bQ;bQ=B.KeyValue(bP);return bM.equals.apply(null,[bQ[0],bK])?{$:1,$0:bQ[1]}:null;},bN),bO!=null&&bO.$==1&&(bL.set(bO.$0),true));},Remove:function(bK){return this.remove(bK);},GetEnumerator$1:function(){return J.Get0(this);},set_Item:function(bK,bL){this.set(bK,bL);},get_Item:function(bK){return this.get(bK);},ContainsKey:function(bK){var bL,bM;bL=this;bM=this.data[this.hash(bK)];return bM==null?false:M.exists(function(bN){return bL.equals.apply(null,[(B.KeyValue(bN))[0],bK]);},bM);},Clear:function(){this.data=[];this.count=0;},Add:function(bK,bL){this.add(bK,bL);},GetEnumerator:function(){return J.Get0(this);},GetEnumerator0:function(){return J.Get0(M.concat(d.GetFieldValues(this.data)));}},j,Z);Z.New=bD.Ctor(function(bK,bL){Z.New$6.call(this,bK,W.equals(bL),function(bM){return W.getHashCode(bL,bM);});},Z);Z.New$1=bD.Ctor(function(bK){Z.New$6.call(this,bK,bv.Equals,bv.Hash);},Z);Z.New$2=bD.Ctor(function(bK,bL){Z.New$3.call(this,bL);},Z);Z.New$3=bD.Ctor(function(bK){Z.New$6.call(this,[],W.equals(bK),function(bL){return W.getHashCode(bK,bL);});},Z);Z.New$4=bD.Ctor(function(bK){Z.New$5.call(this);},Z);Z.New$5=bD.Ctor(function(){Z.New$6.call(this,[],bv.Equals,bv.Hash);},Z);Z.New$6=bD.Ctor(function(bK,bL,bM){var bN,bO;j.New.call(this);this.equals=bL;this.hash=bM;this.count=0;this.data=[];bN=J.Get(bK);try{while(bN.MoveNext()){bO=bN.Current();this.set(bO.K,bO.V);}}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}},Z);_0.withInner=function(bK,bL){var bM;bM=new e(bK);bM.inner=bL;return bM;};_1=b.MatchFailureException=bD.Class({},e,_1);_1.New=bD.Ctor(function(bK,bL,bM){this.message=bK+" at "+bG(bL)+":"+bG(bM);a.Object.setPrototypeOf(this,_1.prototype);},_1);_2=b.IndexOutOfRangeException=bD.Class({},e,_2);_2.New=bD.Ctor(function(){_2.New$1.call(this,"Index was outside the bounds of the array.");},_2);_2.New$1=bD.Ctor(function(bK){this.message=bK;a.Object.setPrototypeOf(this,_2.prototype);},_2);_3=b.OperationCanceledException=bD.Class({},e,_3);_3.New=bD.Ctor(function(bK){_3.New$1.call(this,"The operation was canceled.",null,bK);},_3);_3.New$1=bD.Ctor(function(bK,bL,bM){this.message=bK;this.inner=bL;a.Object.setPrototypeOf(this,_3.prototype);this.ct=bM;},_3);_4=b.ArgumentException=bD.Class({},e,_4);_4.New=bD.Ctor(function(bK,bL){_4.New$2.call(this,bL+"\nParameter name: "+bK);},_4);_4.New$1=bD.Ctor(function(){_4.New$2.call(this,"Value does not fall within the expected range.");},_4);_4.New$2=bD.Ctor(function(bK){this.message=bK;a.Object.setPrototypeOf(this,_4.prototype);},_4);_5=b.ArgumentOutOfRangeException=bD.Class({},e,_5);_5.New=bD.Ctor(function(bK,bL){this.message=bL+"\nParameter name: "+bK;a.Object.setPrototypeOf(this,_5.prototype);},_5);_5.New$1=bD.Ctor(function(bK){_5.New.call(this,bK,"Specified argument was out of the range of valid values.");},_5);_5.New$2=bD.Ctor(function(){this.message="Specified argument was out of the range of valid values.";a.Object.setPrototypeOf(this,_5.prototype);},_5);_6=b.ArgumentNullException=bD.Class({},e,_6);_6.New=bD.Ctor(function(bK,bL){this.message=bL+"\nParameter name: "+bK;a.Object.setPrototypeOf(this,_6.prototype);},_6);_6.New$1=bD.Ctor(function(bK){_6.New.call(this,bK,"Value cannot be null.");},_6);_6.New$2=bD.Ctor(function(){this.message="Value cannot be null.";a.Object.setPrototypeOf(this,_6.prototype);},_6);_7=b.InvalidOperationException=bD.Class({},e,_7);_7.New=bD.Ctor(function(bK){_7.New$2.call(this,bK,null);},_7);_7.New$1=bD.Ctor(function(){_7.New.call(this,"Operation is not valid due to the current state of the object.");},_7);_7.New$2=bD.Ctor(function(bK,bL){this.message=bK;this.inner=bL;a.Object.setPrototypeOf(this,_7.prototype);},_7);_8=b.AggregateException=bD.Class({},e,_8);_8.New=bD.Ctor(function(bK,bL){_8.New$4.call(this,bK,[bL]);},_8);_8.New$1=bD.Ctor(function(bK,bL){_8.New$4.call(this,bK,M.ofSeq(bL));},_8);_8.New$2=bD.Ctor(function(bK){_8.New$4.call(this,"One or more errors occurred.",M.ofSeq(bK));},_8);_8.New$3=bD.Ctor(function(bK){_8.New$4.call(this,"One or more errors occurred.",bK);},_8);_8.New$4=bD.Ctor(function(bK,bL){this.message=bK;a.Object.setPrototypeOf(this,_8.prototype);this.innerExceptions=bL;},_8);_9=b.TimeoutException=bD.Class({},e,_9);_9.New=bD.Ctor(function(){_9.New$1.call(this,"The operation has timed out.");},_9);_9.New$1=bD.Ctor(function(bK){this.message=bK;a.Object.setPrototypeOf(this,_9.prototype);},_9);_=b.FormatException=bD.Class({},e,_);_.New=bD.Ctor(function(){_.New$1.call(this,"One of the identified items was in an invalid format.");},_);_.New$1=bD.Ctor(function(bK){this.message=bK;a.Object.setPrototypeOf(this,_.prototype);},_);$=b.OverflowException=bD.Class({},e,$);$.New=bD.Ctor(function(){$.New$1.call(this,"Arithmetic operation resulted in an overflow.");},$);$.New$1=bD.Ctor(function(bK){this.message=bK;a.Object.setPrototypeOf(this,$.prototype);},$);ba=b.TaskCanceledException=bD.Class({},e,ba);ba.New=bD.Ctor(function(){ba.New$1.call(this,"A task was canceled.");},ba);ba.New$1=bD.Ctor(function(bK){this.message=bK;a.Object.setPrototypeOf(this,ba.prototype);},ba);M.create2D=function(bK){var bL;bL=M.ofSeq(N.map(M.ofSeq,bK));bL.dims=2;return bL;};bc.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bK){var bL,bM;bL=bJ.random()*16|0;bM=bK=="x"?bL:bL&3|8;return bM.toString(16);});};bc.TryParseExact=function(bK,bL,bM){try{bM.set(bc.ParseExact(bK,bL));return true;}catch(bN){return false;}};bc.TryParse=function(bK,bL){try{bL.set(bc.Parse(bK));return true;}catch(bM){return false;}};bc.ParseExact=function(bK,bL){var bM,bN,bO,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ;function bP(b0){var b1,b2,b3,b4;for(b1=0,b2=35;b1<=b2;b1++){b1===8||(b1===13||(b1===18||b1===23))?b0[b1]!=="-"?bc.ShapeError():void 0:(b4=b0[b1],!("0"<=b4&&b4<="9"||"a"<=b4&&b4<="f")?bc.ShapeError():void 0);}return b0;}bQ=bL.toUpperCase();if(bQ==="N"){bR=br.Trim(bK).toLowerCase();if(bR.length!==32)bc.ShapeError();for(bS=0,bT=31;bS<=bT;bS++){bU=bR[bS];!("0"<=bU&&bU<="9"||"a"<=bU&&bU<="f")?bc.ShapeError():void 0;}return br.Substring(bR,0,8)+"-"+br.Substring(bR,8,4)+"-"+br.Substring(bR,12,4)+"-"+br.Substring(bR,16,4)+"-"+bR.substring(20);}else if(bQ==="D"){bM=br.Trim(bK).toLowerCase();bM.length!==36?bc.ShapeError():void 0;return bP(bM);}else if(bQ==="B"){bN=br.Trim(bK).toLowerCase();bN.length!==38||bN[0]!=="{"||bN[17]!=="}"?bc.ShapeError():void 0;return bP(br.Substring(bN,1,36));}else if(bQ==="P"){bO=br.Trim(bK).toLowerCase();bO.length!==38||bO[0]!=="("||bO[17]!==")"?bc.ShapeError():void 0;return bP(br.Substring(bO,1,36));}else if(bQ==="X"){bV=br.Trim(bK).toLowerCase();if(bV.length!==68)bc.ShapeError();for(bW=0,bX=67;bW<=bX;bW++){switch(bW){case 26:case 0:if(bV[bW]!=="{")bc.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(bV[bW]!=="0")bc.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(bV[bW]!=="x")bc.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(bV[bW]!==",")bc.ShapeError();break;case 67:case 66:if(bV[bW]!=="{")bc.ShapeError();break;default:bZ=bV[bW];!("0"<=bZ&&bZ<="9"||"a"<=bZ&&bZ<="f")?bc.ShapeError():void 0;break;}}return br.Substring(bV,3,8)+"-"+br.Substring(bV,14,4)+"-"+br.Substring(bV,21,4)+"-"+br.Substring(bV,29,2)+br.Substring(bV,34,2)+"-"+br.Substring(bV,39,2)+br.Substring(bV,44,2)+br.Substring(bV,49,2)+br.Substring(bV,54,2)+br.Substring(bV,59,2)+br.Substring(bV,64,2);}else return bc.FormatError();};bc.Parse=function(bK){var bL,bM,bN;try{return bc.ParseExact(bK,"D");}catch(bO){try{bL=bc.ParseExact(bK,"B");}catch(bP){try{bM=bc.ParseExact(bK,"P");}catch(bQ){try{bN=bc.ParseExact(bK,"N");}catch(bR){bN=bc.ParseExact(bK,"X");}bM=bN;}bL=bM;}return bL;}};bc.ToString=function(bK,bL){var bM;bM=bL.toUpperCase();return bM==="N"?br.Replace(bK,"-",""):bM==="D"?bK:bM==="B"?"{"+bK+"}":bM==="P"?"("+bK+")":bM==="X"?"{0x"+br.Substring(bK,0,8)+",0x"+br.Substring(bK,9,4)+",0x"+br.Substring(bK,14,4)+",{0x"+br.Substring(bK,19,2)+",0x"+br.Substring(bK,21,2)+",0x"+br.Substring(bK,24,2)+",0x"+br.Substring(bK,26,2)+",0x"+br.Substring(bK,28,2)+",0x"+br.Substring(bK,30,2)+",0x"+br.Substring(bK,32,2)+",0x"+br.Substring(bK,34,2)+"}}":bc.FormatError();};bc.ParseError=function(){throw new _.New$1("Unrecognized Guid format.");};bc.ShapeError=function(){throw new _.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};bc.HexaError=function(){throw new _.New$1("Hexadecimal Guid printing not implemented by WebSharper.");};bc.FormatError=function(){throw new _.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bd.concat=function(bK){var bL,bM;bL=[];for(var bN in bK)bL.push.apply(bL,bK[bN]);return bL;};be=t.HashSet=bD.Class({add:function(bK){var bL,bM;bL=this.hash(bK);bM=this.data[bL];return bM==null?(this.data[bL]=[bK],this.count=this.count+1,true):this.arrContains(bK,bM)?false:(bM.push(bK),this.count=this.count+1,true);},arrRemove:function(bK,bL){var bM,bN,bO,bP;bM=true;bN=0;bP=bL.length;while(bM&&bN<bP)if(this.equals.apply(null,[bL[bN],bK])){bL.splice.apply(bL,[bN,1]);bM=false;}else bN=bN+1;return!bM;},arrContains:function(bK,bL){var bM,bN,bO,bP;bM=true;bN=0;bP=bL.length;while(bM&&bN<bP)if(this.equals.apply(null,[bL[bN],bK]))bM=false;else bN=bN+1;return!bM;},UnionWith:function(bK){var bL;bL=J.Get(bK);try{while(bL.MoveNext())this.Add(bL.Current());}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}},SymmetricExceptWith:function(bK){var bL,bM;bL=J.Get(bK);try{while(bL.MoveNext()){bM=bL.Current();this.Contains(bM)?this.Remove(bM):this.Add(bM);}}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}},SetEquals:function(bK){var bL;bL=new be.New$4(bK,this.equals,this.hash);return this.get_Count()===bL.get_Count()&&this.IsSupersetOf(bL);},RemoveWhere:function(bK){var bL,bM,bN,bO,bP;bM=bd.concat(this.data);bL=0;for(bN=0,bO=bM.length-1;bN<=bO;bN++){bP=bM[bN];bK(bP)?this.Remove(bP)?bL=bL+1:void 0:void 0;}return bL;},Remove:function(bK){var bL;bL=this.data[this.hash(bK)];return bL==null?false:this.arrRemove(bK,bL)&&(this.count=this.count-1,true);},Overlaps:function(bK){var bL;bL=this;return N.exists(function(bM){return bL.Contains(bM);},bK);},IsSupersetOf:function(bK){var bL;bL=this;return N.forall(function(bM){return bL.Contains(bM);},bK);},IsSubsetOf:function(bK){var bL;bL=new be.New$4(bK,this.equals,this.hash);return M.forall(function(bM){return bL.Contains(bM);},bd.concat(this.data));},IsProperSupersetOf:function(bK){var bL;bL=M.ofSeq(bK);return this.count>M.length(bL)&&this.IsSupersetOf(bL);},IsProperSubsetOf:function(bK){var bL;bL=M.ofSeq(bK);return this.count<M.length(bL)&&this.IsSubsetOf(bL);},IntersectWith:function(bK){var bL,bM,bN,bO,bP;bL=new be.New$4(bK,this.equals,this.hash);bM=bd.concat(this.data);for(bN=0,bO=bM.length-1;bN<=bO;bN++){bP=bM[bN];!bL.Contains(bP)?this.Remove(bP):void 0;}},ExceptWith:function(bK){var bL;bL=J.Get(bK);try{while(bL.MoveNext())this.Remove(bL.Current());}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bK){var bL,bM,bN,bO;bL=0;bM=bd.concat(this.data);for(bN=0,bO=bM.length-1;bN<=bO;bN++)M.set(bK,bN,bM[bN]);},Contains:function(bK){var bL;bL=this.data[this.hash(bK)];return bL==null?false:this.arrContains(bK,bL);},Clear:function(){this.data=[];this.count=0;},Add:function(bK){return this.add(bK);},GetEnumerator:function(){return J.Get(bd.concat(this.data));},GetEnumerator0:function(){return J.Get(bd.concat(this.data));}},j,be);be.New=bD.Ctor(function(bK,bL){be.New$4.call(this,bK,W.equals(bL),function(bM){return W.getHashCode(bL,bM);});},be);be.New$1=bD.Ctor(function(bK){be.New$4.call(this,[],W.equals(bK),function(bL){return W.getHashCode(bK,bL);});},be);be.New$2=bD.Ctor(function(bK){be.New$4.call(this,bK,bv.Equals,bv.Hash);},be);be.New$3=bD.Ctor(function(){be.New$4.call(this,[],bv.Equals,bv.Hash);},be);be.New$4=bD.Ctor(function(bK,bL,bM){var bN;j.New.call(this);this.equals=bL;this.hash=bM;this.data=[];this.count=0;bN=J.Get(bK);try{while(bN.MoveNext())this.add(bN.Current());}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}},be);bg.New=function(bK,bL,bM){return{c:bK,v:bL,f:bM};};bh.Force=function(bK){return bK.f();};bh.CreateFromValue=function(bK){return bg.New(true,bK,bh.cachedLazy);};bh.Create=function(bK){return bg.New(false,bK,bh.forceLazy);};bh.forceLazy=function(){var bK;bK=this.v();this.c=true;this.v=bK;this.f=bh.cachedLazy;return bK;};bh.cachedLazy=function(){return this.v;};bi=O.T=bD.Class({GetSlice:function(bK,bL){var bM;return bK!=null&&bK.$==1?bL!=null&&bL.$==1?(bM=bK.$0,O.ofSeq(N.take(bL.$0-bM+1,O.skip(bM,this)))):O.skip(bK.$0,this):bL!=null&&bL.$==1?O.ofSeq(N.take(bL.$0+1,this)):this;},get_Item:function(bK){return N.nth(bK,this);},get_Length:function(){return O.length(this);},GetEnumerator:function(){return new K.New(this,null,function(bK){var bL;bL=bK.s;return bL.$==0?false:(bK.c=bL.$0,bK.s=bL.$1,true);},void 0);},GetEnumerator0:function(){return J.Get(this);}},null,bi);bi.Empty=new bi({$:0});O.allPairs=function(bK,bL){return O.ofArray(M.allPairs(M.ofList(bK),M.ofList(bL)));};O.append=function(bK,bL){var bM,bN,bO,bP,bQ;if(bK.$==0)return bL;else if(bL.$==0)return bK;else{bP=new bi({$:1});bM=bP;bN=bK;bO=true;while(bO){bM.$0=bN.$0;bN=bN.$1;bN.$==0?bO=false:bM=(bQ=new bi({$:1}),bM.$1=bQ,bQ);}bM.$1=bL;return bP;}};O.choose=function(bK,bL){return O.ofSeq(N.choose(bK,bL));};O.collect=function(bK,bL){return O.ofSeq(N.collect(bK,bL));};O.concat=function(bK){return O.ofSeq(N.concat(bK));};O.exists=function(bK,bL){var bM,bN;bM=false;bN=bL;while(!bM&&bN.$==1){bM=bK(bN.$0);bN=bN.$1;}return bM;};O.exists2=function(bK,bL,bM){var bN,bO,bP;bN=false;bO=bL;bP=bM;while(!bN&&bO.$==1&&bP.$==1){bN=bK(bO.$0,bP.$0);bO=bO.$1;bP=bP.$1;}!bN&&(bO.$==1||bP.$==1)?O.badLengths():void 0;return bN;};O.filter=function(bK,bL){return O.ofSeq(N.filter(bK,bL));};O.fold2=function(bK,bL,bM,bN){return M.fold2(bK,bL,M.ofList(bM),M.ofList(bN));};O.foldBack=function(bK,bL,bM){return M.foldBack(bK,M.ofList(bL),bM);};O.foldBack2=function(bK,bL,bM,bN){return M.foldBack2(bK,M.ofList(bL),M.ofList(bM),bN);};O.forAll=function(bK,bL){var bM,bN;bM=true;bN=bL;while(bM&&bN.$==1){bM=bK(bN.$0);bN=bN.$1;}return bM;};O.forall2=function(bK,bL,bM){var bN,bO,bP;bN=true;bO=bL;bP=bM;while(bN&&bO.$==1&&bP.$==1){bN=bK(bO.$0,bP.$0);bO=bO.$1;bP=bP.$1;}bN&&(bO.$==1||bP.$==1)?O.badLengths():void 0;return bN;};O.head=function(bK){return bK.$==1?bK.$0:O.listEmpty();};O.init=function(bK,bL){return O.ofArray(M.init(bK,bL));};O.iter=function(bK,bL){var bM;bM=bL;while(bM.$==1){bK(O.head(bM));bM=O.tail(bM);}};O.iter2=function(bK,bL,bM){var bN,bO;bN=bL;bO=bM;while(bN.$==1){bO.$==0?O.badLengths():void 0;bK(O.head(bN),O.head(bO));bN=O.tail(bN);bO=O.tail(bO);}bO.$==1?O.badLengths():void 0;};O.iteri=function(bK,bL){var bM,bN;bM=bL;bN=0;while(bM.$==1){bK(bN,O.head(bM));bM=O.tail(bM);bN=bN+1;}};O.iteri2=function(bK,bL,bM){var bN,bO,bP;bN=bL;bO=bM;bP=0;while(bN.$==1){bO.$==0?O.badLengths():void 0;bK(bP,O.head(bN),O.head(bO));bN=O.tail(bN);bO=O.tail(bO);bP=bP+1;}bO.$==1?O.badLengths():void 0;};O.length=function(bK){var bL,bM;bL=bK;bM=0;while(bL.$==1){bL=O.tail(bL);bM=bM+1;}return bM;};O.map=function(bK,bL){var bM,bN,bO,bP,bQ;if(bL.$==0)return bL;else{bP=new bi({$:1});bM=bP;bN=bL;bO=true;while(bO){bM.$0=bK(bN.$0);bN=bN.$1;bN.$==0?bO=false:bM=(bQ=new bi({$:1}),bM.$1=bQ,bQ);}bM.$1=bi.Empty;return bP;}};O.map2=function(bK,bL,bM){var bN,bO,bP,bQ,bR,bS;bN=bL.$==1&&bM.$==1;if(!bN)return bL.$==1||bM.$==1?O.badLengths():bL;else{bR=new bi({$:1});bO=bR;bP=bL;bQ=bM;while(bN){bO.$0=bK(bP.$0,bQ.$0);bP=bP.$1;bQ=bQ.$1;bP.$==1&&bQ.$==1?bO=(bS=new bi({$:1}),bO.$1=bS,bS):bN=false;}if(bP.$==1||bQ.$==1)O.badLengths();bO.$1=bi.Empty;return bR;}};O.map3=function(bK,bL,bM,bN){var bO,bP,bQ,bR,bS,bT,bU;bO=bL.$==1&&bM.$==1&&bN.$==1;if(!bO)return bL.$==1||bM.$==1||bN.$==1?O.badLengths():bL;else{bT=new bi({$:1});bP=bT;bQ=bL;bR=bM;bS=bN;while(bO){bP.$0=bK(bQ.$0,bR.$0,bS.$0);bQ=bQ.$1;bR=bR.$1;bS=bS.$1;bQ.$==1&&bR.$==1&&bS.$==1?bP=(bU=new bi({$:1}),bP.$1=bU,bU):bO=false;}if(bQ.$==1||bR.$==1||bS.$==1)O.badLengths();bP.$1=bi.Empty;return bT;}};O.mapi=function(bK,bL){var bM,bN,bO,bP,bQ,bR;if(bL.$==0)return bL;else{bQ=new bi({$:1});bM=bQ;bN=bL;bO=0;bP=true;while(bP){bM.$0=bK(bO,bN.$0);bN=bN.$1;bN.$==0?bP=false:(bM=(bR=new bi({$:1}),bM.$1=bR,bR),bO=bO+1);}bM.$1=bi.Empty;return bQ;}};O.mapi2=function(bK,bL,bM){var bN,bO,bP,bQ,bR,bS,bT;bN=bL.$==1&&bM.$==1;if(!bN)return bL.$==1||bM.$==1?O.badLengths():bL;else{bS=new bi({$:1});bO=bS;bP=bL;bQ=bM;bR=0;while(bN){bO.$0=bK(bR,bP.$0,bQ.$0);bP=bP.$1;bQ=bQ.$1;bP.$==1&&bQ.$==1?(bO=(bT=new bi({$:1}),bO.$1=bT,bT),bR=bR+1):bN=false;}if(bP.$==1||bQ.$==1)O.badLengths();bO.$1=bi.Empty;return bS;}};O.max=function(bK){var bL,bM,bN;O.nonEmpty(bK);bL=bK.$0;bM=bK.$1;while(bM.$==1){bN=bM.$0;bv.Compare(bN,bL)===1?bL=bN:void 0;bM=bM.$1;}return bL;};O.maxBy=function(bK,bL){var bM,bN,bO,bP,bQ;O.nonEmpty(bL);bM=bL.$0;bN=bK(bM);bO=bL.$1;while(bO.$==1){bP=bO.$0;bQ=bK(bP);bv.Compare(bQ,bN)===1?(bM=bP,bN=bQ):void 0;bO=bO.$1;}return bM;};O.min=function(bK){var bL,bM,bN;O.nonEmpty(bK);bL=bK.$0;bM=bK.$1;while(bM.$==1){bN=bM.$0;bv.Compare(bN,bL)===-1?bL=bN:void 0;bM=bM.$1;}return bL;};O.minBy=function(bK,bL){var bM,bN,bO,bP,bQ;O.nonEmpty(bL);bM=bL.$0;bN=bK(bM);bO=bL.$1;while(bO.$==1){bP=bO.$0;bQ=bK(bP);bv.Compare(bQ,bN)===-1?(bM=bP,bN=bQ):void 0;bO=bO.$1;}return bM;};O.ofArray=function(bK){var bL,bM,bN;bL=bi.Empty;for(bM=M.length(bK)-1,bN=0;bM>=bN;bM--)bL=new bi({$:1,$0:M.get(bK,bM),$1:bL});return bL;};O.ofSeq=function(bK){var bL,bM,bN,bO,bP,bQ;if(bK instanceof bi)return bK;else if(bK instanceof a.Array)return O.ofArray(bK);else{bL=J.Get(bK);try{bN=bL.MoveNext();if(!bN)bM=bi.Empty;else{bP=new bi({$:1});bO=bP;while(bN){bO.$0=bL.Current();bL.MoveNext()?bO=(bQ=new bi({$:1}),bO.$1=bQ,bQ):bN=false;}bO.$1=bi.Empty;bM=bP;}return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}}};O.partition=function(bK,bL){var bM;bM=M.partition(bK,M.ofList(bL));return[O.ofArray(bM[0]),O.ofArray(bM[1])];};O.permute=function(bK,bL){return O.ofArray(M.permute(bK,M.ofList(bL)));};O.reduce=function(bK,bL){var bM,bN;O.nonEmpty(bL);bM=bL.$0;bN=bL.$1;while(bN.$==1){bM=bK(bM,bN.$0);bN=bN.$1;}return bM;};O.reduceBack=function(bK,bL){return M.reduceBack(bK,M.ofList(bL));};O.replicate=function(bK,bL){return O.ofArray(M.create(bK,bL));};O.rev=function(bK){var bL,bM;bL=bi.Empty;bM=bK;while(bM.$==1){bL=new bi({$:1,$0:bM.$0,$1:bL});bM=bM.$1;}return bL;};O.scan=function(bK,bL,bM){return O.ofSeq(N.scan(bK,bL,bM));};O.scanBack=function(bK,bL,bM){return O.ofArray(M.scanBack(bK,M.ofList(bL),bM));};O.sort=function(bK){var bL;bL=M.ofList(bK);M.sortInPlace(bL);return O.ofArray(bL);};O.sortBy=function(bK,bL){var bM;bM=M.ofList(bL);M.sortInPlaceBy(bK,bM);return O.ofArray(bM);};O.sortByDescending=function(bK,bL){var bM;bM=M.ofList(bL);M.sortInPlaceByDescending(bK,bM);return O.ofArray(bM);};O.sortDescending=function(bK){var bL;bL=M.ofList(bK);M.sortInPlaceByDescending(a.id,bL);return O.ofArray(bL);};O.sortWith=function(bK,bL){var bM;bM=M.ofList(bL);M.sortInPlaceWith(bK,bM);return O.ofArray(bM);};O.tail=function(bK){return bK.$==1?bK.$1:O.listEmpty();};O.transpose=function(bK){return O.ofSeq(N.map(O.ofArray,M.transposeArray(M.ofSeq(N.map(M.ofList,bK)))));};O.unzip=function(bK){var bL,bM,bN,bO;bL=[];bM=[];bN=J.Get(bK);try{while(bN.MoveNext()){bO=bN.Current();bL.push(bO[0]);bM.push(bO[1]);}}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}return[O.ofArray(bL.slice(0)),O.ofArray(bM.slice(0))];};O.unzip3=function(bK){var bL,bM,bN,bO,bP;bL=[];bM=[];bN=[];bO=J.Get(bK);try{while(bO.MoveNext()){bP=bO.Current();bL.push(bP[0]);bM.push(bP[1]);bN.push(bP[2]);}}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}return[O.ofArray(bL.slice(0)),O.ofArray(bM.slice(0)),O.ofArray(bN.slice(0))];};O.zip=function(bK,bL){return O.map2(function(bM,bN){return[bM,bN];},bK,bL);};O.zip3=function(bK,bL,bM){return O.map3(function(bN,bO,bP){return[bN,bO,bP];},bK,bL,bM);};O.chunkBySize=function(bK,bL){return O.map(O.ofArray,O.ofSeq(N.chunkBySize(bK,bL)));};O.compareWith=function(bK,bL,bM){return N.compareWith(bK,bL,bM);};O.countBy=function(bK,bL){return O.ofArray(M.countBy(bK,M.ofList(bL)));};O.distinct=function(bK){return O.ofSeq(N.distinct(bK));};O.distinctBy=function(bK,bL){return O.ofSeq(N.distinctBy(bK,bL));};O.splitInto=function(bK,bL){return O.map(O.ofArray,O.ofArray(M.splitInto(bK,M.ofList(bL))));};O.except=function(bK,bL){return O.ofSeq(N.except(bK,bL));};O.tryFindBack=function(bK,bL){return M.tryFindBack(bK,M.ofList(bL));};O.findBack=function(bK,bL){var bM;bM=O.tryFindBack(bK,bL);return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};O.findIndexBack=function(bK,bL){var bM;bM=M.tryFindIndexBack(bK,M.ofList(bL));return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};O.groupBy=function(bK,bL){var bM;function bN(bO,bP){return[bO,O.ofArray(bP)];}bM=M.groupBy(bK,M.ofList(bL));M.mapInPlace(function(bO){return bN(bO[0],bO[1]);},bM);return O.ofArray(bM);};O.last=function(bK){var bL,bM;O.nonEmpty(bK);bL=bK;bM=bL.$1;while(bM.$==1){bL=bM;bM=bL.$1;}return bL.$0;};O.contains=function(bK,bL){var bM,bN;bM=false;bN=bL;while(!bM&&bN.$==1){bM=bv.Equals(bK,bN.$0);bN=bN.$1;}return bM;};O.mapFold=function(bK,bL,bM){var bN;bN=M.mapFold(bK,bL,M.ofList(bM));return[O.ofArray(bN[0]),bN[1]];};O.mapFoldBack=function(bK,bL,bM){var bN;bN=M.mapFoldBack(bK,M.ofList(bL),bM);return[O.ofArray(bN[0]),bN[1]];};O.pairwise=function(bK){return O.ofSeq(N.pairwise(bK));};O.indexed=function(bK){return O.mapi(function(bL,bM){return[bL,bM];},bK);};O.tryHead=function(bK){return bK.$==0?null:{$:1,$0:bK.$0};};O.exactlyOne=function(bK){var bL;return bK.$==1&&(bK.$1.$==0&&(bL=bK.$0,true))?bL:B.FailWith("The input does not have precisely one element.");};O.tryExactlyOne=function(bK){var bL;return bK.$==1&&(bK.$1.$==0&&(bL=bK.$0,true))?{$:1,$0:bL}:null;};O.unfold=function(bK,bL){return O.ofSeq(N.unfold(bK,bL));};O.windowed=function(bK,bL){return O.ofSeq(N.map(O.ofArray,N.windowed(bK,bL)));};O.splitAt=function(bK,bL){return[O.ofSeq(N.take(bK,bL)),O.skip(bK,bL)];};O.nonEmpty=function(bK){if(bK.$==0)O.listEmpty();};O.listEmpty=function(){return B.FailWith("The input list was empty.");};O.badLengths=function(){return B.FailWith("The lists have different lengths.");};C.getOrValue=function(bK,bL){return bK===null?bL:bK;};C.get=function(bK){return bK===null?B.FailWith("Nullable object must have a value."):bK;};B.range=function(bK,bL){var bM;bM=1+bL-bK;return bM<=0?[]:N.init(bM,function(bN){return bN+bK;});};B.step=function(bK,bL,bM){var bN;bN=B.Sign(bL);return N.takeWhile(function(bO){return bN*(bM-bO)>=0;},N.initInfinite(function(bO){return bK+bO*bL;}));};B.KeyValue=function(bK){return[bK.K,bK.V];};B.Truncate=function(bK){return bK<0?bJ.ceil(bK):bJ.floor(bK);};B.Sign=function(bK){return bK===0?0:bK<0?-1:1;};B.Pown=function(bK,bL){function bM(bN){var bO;return bN===1?bK:bN%2===0?(bO=bM(bN/2>>0),bO*bO):bK*bM(bN-1);}return bM(bL);};B.toInt=function(bK){var bL;bL=B.toUInt(bK);return bL>=2147483648?bL-4294967296:bL;};B.toUInt=function(bK){return(bK<0?bJ.ceil(bK):bJ.floor(bK))>>>0;};B.InvalidArg=function(bK,bL){throw new _4.New(bK,bL);};B.InvalidOp=function(bK){throw new _7.New(bK);};B.FailWith=function(bK){throw new e(bK);};bj.string=function(bK,bL,bM){return bL==null?bM!=null&&bM.$==1?bK.slice(0,bM.$0+1):"":bM==null?bK.slice(bL.$0):bK.slice(bL.$0,bM.$0+1);};bj.array=function(bK,bL,bM){return bL==null?bM!=null&&bM.$==1?bK.slice(0,bM.$0+1):[]:bM==null?bK.slice(bL.$0):bK.slice(bL.$0,bM.$0+1);};bj.setArray=function(bK,bL,bM,bN){var bO;bO=bL!=null&&bL.$==1?bL.$0:0;M.setSub(bK,bO,(bM!=null&&bM.$==1?bM.$0:bK.length-1)-bO+1,bN);};bj.array2D=function(bK,bL,bM,bN,bO){var bP,bQ;bP=bL!=null&&bL.$==1?bL.$0:0;bQ=bN!=null&&bN.$==1?bN.$0:0;return M.sub2D(bK,bP,bQ,(bM!=null&&bM.$==1?bM.$0:bK.length-1)-bP+1,(bO!=null&&bO.$==1?bO.$0:(bK.length?bK[0].length:0)-1)-bQ+1);};bj.array2Dfix1=function(bK,bL,bM,bN){var bO,bP,bQ,bR,bS,bT;bO=bM!=null&&bM.$==1?bM.$0:0;bP=bN!=null&&bN.$==1?bN.$0:(bK.length?bK[0].length:0)-1;bQ=bP-bO+1;bR=new a.Array(bQ);for(bS=0,bT=bQ-1;bS<=bT;bS++)M.set(bR,bS,M.get2D(bK,bL,bO+bS));return bR;};bj.array2Dfix2=function(bK,bL,bM,bN){var bO,bP,bQ,bR,bS,bT;bO=bL!=null&&bL.$==1?bL.$0:0;bP=bM!=null&&bM.$==1?bM.$0:bK.length-1;bQ=bP-bO+1;bR=new a.Array(bQ);for(bS=0,bT=bQ-1;bS<=bT;bS++)M.set(bR,bS,M.get2D(bK,bO+bS,bN));return bR;};bj.setArray2Dfix1=function(bK,bL,bM,bN,bO){var bP,bQ,bR,bS;bP=bM!=null&&bM.$==1?bM.$0:0;bQ=bN!=null&&bN.$==1?bN.$0:(bK.length?bK[0].length:0)-1;for(bR=0,bS=bQ-bP+1-1;bR<=bS;bR++)M.set2D(bK,bL,bP+bR,M.get(bO,bR));};bj.setArray2Dfix2=function(bK,bL,bM,bN,bO){var bP,bQ,bR,bS;bP=bL!=null&&bL.$==1?bL.$0:0;bQ=bM!=null&&bM.$==1?bM.$0:bK.length-1;for(bR=0,bS=bQ-bP+1-1;bR<=bS;bR++)M.set2D(bK,bP+bR,bN,M.get(bO,bR));};bj.setArray2D=function(bK,bL,bM,bN,bO,bP){var bQ,bR;bQ=bL!=null&&bL.$==1?bL.$0:0;bR=bN!=null&&bN.$==1?bN.$0:0;M.setSub2D(bK,bQ,bR,(bM!=null&&bM.$==1?bM.$0:bK.length-1)-bQ+1,(bO!=null&&bO.$==1?bO.$0:(bK.length?bK[0].length:0)-1)-bR+1,bP);};bk.filter=function(bK,bL){var bM;return bL!=null&&bL.$==1&&(bK(bL.$0)&&(bM=bL.$0,true))?bL:null;};bk.fold=function(bK,bL,bM){return bM==null?bL:bK(bL,bM.$0);};bk.foldBack=function(bK,bL,bM){return bL==null?bM:bK(bL.$0,bM);};bk.ofNullable=function(bK){return bK==null?null:{$:1,$0:C.get(bK)};};bk.ofObj=function(bK){return bK==null?null:{$:1,$0:bK};};bk.toArray=function(bK){return bK==null?[]:[bK.$0];};bk.toList=function(bK){return bK==null?bi.Empty:O.ofArray([bK.$0]);};bk.toNullable=function(bK){return bK!=null&&bK.$==1?bK.$0:null;};bk.toObj=function(bK){return bK==null?null:bK.$0;};bl.CopyTo=function(bK,bL,bM){M.blit(bK,0,bL,bM,M.length(bK));};bl.Contains=function(bK,bL){return N.exists(function(bM){return bv.Equals(bL,bM);},bK);};bl.Clear=function(bK){bK.splice(0,M.length(bK));};bm=b.Random=bD.Class({NextBytes:function(bK){var bL,bM;for(bL=0,bM=M.length(bK)-1;bL<=bM;bL++)M.set(bK,bL,bJ.floor(bJ.random()*256));},Next:function(bK,bL){return bK>bL?B.FailWith("'minValue' cannot be greater than maxValue."):bK+bJ.floor(bJ.random()*(bL-bK));},Next$1:function(bK){return bK<0?B.FailWith("'maxValue' must be greater than zero."):bJ.floor(bJ.random()*bK);},Next$2:function(){return bJ.floor(bJ.random()*2147483648);}},j,bm);bm.New=bD.Ctor(function(){j.New.call(this);},bm);bn.New=function(bK){return[bK];};bo.MapError=function(bK,bL){return bL.$==1?{$:1,$0:bK(bL.$0)}:{$:0,$0:bL.$0};};bo.Map=function(bK,bL){return bL.$==1?{$:1,$0:bL.$0}:{$:0,$0:bK(bL.$0)};};bo.Bind=function(bK,bL){return bL.$==1?{$:1,$0:bL.$0}:bK(bL.$0);};N.enumFinally=function(bK,bL){return{GetEnumerator:function(){var bM;try{bM=J.Get(bK);}catch(bN){bL();throw bN;}return new K.New(null,null,function(bO){return bM.MoveNext()&&(bO.c=bM.Current(),true);},function(){bM.Dispose();bL();});}};};N.enumUsing=function(bK,bL){return{GetEnumerator:function(){var bM,bN;try{bM=J.Get(bL(bK));}catch(bO){bN=bK;bN.Dispose();throw bO;}return new K.New(null,null,function(bP){return bM.MoveNext()&&(bP.c=bM.Current(),true);},function(){var bP;bM.Dispose();bP=bK;bP.Dispose();});}};};N.enumWhile=function(bK,bL){return{GetEnumerator:function(){return new K.New(null,null,function(bM){var bN;while(true){bN=bM.s;if(bv.Equals(bN,null)){if(bK()){bM.s=J.Get(bL);bM=bM;}else return false;}else if(bN.MoveNext()){bM.c=bN.Current();return true;}else{bN.Dispose();bM.s=null;bM=bM;}}},function(bM){var bN;bN=bM.s;!bv.Equals(bN,null)?bN.Dispose():void 0;});}};};bp.createEvent=function(bK,bL,bM){var bN;bN={AddHandler:bK,RemoveHandler:bL,Subscribe:function(bO){var bP;bP=bM(function(){return function(bQ){return bO.OnNext(bQ);};});bK(bP);return{Dispose:function(){return bL(bP);}};}};j.New.call(bN);return bN;};N.allPairs=function(bK,bL){var bM;bM=N.cache(bL);return N.collect(function(bN){return N.map(function(bO){return[bN,bO];},bM);},bK);};N.append=function(bK,bL){return{GetEnumerator:function(){var bM,bN;bM=J.Get(bK);bN=[true];return new K.New(bM,null,function(bO){var bP;return bO.s.MoveNext()?(bO.c=bO.s.Current(),true):(bP=bO.s,!bv.Equals(bP,null)?bP.Dispose():void 0,bO.s=null,bN[0]&&(bN[0]=false,bO.s=J.Get(bL),bO.s.MoveNext()?(bO.c=bO.s.Current(),true):(bO.s.Dispose(),bO.s=null,false)));},function(bO){var bP;bP=bO.s;!bv.Equals(bP,null)?bP.Dispose():void 0;});}};};N.average=function(bK){var bL,bM;bL=N.fold(function(bN,bO){return(function(bP){var bQ,bR;bQ=bP[0];bR=bP[1];return function(bS){return[bQ+1,bR+bS];};}(bN))(bO);},[0,0],bK);bM=bL[0];return bM===0?N.seqEmpty():bL[1]/bM;};N.averageBy=function(bK,bL){var bM,bN;bM=N.fold(function(bO,bP){return(function(bQ){var bR,bS;bR=bQ[0];bS=bQ[1];return function(bT){return[bR+1,bS+bK(bT)];};}(bO))(bP);},[0,0],bL);bN=bM[0];return bN===0?N.seqEmpty():bM[1]/bN;};N.cache=function(bK){var bL,bM;bL=[];bM=[J.Get(bK)];return{GetEnumerator:function(){return new K.New(0,null,function(bN){var bO;return bN.s<bL.length?(bN.c=bL[bN.s],bN.s=bN.s+1,true):(bO=bM[0],bv.Equals(bO,null)?false:bO.MoveNext()?(bN.s=bN.s+1,bN.c=bO.Current(),bL.push(bN.c),true):(bO.Dispose(),bM[0]=null,false));},void 0);}};};N.choose=function(bK,bL){return N.collect(function(bM){var bN;bN=bK(bM);return bN==null?bi.Empty:O.ofArray([bN.$0]);},bL);};N.collect=function(bK,bL){return N.concat(N.map(bK,bL));};N.compareWith=function(bK,bL,bM){var bN,bO,bP,bQ,bR;bN=J.Get(bL);try{bP=J.Get(bM);try{bQ=0;bR=true;while(bR&&bQ===0)if(bN.MoveNext())bQ=bP.MoveNext()?bK(bN.Current(),bP.Current()):1;else if(bP.MoveNext())bQ=-1;else bR=false;bO=bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}return bO;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};N.concat=function(bK){return{GetEnumerator:function(){var bL;bL=J.Get(bK);return new K.New(null,null,function(bM){var bN;while(true){bN=bM.s;if(bv.Equals(bN,null)){if(bL.MoveNext()){bM.s=J.Get(bL.Current());bM=bM;}else{bL.Dispose();return false;}}else if(bN.MoveNext()){bM.c=bN.Current();return true;}else{bM.Dispose();bM.s=null;bM=bM;}}},function(bM){var bN;bN=bM.s;!bv.Equals(bN,null)?bN.Dispose():void 0;!bv.Equals(bL,null)?bL.Dispose():void 0;});}};};N.countBy=function(bK,bL){return N.delay(function(){return M.countBy(bK,M.ofSeq(bL));});};N.delay=function(bK){return{GetEnumerator:function(){return J.Get(bK());}};};N.distinct=function(bK){return N.distinctBy(a.id,bK);};N.distinctBy=function(bK,bL){return{GetEnumerator:function(){var bM,bN;bM=J.Get(bL);bN=new be.New$3();return new K.New(null,null,function(bO){var bP,bQ;if(bM.MoveNext()){bP=bM.Current();bQ=bN.Add(bK(bP));while(!bQ&&bM.MoveNext()){bP=bM.Current();bQ=bN.Add(bK(bP));}return bQ&&(bO.c=bP,true);}else return false;},function(){bM.Dispose();});}};};N.splitInto=function(bK,bL){bK<=0?B.FailWith("Count must be positive"):void 0;return N.delay(function(){return M.splitInto(bK,M.ofSeq(bL));});};N.exactlyOne=function(bK){var bL,bM;bL=J.Get(bK);try{return bL.MoveNext()?(bM=bL.Current(),bL.MoveNext()?B.InvalidOp("Sequence contains more than one element"):bM):B.InvalidOp("Sequence contains no elements");}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.tryExactlyOne=function(bK){var bL,bM;bL=J.Get(bK);try{return bL.MoveNext()?(bM=bL.Current(),bL.MoveNext()?null:{$:1,$0:bM}):null;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.exists=function(bK,bL){var bM,bN;bM=J.Get(bL);try{bN=false;while(!bN&&bM.MoveNext())bN=bK(bM.Current());return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};N.exists2=function(bK,bL,bM){var bN,bO,bP,bQ;bN=J.Get(bL);try{bP=J.Get(bM);try{bQ=false;while(!bQ&&bN.MoveNext()&&bP.MoveNext())bQ=bK(bN.Current(),bP.Current());bO=bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}return bO;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};N.filter=function(bK,bL){return{GetEnumerator:function(){var bM;bM=J.Get(bL);return new K.New(null,null,function(bN){var bO,bP,bQ;bO=bM.MoveNext();bP=bM.Current();bQ=false;while(bO)if(bK(bP)){bN.c=bP;bQ=true;bO=false;}else if(bM.MoveNext())bP=bM.Current();else bO=false;return bQ;},function(){bM.Dispose();});}};};N.find=function(bK,bL){var bM;bM=N.tryFind(bK,bL);return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};N.findIndex=function(bK,bL){var bM;bM=N.tryFindIndex(bK,bL);return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};N.fold=function(bK,bL,bM){var bN,bO;bN=bL;bO=J.Get(bM);try{while(bO.MoveNext())bN=bK(bN,bO.Current());return bN;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.forall=function(bK,bL){return!N.exists(function(bM){return!bK(bM);},bL);};N.forall2=function(bK,bL,bM){return!N.exists2(function(bN,bO){return!bK(bN,bO);},bL,bM);};N.groupBy=function(bK,bL){return N.delay(function(){return M.groupBy(bK,M.ofSeq(bL));});};N.head=function(bK){var bL;bL=J.Get(bK);try{return bL.MoveNext()?bL.Current():N.insufficient();}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.init=function(bK,bL){return N.take(bK,N.initInfinite(bL));};N.initInfinite=function(bK){return{GetEnumerator:function(){return new K.New(0,null,function(bL){bL.c=bK(bL.s);bL.s=bL.s+1;return true;},void 0);}};};N.isEmpty=function(bK){var bL;bL=J.Get(bK);try{return!bL.MoveNext();}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.iter=function(bK,bL){var bM;bM=J.Get(bL);try{while(bM.MoveNext())bK(bM.Current());}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};N.iter2=function(bK,bL,bM){var bN,bO,bP;bN=J.Get(bL);try{bP=J.Get(bM);try{while(bN.MoveNext()&&bP.MoveNext())bK(bN.Current(),bP.Current());bO=void 0;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}bO;}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};N.iteri=function(bK,bL){var bM,bN;bM=0;bN=J.Get(bL);try{while(bN.MoveNext()){bK(bM,bN.Current());bM=bM+1;}}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};N.length=function(bK){var bL,bM;bL=0;bM=J.Get(bK);try{while(bM.MoveNext())bL=bL+1;return bL;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};N.map=function(bK,bL){return{GetEnumerator:function(){var bM;bM=J.Get(bL);return new K.New(null,null,function(bN){return bM.MoveNext()&&(bN.c=bK(bM.Current()),true);},function(){bM.Dispose();});}};};N.mapi=function(bK,bL){return N.map2(bK,N.initInfinite(a.id),bL);};N.map2=function(bK,bL,bM){return{GetEnumerator:function(){var bN,bO;bN=J.Get(bL);bO=J.Get(bM);return new K.New(null,null,function(bP){return bN.MoveNext()&&bO.MoveNext()&&(bP.c=bK(bN.Current(),bO.Current()),true);},function(){bN.Dispose();bO.Dispose();});}};};N.maxBy=function(bK,bL){var bM,bN,bO,bP,bQ;bM=J.Get(bL);try{if(!bM.MoveNext())N.seqEmpty();bN=bM.Current();bO=bK(bN);while(bM.MoveNext()){bP=bM.Current();bQ=bK(bP);bv.Compare(bQ,bO)===1?(bN=bP,bO=bQ):void 0;}return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};N.minBy=function(bK,bL){var bM,bN,bO,bP,bQ;bM=J.Get(bL);try{if(!bM.MoveNext())N.seqEmpty();bN=bM.Current();bO=bK(bN);while(bM.MoveNext()){bP=bM.Current();bQ=bK(bP);bv.Compare(bQ,bO)===-1?(bN=bP,bO=bQ):void 0;}return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};N.max=function(bK){var bL,bM,bN;bL=J.Get(bK);try{if(!bL.MoveNext())N.seqEmpty();bM=bL.Current();while(bL.MoveNext()){bN=bL.Current();bv.Compare(bN,bM)===1?bM=bN:void 0;}return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.min=function(bK){var bL,bM,bN;bL=J.Get(bK);try{if(!bL.MoveNext())N.seqEmpty();bM=bL.Current();while(bL.MoveNext()){bN=bL.Current();bv.Compare(bN,bM)===-1?bM=bN:void 0;}return bM;}finally{if(typeof bL=="object"&&"Dispose"in bL)bL.Dispose();}};N.nth=function(bK,bL){var bM,bN;if(bK<0)B.FailWith("negative index requested");bM=-1;bN=J.Get(bL);try{while(bM<bK){!bN.MoveNext()?N.insufficient():void 0;bM=bM+1;}return bN.Current();}finally{if(typeof bN=="object"&&"Dispose"in bN)bN.Dispose();}};N.pairwise=function(bK){return N.map(function(bL){return[M.get(bL,0),M.get(bL,1)];},N.windowed(2,bK));};N.pick=function(bK,bL){var bM;bM=N.tryPick(bK,bL);return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};N.readOnly=function(bK){return{GetEnumerator:function(){return J.Get(bK);}};};N.reduce=function(bK,bL){var bM,bN;bM=J.Get(bL);try{if(!bM.MoveNext())N.seqEmpty();bN=bM.Current();while(bM.MoveNext())bN=bK(bN,bM.Current());return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};N.scan=function(bK,bL,bM){return{GetEnumerator:function(){var bN;bN=J.Get(bM);return new K.New(false,null,function(bO){return bO.s?bN.MoveNext()&&(bO.c=bK(bO.c,bN.Current()),true):(bO.c=bL,bO.s=true,true);},function(){bN.Dispose();});}};};N.skip=function(bK,bL){return{GetEnumerator:function(){var bM;bM=J.Get(bL);return new K.New(true,null,function(bN){var bO,bP;if(bN.s){for(bO=1,bP=bK;bO<=bP;bO++)if(!bM.MoveNext())N.insufficient();bN.s=false;}else null;return bM.MoveNext()&&(bN.c=bM.Current(),true);},function(){bM.Dispose();});}};};N.skipWhile=function(bK,bL){return{GetEnumerator:function(){var bM;bM=J.Get(bL);return new K.New(true,null,function(bN){var bO,bP;if(bN.s){bO=true;bP=false;while(bO)if(bM.MoveNext()){if(!bK(bM.Current()))bO=false;}else{bO=false;bP=true;}bN.s=false;return bP?false:(bN.c=bM.Current(),true);}else return bM.MoveNext()&&(bN.c=bM.Current(),true);},function(){bM.Dispose();});}};};N.sort=function(bK){return N.sortBy(a.id,bK);};N.sortBy=function(bK,bL){return N.delay(function(){var bM;bM=M.ofSeq(bL);M.sortInPlaceBy(bK,bM);return bM;});};N.sortByDescending=function(bK,bL){return N.delay(function(){var bM;bM=M.ofSeq(bL);M.sortInPlaceByDescending(bK,bM);return bM;});};N.sortDescending=function(bK){return N.sortByDescending(a.id,bK);};N.sum=function(bK){return N.fold(function(bL,bM){return bL+bM;},0,bK);};N.sumBy=function(bK,bL){return N.fold(function(bM,bN){return bM+bK(bN);},0,bL);};N.take=function(bK,bL){bK<0?N.nonNegative():void 0;return{GetEnumerator:function(){var bM;bM=[J.Get(bL)];return new K.New(0,null,function(bN){var bO;bN.s=bN.s+1;return bN.s>bK?false:(bO=bM[0],bv.Equals(bO,null)?N.insufficient():bO.MoveNext()?(bN.c=bO.Current(),bN.s===bK?(bO.Dispose(),bM[0]=null):void 0,true):(bO.Dispose(),bM[0]=null,N.insufficient()));},function(){var bN;bN=bM[0];!bv.Equals(bN,null)?bN.Dispose():void 0;});}};};N.takeWhile=function(bK,bL){return N.delay(function(){return N.enumUsing(J.Get(bL),function(bM){return N.enumWhile(function(){return bM.MoveNext()&&bK(bM.Current());},N.delay(function(){return[bM.Current()];}));});});};N.transpose=function(bK){return N.delay(function(){return M.transposeArray(M.ofSeq(N.map(M.ofSeq,bK)));});};N.truncate=function(bK,bL){return N.delay(function(){return N.enumUsing(J.Get(bL),function(bM){var bN;bN=[0];return N.enumWhile(function(){return bM.MoveNext()&&bN[0]<bK;},N.delay(function(){bN[0]++;return[bM.Current()];}));});});};N.tryFind=function(bK,bL){var bM,bN,bO;bM=J.Get(bL);try{bN=null;while(bN==null&&bM.MoveNext()){bO=bM.Current();bK(bO)?bN={$:1,$0:bO}:void 0;}return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};N.findBack=function(bK,bL){var bM;bM=M.tryFindBack(bK,M.ofSeq(bL));return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};N.tryFindIndex=function(bK,bL){var bM,bN,bO;bM=J.Get(bL);try{bN=true;bO=0;while(bN&&bM.MoveNext())if(bK(bM.Current()))bN=false;else bO=bO+1;return bN?null:{$:1,$0:bO};}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};N.findIndexBack=function(bK,bL){var bM;bM=M.tryFindIndexBack(bK,M.ofSeq(bL));return bM==null?B.FailWith("KeyNotFoundException"):bM.$0;};N.tryPick=function(bK,bL){var bM,bN;bM=J.Get(bL);try{bN=null;while(bv.Equals(bN,null)&&bM.MoveNext())bN=bK(bM.Current());return bN;}finally{if(typeof bM=="object"&&"Dispose"in bM)bM.Dispose();}};N.unfold=function(bK,bL){return{GetEnumerator:function(){return new K.New(bL,null,function(bM){var bN;bN=bK(bM.s);return bN==null?false:(bM.c=bN.$0[0],bM.s=bN.$0[1],true);},void 0);}};};N.windowed=function(bK,bL){bK<=0?B.FailWith("The input must be positive."):void 0;return N.delay(function(){return N.enumUsing(J.Get(bL),function(bM){var bN;bN=[];return N.append(N.enumWhile(function(){return bN.length<bK&&bM.MoveNext();},N.delay(function(){bN.push(bM.Current());return[];})),N.delay(function(){return bN.length===bK?N.append([bN.slice(0)],N.delay(function(){return N.enumWhile(function(){return bM.MoveNext();},N.delay(function(){bN.shift();bN.push(bM.Current());return[bN.slice(0)];}));})):[];}));});});};N.zip=function(bK,bL){return N.map2(function(bM,bN){return[bM,bN];},bK,bL);};N.map3=function(bK,bL,bM,bN){return{GetEnumerator:function(){var bO,bP,bQ;bO=J.Get(bL);bP=J.Get(bM);bQ=J.Get(bN);return new K.New(null,null,function(bR){return bO.MoveNext()&&bP.MoveNext()&&bQ.MoveNext()&&(bR.c=bK(bO.Current(),bP.Current(),bQ.Current()),true);},function(){bO.Dispose();bP.Dispose();bQ.Dispose();});}};};N.zip3=function(bK,bL,bM){return N.map3(function(bN,bO,bP){return[bN,bO,bP];},bK,bL,bM);};N.fold2=function(bK,bL,bM,bN){return M.fold2(bK,bL,M.ofSeq(bM),M.ofSeq(bN));};N.foldBack=function(bK,bL,bM){return M.foldBack(bK,M.ofSeq(bL),bM);};N.foldBack2=function(bK,bL,bM,bN){return M.foldBack2(bK,M.ofSeq(bL),M.ofSeq(bM),bN);};N.iteri2=function(bK,bL,bM){var bN,bO,bP,bQ;bN=0;bO=J.Get(bL);try{bQ=J.Get(bM);try{while(bO.MoveNext()&&bQ.MoveNext()){bK(bN,bO.Current(),bQ.Current());bN=bN+1;}bP=void 0;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}bP;}finally{if(typeof bO=="object"&&"Dispose"in bO)bO.Dispose();}};N.mapi2=function(bK,bL,bM){return N.map3(bK,N.initInfinite(a.id),bL,bM);};N.mapFold=function(bK,bL,bM){return M.mapFold(bK,bL,M.ofSeq(bM));};N.mapFoldBack=function(bK,bL,bM){return M.mapFoldBack(bK,M.ofSeq(bL),bM);};N.permute=function(bK,bL){return N.delay(function(){return M.permute(bK,M.ofSeq(bL));});};N.reduceBack=function(bK,bL){return M.reduceBack(bK,M.ofSeq(bL));};N.replicate=function(bK,bL){bK<0?N.nonNegative():void 0;return N.delay(function(){return N.map(function(){return bL;},B.range(0,bK-1));});};N.rev=function(bK){return N.delay(function(){return M.ofSeq(bK).slice().reverse();});};N.scanBack=function(bK,bL,bM){return N.delay(function(){return M.scanBack(bK,M.ofSeq(bL),bM);});};N.indexed=function(bK){return N.mapi(function(bL,bM){return[bL,bM];},bK);};N.sortWith=function(bK,bL){return N.delay(function(){var bM;bM=M.ofSeq(bL);M.sortInPlaceWith(bK,bM);return bM;});};N.tail=function(bK){return N.skip(1,bK);};N.seqEmpty=function(){return B.FailWith("The input sequence was empty.");};bq.CopyTo=function(bK,bL,bM){M.blit(bL,0,bL,bM,M.length(bK));};bq.Contains=function(bK,bL){return N.exists(function(bM){return bv.Equals(bL,bM);},bK);};bq.Clear=function(bK){bK.splice(0,M.length(bK));};br.RegexEscape=function(bK){return bK.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};br.SplitWith=function(bK,bL){return bK.split(bL);};br.Join=function(bK,bL){return bL.join(bK);};br.TrimEndWS=function(bK){return bK.replace(new a.RegExp("\\s+$"),"");};br.TrimStartWS=function(bK){return bK.replace(new a.RegExp("^\\s+"),"");};br.Trim=function(bK){return bK.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};br.StartsWith=function(bK,bL){return bK.substring(0,bL.length)==bL;};br.Substring=function(bK,bL,bM){return bK.substr(bL,bM);};br.ReplaceOnce=function(bK,bL,bM){return bK.replace(bL,bM);};br.Remove=function(bK,bL,bM){return bK.substring(0,bL)+bK.substring(bL+bM);};br.PadRightWith=function(bK,bL,bM){return bL>bK.length?bK+a.Array(bL-bK.length+1).join(bM):bK;};br.PadLeftWith=function(bK,bL,bM){return bL>bK.length?a.Array(bL-bK.length+1).join(bM)+bK:bK;};br.LastIndexOf=function(bK,bL,bM){return bK.lastIndexOf(bL,bM);};br.IsNullOrWhiteSpace=function(bK){return bK==null||(new a.RegExp("^\\s*$")).test(bK);};br.IsNullOrEmpty=function(bK){return bK==null||bK=="";};br.Insert=function(bK,bL,bM){return bK.substring(0,bL-1)+bM+bK.substring(bL);};br.IndexOf=function(bK,bL,bM){return bK.indexOf(bL,bM);};br.EndsWith=function(bK,bL){return bK.substring(bK.length-bL.length)==bL;};br.collect=function(bK,bL){return M.init(bL.length,function(bM){return bK(bL[bM]);}).join("");};br.concat=function(bK,bL){return M.ofSeq(bL).join(bK);};br.exists=function(bK,bL){return N.exists(bK,br.protect(bL));};br.forall=function(bK,bL){return N.forall(bK,br.protect(bL));};br.init=function(bK,bL){return M.init(bK,bL).join("");};br.iter=function(bK,bL){N.iter(bK,br.protect(bL));};br.iteri=function(bK,bL){N.iteri(bK,br.protect(bL));};br.length=function(bK){return br.protect(bK).length;};br.map=function(bK,bL){return br.collect(bK,br.protect(bL));};br.mapi=function(bK,bL){return M.ofSeq(N.mapi(bK,bL)).join("");};br.replicate=function(bK,bL){return M.create(bK,bL).join("");};br.protect=function(bK){return bK===null?"":bK;};br.SFormat=function(bK,bL){return bK.replace(new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bM,bN,bO){var bP,bQ,bR;bP=bG(M.get(bL,+bN));return!bv.Equals(bO,void 0)?(bQ=+bO,(bR=bJ.abs(bQ),bR>bP.length?bQ>0?br.PadLeft(bP,bR):br.PadRight(bP,bR):bP)):bP;});};br.Filter=function(bK,bL){return M.ofSeq(N.choose(function(bM){return bK(bM)?{$:1,$0:bM}:null;},bL)).join("");};br.SplitStrings=function(bK,bL,bM){return br.Split(bK,new a.RegExp(br.concat("|",M.map(br.RegexEscape,bL))),bM);};br.SplitChars=function(bK,bL,bM){return br.Split(bK,new a.RegExp("["+br.RegexEscape(bL.join(""))+"]"),bM);};br.Split=function(bK,bL,bM){return bM===1?M.filter(function(bN){return bN!=="";},br.SplitWith(bK,bL)):br.SplitWith(bK,bL);};br.TrimEnd=function(bK,bL){var bM,bN;if(bv.Equals(bL,null)||bL.length==0)return br.TrimEndWS(bK);else{bM=bK.length-1;bN=true;while(bM>=0&&bN)(function(){var bO;bO=bK[bM];return M.exists(function(bP){return bO===bP;},bL)?void(bM=bM-1):void(bN=false);}());return br.Substring(bK,0,bM+1);}};br.TrimStart=function(bK,bL){var bM,bN;if(bv.Equals(bL,null)||bL.length==0)return br.TrimStartWS(bK);else{bM=0;bN=true;while(bM<bK.length&&bN)(function(){var bO;bO=bK[bM];return M.exists(function(bP){return bO===bP;},bL)?void(bM=bM+1):void(bN=false);}());return bK.substring(bM);}};br.ToCharArrayRange=function(bK,bL,bM){return M.init(bM,function(bN){return bK[bL+bN];});};br.ToCharArray=function(bK){return M.init(bK.length,function(bL){return bK[bL];});};br.ReplaceChar=function(bK,bL,bM){return br.Replace(bK,bL,bM);};br.Replace=function(bK,bL,bM){function bN(bO){var bP,bQ,bR;bP=bO.indexOf(bL);return bP!==-1?(bQ=br.ReplaceOnce(bO,bL,bM),(bR=bP+bM.length,br.Substring(bQ,0,bP+bM.length)+bN(bQ.substring(bR)))):bO;}return bN(bK);};br.PadRight=function(bK,bL){return br.PadRightWith(bK,bL," ");};br.PadLeft=function(bK,bL){return br.PadLeftWith(bK,bL," ");};br.CopyTo=function(bK,bL,bM,bN,bO){M.blit(br.ToCharArray(bK),bL,bM,bN,bO);};br.Compare=function(bK,bL){return bv.Compare(bK,bL);};bs=b.Task=bD.Class({Start:function(){var bK;bK=this;this.status===0?(this.status=2,E.scheduler().Fork(function(){var bL;bK.status=3;try{bK.Execute();bK.status=5;}catch(bM){bM instanceof _3&&(bv.Equals(bM.ct,bK.token)&&(bL=bM,true))?(bI.log("Task cancellation caught:",bL),bK.exc=new _8.New$3([bL]),bK.status=6):(bI.log("Task error caught:",bM),bK.exc=new _8.New$3([bM]),bK.status=7);}bK.RunContinuations();})):B.InvalidOp("Task not in initial state");},StartContinuation:function(){var bK;bK=this;this.status===1?(this.status=2,E.scheduler().Fork(function(){if(bK.status===2){bK.status=3;try{bK.Execute();bK.status=5;}catch(bL){bK.exc=new _8.New$3([bL]);bK.status=7;}bK.RunContinuations();}})):void 0;},ContinueWith:function(bK,bL){var bM,bN;bM=this;bN=new bt.New$4(function(){return bK(bM);},bL,1,null,void 0);this.get_IsCompleted()?bN.StartContinuation():this.continuations.push(bN);return bN;},ContinueWith$1:function(bK,bL){var bM,bN;bM=this;bN=new bs.New$4(function(){return bK(bM);},bL,1,null);this.get_IsCompleted()?bN.StartContinuation():this.continuations.push(bN);return bN;},RunContinuations:function(){var bK,bL,bM;bK=this.continuations;for(bL=0,bM=bK.length-1;bL<=bM;bL++)M.get(bK,bL).StartContinuation();},OnCompleted:function(bK){if(this.get_IsCompleted())bK();else{this.get_Status()===0?this.Start():void 0;this.ContinueWith$1(function(){return bK();},E.noneCT());}},get_Status:function(){return this.status;},get_IsFaulted:function(){return this.status===7;},get_IsCompleted:function(){return this.status===5||this.status===7||this.status===6;},get_IsCanceled:function(){return this.status===6;},get_Exception:function(){return this.exc;},Execute:function(){this.action();}},j,bs);bs.Yield=function(){return new bs.New$3(function(){return null;});};bs.WhenAll=function(bK){var bL,bM,bN,bO,bP,bQ;bL=M.length(bK);bM=[0];bN=new a.Array(bL);bO=new bu.New();for(bP=0,bQ=bL-1;bP<=bQ;bP++)(function(bR){M.get(bK,bP).ContinueWith$1(function(bS){return bS.get_IsFaulted()?void bO.TrySetException$1(bS.get_Exception()):bS.get_IsCanceled()?void bO.TrySetCanceled$1():(bM[0]++,bN[bR]=bS.get_Result(),bM[0]===bL?bO.SetResult(bN):null);},E.noneCT());}(bP));return bO.get_Task();};bs.WhenAll$1=function(bK){var bL,bM,bN,bO,bP;bL=M.length(bK);bM=[0];bN=new bu.New();for(bO=0,bP=bL-1;bO<=bP;bO++)M.get(bK,bO).ContinueWith$1(function(bQ){return bQ.get_IsFaulted()?void bN.TrySetException$1(bQ.get_Exception()):bQ.get_IsCanceled()?void bN.TrySetCanceled$1():(bM[0]++,bM[0]===bL?void bN.TrySetResult():null);},E.noneCT());return bN.get_Task();};bs.WhenAny=function(bK){var bL,bM,bN;bL=new bu.New();for(bM=0,bN=bK.length-1;bM<=bN;bM++)M.get(bK,bM).ContinueWith(function(bO){bL.TrySetResult(bO);},E.noneCT());return bL.get_Task();};bs.WhenAny$1=function(bK){var bL,bM,bN;bL=new bu.New();for(bM=0,bN=bK.length-1;bM<=bN;bM++)M.get(bK,bM).ContinueWith$1(function(bO){bL.TrySetResult(bO);},E.noneCT());return bL.get_Task();};bs.Delay=function(bK,bL){return E.StartAsTask(E.Sleep(bK),{$:1,$0:bL});};bs.Delay$1=function(bK){return E.StartAsTask(E.Sleep(bK),null);};bs.Run=function(bK,bL){var bM;bM=bK();return bL.c?bs.FromCanceled(bL):(bM.get_Status()===0?bM.Start():void 0,bM);};bs.Run$1=function(bK,bL){var bM;bM=new bt.New$4(bK,bL,0,null,void 0);bM.Start();return bM;};bs.Run$2=function(bK,bL){var bM;bM=bK();return bL.c?bs.FromCanceled$1(bL):(bM.get_Status()===0?bM.Start():void 0,bM);};bs.Run$3=function(bK,bL){var bM;bM=new bs.New$4(bK,bL,0,null);bM.Start();return bM;};bs.FromResult=function(bK){return new bt.New$4(null,E.noneCT(),5,null,bK);};bs.FromException=function(bK){return new bt.New$4(null,E.noneCT(),7,new _8.New$3([bK]),null);};bs.FromException$1=function(bK){return new bs.New$4(null,E.noneCT(),7,new _8.New$3([bK]));};bs.FromCanceled=function(bK){return new bt.New$4(null,bK,6,new _8.New$3([new ba.New()]),null);};bs.FromCanceled$1=function(bK){return new bs.New$4(null,bK,6,new _8.New$3([new ba.New()]));};bs.New=bD.Ctor(function(bK,bL,bM){bs.New$4.call(this,function(){return bK(bL);},bM,0,null);},bs);bs.New$1=bD.Ctor(function(bK,bL){bs.New$4.call(this,function(){return bK(bL);},E.noneCT(),0,null);},bs);bs.New$2=bD.Ctor(function(bK,bL){bs.New$4.call(this,bK,bL,0,null);},bs);bs.New$3=bD.Ctor(function(bK){bs.New$4.call(this,bK,E.noneCT(),0,null);},bs);bs.New$4=bD.Ctor(function(bK,bL,bM,bN){j.New.call(this);this.action=bK;this.token=bL;this.status=bM;this.continuations=[];this.exc=bN;},bs);bt=b.Task1=bD.Class({Execute:function(){this.result=this.func();},get_Result:function(){var bK;switch(this.get_Status()){case 5:return this.result;case 7:case 6:throw this.get_Exception();default:return B.InvalidOp("Task has not been completed, has no Result");}}},bs,bt);bt.New=bD.Ctor(function(bK,bL,bM){bt.New$4.call(this,function(){return bK(bL);},bM,0,null,void 0);},bt);bt.New$1=bD.Ctor(function(bK,bL){bt.New$4.call(this,function(){return bK(bL);},E.noneCT(),0,null,void 0);},bt);bt.New$2=bD.Ctor(function(bK,bL){bt.New$4.call(this,bK,bL,0,null,void 0);},bt);bt.New$3=bD.Ctor(function(bK){bt.New$4.call(this,bK,E.noneCT(),0,null,void 0);},bt);bt.New$4=bD.Ctor(function(bK,bL,bM,bN,bO){bs.New$4.call(this,null,bL,bM,bN);this.func=bK;this.result=bO;},bt);bu=b.TaskCompletionSource=bD.Class({TrySetResult:function(bK){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=bK,this.task.RunContinuations(),true);},TrySetException:function(bK){return this.TrySetException$1(new _8.New$2(bK));},TrySetException$1:function(bK){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new _8.New$3([bK]),this.task.RunContinuations(),true);},TrySetCanceled:function(bK){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.token=bK,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(bK){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=bK;this.task.RunContinuations();},SetException:function(bK){this.SetException$1(new _8.New$2(bK));},SetException$1:function(bK){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new _8.New$3([bK]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},j,bu);bu.New=bD.Ctor(function(){j.New.call(this);this.task=new bt.New$4(null,E.noneCT(),1,null,void 0);},bu);bv.Hash=function(bK){var bL;bL=typeof bK;return bL=="function"?0:bL=="boolean"?bK?1:0:bL=="number"?bK:bL=="string"?bv.hashString(bK):bL=="object"?bK==null?0:bK instanceof a.Array?bv.hashArray(bK):bv.hashObject(bK):0;};bv.hashObject=function(bK){var bL,bM;if("GetHashCode"in bK)return bK.GetHashCode();else{bL=[0];for(var bN in bK)if(function(bO){bL[0]=bv.hashMix(bv.hashMix(bL[0],bv.hashString(bO)),bv.Hash(bK[bO]));return false;}(bN))break;return bL[0];}};bv.hashString=function(bK){var bL,bM,bN;if(bK===null)return 0;else{bL=5381;for(bM=0,bN=bK.length-1;bM<=bN;bM++)bL=bv.hashMix(bL,bK[bM].charCodeAt());return bL;}};bv.hashArray=function(bK){var bL,bM,bN;bL=-34948909;for(bM=0,bN=M.length(bK)-1;bM<=bN;bM++)bL=bv.hashMix(bL,bv.Hash(M.get(bK,bM)));return bL;};bv.hashMix=function(bK,bL){return(bK<<5)+bK+bL;};bv.Equals=function(bK,bL){var bM,bN,bO,bP;if(bK===bL)return true;else{bM=typeof bK;if(bM=="object"){if(bK===null||bK===void 0||bL===null||bL===void 0)return false;else if("Equals"in bK)return bK.Equals(bL);else if(bK instanceof a.Array&&bL instanceof a.Array)return bv.arrayEquals(bK,bL);else if(bK instanceof bH&&bL instanceof bH)return bv.dateEquals(bK,bL);else{bN=[true];for(var bQ in bK)if(function(bR){bN[0]=!bK.hasOwnProperty(bR)||bL.hasOwnProperty(bR)&&bv.Equals(bK[bR],bL[bR]);return!bN[0];}(bQ))break;if(bN[0]){for(var bR in bL)if(function(bS){bN[0]=!bL.hasOwnProperty(bS)||bK.hasOwnProperty(bS);return!bN[0];}(bR))break;}return bN[0];}}else return bM=="function"&&("$Func"in bK?bK.$Func===bL.$Func&&bK.$Target===bL.$Target:"$Invokes"in bK&&"$Invokes"in bL&&bv.arrayEquals(bK.$Invokes,bL.$Invokes));}};bv.dateEquals=function(bK,bL){return bK.getTime()===bL.getTime();};bv.arrayEquals=function(bK,bL){var bM,bN;if(M.length(bK)===M.length(bL)){bM=true;bN=0;while(bM&&bN<M.length(bK)){!bv.Equals(M.get(bK,bN),M.get(bL,bN))?bM=false:void 0;bN=bN+1;}return bM;}else return false;};bv.Compare=function(bK,bL){var bM,bN,bO,bP,bQ,bR;if(bK===bL)return 0;else{bN=typeof bK;switch(bN=="function"?1:bN=="boolean"?2:bN=="number"?2:bN=="string"?2:bN=="object"?3:0){case 0:return typeof bL=="undefined"?0:-1;case 1:return B.FailWith("Cannot compare function values.");case 2:return bK<bL?-1:1;case 3:if(bK===null)bO=-1;else if(bL===null)bO=1;else if("CompareTo"in bK)bO=bK.CompareTo(bL);else if("CompareTo0"in bK)bO=bK.CompareTo0(bL);else if(bK instanceof a.Array&&bL instanceof a.Array)bO=bv.compareArrays(bK,bL);else if(bK instanceof bH&&bL instanceof bH)bO=bv.compareDates(bK,bL);else{bP=[0];for(var bS in bK)if(function(bT){return!bK.hasOwnProperty(bT)?false:!bL.hasOwnProperty(bT)?(bP[0]=1,true):(bP[0]=bv.Compare(bK[bT],bL[bT]),bP[0]!==0);}(bS))break;if(bP[0]===0){for(var bT in bL)if(function(bU){return!bL.hasOwnProperty(bU)?false:!bK.hasOwnProperty(bU)&&(bP[0]=-1,true);}(bT))break;}bO=bP[0];}return bO;}}};bv.compareDates=function(bK,bL){return bv.Compare(bK.getTime(),bL.getTime());};bv.compareArrays=function(bK,bL){var bM,bN;if(M.length(bK)<M.length(bL))return -1;else if(M.length(bK)>M.length(bL))return 1;else{bM=0;bN=0;while(bM===0&&bN<M.length(bK)){bM=bv.Compare(M.get(bK,bN),M.get(bL,bN));bN=bN+1;}return bM;}};bz.ValueNone={$:0};bz.get_Value=function(bK){return bK.$==1?bK.$0:B.InvalidOp("ValueOption.Value");};bA.filter=function(bK,bL){var bM;return bL.$==1&&bK(bL.$0)?bL:bz.ValueNone;};bA.fold=function(bK,bL,bM){return bM.$==0?bL:bK(bL,bM.$0);};bA.foldBack=function(bK,bL,bM){return bL.$==0?bM:bK(bL.$0,bM);};bA.ofNullable=function(bK){return bK==null?bz.ValueNone:{$:1,$0:C.get(bK)};};bA.ofObj=function(bK){return bK==null?bz.ValueNone:{$:1,$0:bK};};bA.toArray=function(bK){return bK.$==0?[]:[bK.$0];};bA.toList=function(bK){return bK.$==0?bi.Empty:O.ofArray([bK.$0]);};bA.toNullable=function(bK){return bK.$==1?bK.$0:null;};bA.toObj=function(bK){return bK.$==0?null:bK.$0;};bB.TryParseBool=function(bK,bL){var bM;bM=bK.toLowerCase();return bM==="true"?(bL.set(true),true):bM==="false"&&(bL.set(false),true);};bB.ParseBool=function(bK){var bL;bL=bK.toLowerCase();if(bL==="true")return true;else if(bL==="false")return false;else throw new _.New$1("String was not recognized as a valid Boolean.");};bB.TryParse=function(bK,bL,bM,bN){var bO,bP;bO=+bK;bP=bO===bO-bO%1&&bO>=bL&&bO<=bM;bP?bN.set(bO):void 0;return bP;};bB.Parse=function(bK,bL,bM,bN){var bO;bO=+bK;if(bO!==bO-bO%1)throw new _.New$1("Input string was not in a correct format.");else if(bO<bL||bO>bM)throw new $.New$1(bN);else return bO;};bB.ParseByte=function(bK){return bB.Parse(bK,0,255,"Value was either too large or too small for an unsigned byte.");};bB.TryParseByte=function(bK,bL){return bB.TryParse(bK,0,255,bL);};bB.ParseSByte=function(bK){return bB.Parse(bK,-128,127,"Value was either too large or too small for a signed byte.");};bB.TryParseSByte=function(bK,bL){return bB.TryParse(bK,-128,127,bL);};bB.ParseInt16=function(bK){return bB.Parse(bK,-32768,32767,"Value was either too large or too small for an Int16.");};bB.TryParseInt16=function(bK,bL){return bB.TryParse(bK,-32768,32767,bL);};bB.ParseInt32=function(bK){return bB.Parse(bK,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bB.TryParseInt32=function(bK,bL){return bB.TryParse(bK,-2147483648,2147483647,bL);};bB.ParseUInt16=function(bK){return bB.Parse(bK,0,65535,"Value was either too large or too small for an UInt16.");};bB.TryParseUInt16=function(bK,bL){return bB.TryParse(bK,0,65535,bL);};bB.ParseUInt32=function(bK){return bB.Parse(bK,0,4294967295,"Value was either too large or too small for an UInt32.");};bB.TryParseUInt32=function(bK,bL){return bB.TryParse(bK,0,4294967295,bL);};bB.ParseInt64=function(bK){return bB.Parse(bK,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bB.TryParseInt64=function(bK,bL){return bB.TryParse(bK,-9223372036854775808,9223372036854775807,bL);};bB.ParseUInt64=function(bK){return bB.Parse(bK,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bB.TryParseUInt64=function(bK,bL){return bB.TryParse(bK,0,18446744073709551615,bL);};}());
