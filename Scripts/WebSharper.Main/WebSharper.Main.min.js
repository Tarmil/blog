(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN;b=a.WebSharper=a.WebSharper||{};c=b.JavaScript=b.JavaScript||{};d=c.JS=c.JS||{};e=a.Error;f=c.NonStandardPromiseRejectionException=c.NonStandardPromiseRejectionException||{};g=c.Promise=c.Promise||{};h=c.Pervasives=c.Pervasives||{};i=b.Json=b.Json||{};j=b.Obj=b.Obj||{};k=b.Remoting=b.Remoting||{};l=k.XhrProvider=k.XhrProvider||{};m=k.AjaxRemotingProvider=k.AjaxRemotingProvider||{};n=a.StartupCode$WebSharper_Main$Remoting=a.StartupCode$WebSharper_Main$Remoting||{};o=b.HtmlContentExtensions=b.HtmlContentExtensions||{};p=o.SingleNode=o.SingleNode||{};q=o.IControlBody=o.IControlBody||{};r=b.Activator=b.Activator||{};s=a.StartupCode$WebSharper_Main$Html=a.StartupCode$WebSharper_Main$Html||{};t=b.Collections=b.Collections||{};u=t.EqualityComparer=t.EqualityComparer||{};v=b.Comparers=b.Comparers||{};w=v.EquatableEqualityComparer=v.EquatableEqualityComparer||{};x=v.BaseEqualityComparer=v.BaseEqualityComparer||{};y=t.Comparer=t.Comparer||{};z=v.ComparableComparer=v.ComparableComparer||{};A=v.BaseComparer=v.BaseComparer||{};B=b.Operators=b.Operators||{};C=b.Nullable=b.Nullable||{};D=b.Utils=b.Utils||{};E=b.Concurrency=b.Concurrency||{};F=E.CT=E.CT||{};G=E.AsyncBody=E.AsyncBody||{};H=E.Scheduler=E.Scheduler||{};I=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};J=b.Enumerator=b.Enumerator||{};K=J.T=J.T||{};L=c.Optional=c.Optional||{};M=b.Arrays=b.Arrays||{};N=b.Seq=b.Seq||{};O=b.List=b.List||{};P=b.Arrays2D=b.Arrays2D||{};Q=b.CancellationTokenSource=b.CancellationTokenSource||{};R=b.BigIntProxyHelpers=b.BigIntProxyHelpers||{};S=b.Char=b.Char||{};T=b.Util=b.Util||{};U=b.DateUtil=b.DateUtil||{};V=b.DateTimeOffset=b.DateTimeOffset||{};W=b.Delegate=b.Delegate||{};X=t.DictionaryUtil=t.DictionaryUtil||{};Y=t.KeyCollection=t.KeyCollection||{};Z=t.ValueCollection=t.ValueCollection||{};_0=t.Dictionary=t.Dictionary||{};_1=b.Exception=b.Exception||{};_2=b.MatchFailureException=b.MatchFailureException||{};_3=b.IndexOutOfRangeException=b.IndexOutOfRangeException||{};_4=b.OperationCanceledException=b.OperationCanceledException||{};_5=b.ArgumentException=b.ArgumentException||{};_6=b.ArgumentOutOfRangeException=b.ArgumentOutOfRangeException||{};_7=b.ArgumentNullException=b.ArgumentNullException||{};_8=b.InvalidOperationException=b.InvalidOperationException||{};_9=b.AggregateException=b.AggregateException||{};_=b.TimeoutException=b.TimeoutException||{};$=b.FormatException=b.FormatException||{};ba=b.OverflowException=b.OverflowException||{};bb=b.TaskCanceledException=b.TaskCanceledException||{};bc=b.KeyNotFoundException=b.KeyNotFoundException||{};bd=a.System=a.System||{};be=bd.Guid=bd.Guid||{};bf=t.HashSetUtil=t.HashSetUtil||{};bg=t.HashSet=t.HashSet||{};bh=bd.Collections=bd.Collections||{};bi=bh.DictionaryEntry=bh.DictionaryEntry||{};bj=b.LazyExtensionsProxy=b.LazyExtensionsProxy||{};bk=bj.LazyRecord=bj.LazyRecord||{};bl=b.Lazy=b.Lazy||{};bm=O.T=O.T||{};bn=b.Slice=b.Slice||{};bo=b.Option=b.Option||{};bp=b.Queue=b.Queue||{};bq=b.Random=b.Random||{};br=b.Ref=b.Ref||{};bs=b.Result=b.Result||{};bt=b.Control=b.Control||{};bu=b.Stack=b.Stack||{};bv=b.Strings=b.Strings||{};bw=b.Task=b.Task||{};bx=b.Task1=b.Task1||{};by=b.TaskCompletionSource=b.TaskCompletionSource||{};bz=b.Unchecked=b.Unchecked||{};bA=a.Microsoft=a.Microsoft||{};bB=bA.FSharp=bA.FSharp||{};bC=bB.Core=bB.Core||{};bD=bC.FSharpValueOption=bC.FSharpValueOption||{};bE=b.ValueOption=b.ValueOption||{};bF=b.Numeric=b.Numeric||{};bG=a.IntelliFactory;bH=bG&&bG.Runtime;bI=a.Promise;bJ=a.JSON;bK=a.String;bL=a.Date;bM=a.console;bN=a.Math;d.GetFieldValues=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push(bO[bR]);return bP;};d.GetFieldNames=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push(bR);return bP;};d.GetFields=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push([bR,bO[bR]]);return bP;};f=c.NonStandardPromiseRejectionException=bH.Class({get_Reason:function(){return this.reason;}},e,f);f.New=bH.Ctor(function(bO){this.message="Promise rejected";a.Object.setPrototypeOf(this,f.prototype);this.reason=bO;},f);g.For=function(bO,bP){var bQ;function bR(){return bQ.MoveNext()?bP(bQ.Current()).then(function(){return bR();}):bI.resolve(null);}bQ=J.Get(bO);return new bI(function(bS){bR();bS();})["finally"](function(){return bQ.Dispose();});};g.AsTask=function(bO){var bP;bP=new by.New();bO.then(function(bQ){return bP.SetResult(bQ);},function(bQ){return bP.SetException$1(g.unwrapExn(bQ));});return bP.get_Task();};g.AsAsync=function(bO){return E.FromContinuations(function(bP,bQ){bO.then(bP,function(bR){return bQ(g.unwrapExn(bR));});});};g.OfTask=function(bO){return new bI(function(bP,bQ){bO.ContinueWith$1(function(bR){return bR.get_IsCanceled()?bQ(new bb.New()):bR.get_IsFaulted()?bQ(bR.get_Exception()):bP(bR.get_Result());},E.noneCT());});};g.OfAsync=function(bO){return new bI(function(bP,bQ){E.StartWithContinuations(bO,bP,function(bR){bQ(bR);},function(bR){bQ(bR);},null);});};g.unwrapExn=function(bO){return bO instanceof e?bO:new f.New(bO);};h.GetJS=function(bO,bP){var bQ,bR;bQ=bO;bR=J.Get(bP);try{while(bR.MoveNext())bQ=bQ[bR.Current()];}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return bQ;};h.NewFromSeq=function(bO){var bP,bQ,bR;bP={};bQ=J.Get(bO);try{while(bQ.MoveNext()){bR=bQ.Current();bP[bR[0]]=bR[1];}}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}return bP;};i.Activate=function(bO){var bP,bR,bS,bT,bU,bV,bW;function bQ(bX){var bY,bZ,b0,b1,b2;if(bz.Equals(bX,null))return bX;else if(typeof bX=="object"){if(bX instanceof a.Array)return i.shallowMap(bQ,bX);else{bY=i.shallowMap(bQ,bX.$V);bZ=bX.$T;if(bZ===void 0)return bY;else{b0=M.get(bR,bZ);if(b0===1)return O.ofArray(bY);else if(b0===2)return self.WebSharper.Decimal.CreateDecimalBits(bY);else{b1=new(M.get(bR,bZ))();for(var b3 in bY)if(function(b4){b1[b4]=bY[b4];return false;}(b3))break;return b1;}}}}else return bX;}bR=bO?bO.$TYPES:void 0;if(bR===void 0)bP=bO;else{for(bS=0,bT=M.length(bR)-1;bS<=bT;bS++){bW=M.get(bR,bS);switch(!bz.Equals(bW,null)&&bW.length===3?M.get(bW,0)==="WebSharper"?M.get(bW,1)==="List"?M.get(bW,2)==="T"?0:(bV=bW,2):(bV=bW,2):(bV=bW,2):!bz.Equals(bW,null)&&bW.length===2?M.get(bW,0)==="WebSharper"?M.get(bW,1)==="Decimal"?1:(bV=bW,2):(bV=bW,2):(bV=bW,2)){case 0:bU=1;break;case 1:bU=2;break;case 2:bU=i.lookup(bV);break;}M.set(bR,bS,bU);}bP=bO.$DATA;}return bQ(bP);};i.shallowMap=function(bO,bP){var bQ,bR;if(bP instanceof a.Array)return M.map(bO,bP);else if(typeof bP=="object"){bQ={};for(var bS in bP)if(function(bT){bQ[bT]=bO(bP[bT]);return false;}(bS))break;return bQ;}else return bP;};i.lookup=function(bO){var bP,bQ,bR,bS,bT;bR=M.length(bO);bP=self;bQ=0;while(bQ<bR){bS=M.get(bO,bQ);bT=bP[bS];if(!bz.Equals(typeof bT,void 0)){bP=bT;bQ=bQ+1;}else B.FailWith("Invalid server reply. Failed to find type: "+bS);}return bP;};j=b.Obj=bH.Class({Equals:function(bO){return this===bO;},GetHashCode:function(){return -1;}},null,j);j.New=bH.Ctor(function(){},j);l=k.XhrProvider=bH.Class({Sync:function(bO,bP,bQ){var bR;bR=[null];k.ajax(false,bO,bP,bQ,function(bS){bR[0]=bS;},function(bS){throw bS;},function(){k.ajax(false,bO,bP,bQ,function(bS){bR[0]=bS;},function(bS){throw bS;},void 0);});return bR[0];},Async:function(bO,bP,bQ,bR,bS){k.ajax(true,bO,bP,bQ,bR,bS,function(){k.ajax(true,bO,bP,bQ,bR,bS,void 0);});}},j,l);l.New=bH.Ctor(function(){j.New.call(this);},l);m=k.AjaxRemotingProvider=bH.Class({get_EndPoint:function(){return k.EndPoint();},AsyncBase:function(bO,bP){var bQ,bR;bQ=this;bR=null;return E.Delay(function(){var bS,bT;bS=k.makeHeaders(bO);bT=k.makePayload(bP);return E.Bind(E.GetCT(),function(bU){return E.FromContinuations(function(bV,bW,bX){var bY,bZ,b0;function b1(b2){return bY[0]?(bY[0]=false,bX(new _4.New(bU))):null;}bY=[true];bZ=E.Register(bU,function(){b1();});b0=bQ.get_EndPoint();return k.AjaxProvider().Async(b0,bS,bT,function(b2){if(bY[0]){bY[0]=false;bZ.Dispose();bV(i.Activate(bJ.parse(b2)));}},function(b2){if(bY[0]){bY[0]=false;bZ.Dispose();bW(b2);}});});});});},Send:function(bO,bP){E.Start(this.AsyncBase(bO,bP),null);},Task:function(bO,bP){return E.StartAsTask(this.AsyncBase(bO,bP),null);},Async:function(bO,bP){return this.AsyncBase(bO,bP);},Sync:function(bO,bP){var bQ,bR,bS;return i.Activate(bJ.parse((bQ=this.get_EndPoint(),(bR=k.makeHeaders(bO),(bS=k.makePayload(bP),k.AjaxProvider().Sync(bQ,bR,bS))))));}},j,m);m.New=bH.Ctor(function(){j.New.call(this);},m);k.ajax=function(bO,bP,bQ,bR,bS,bT,bU){var bV,bW,bX;bV=new a.XMLHttpRequest();bW=a.document.cookie.replace(new a.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");bV.open("POST",bP,bO);if(bO==true)bV.withCredentials=true;for(var bZ in bQ)bV.setRequestHeader(bZ,bQ[bZ]);if(bW)bV.setRequestHeader("x-csrftoken",bW);function bY(){var b0;if(bV.status==200)bS(bV.responseText);else if(bU&&bV.status==403&&bV.responseText=="CSRF")bU();else{b0="Response status is not 200: ";bT(new e(b0+bV.status));}}if("onload"in bV)bV.onload=bV.onerror=bV.onabort=bY;else bV.onreadystatechange=function(){if(bV.readyState==4)bY();};bV.send(bR);};k.makePayload=function(bO){return bJ.stringify(bO);};k.makeHeaders=function(bO){return{"content-type":"application/json","x-websharper-rpc":bO};};k.AjaxProvider=function(){n.$cctor();return n.AjaxProvider;};k.set_AjaxProvider=function(bO){n.$cctor();n.AjaxProvider=bO;};k.UseHttps=function(){try{return!bv.StartsWith(self.location.href,"https://")&&(k.set_EndPoint(bv.Replace(self.location.href,"http://","https://")),true);}catch(bO){return false;}};k.EndPoint=function(){n.$cctor();return n.EndPoint;};k.set_EndPoint=function(bO){n.$cctor();n.EndPoint=bO;};n.$cctor=function(){n.$cctor=a.ignore;n.EndPoint="?";n.AjaxProvider=new l.New();};p=o.SingleNode=bH.Class({ReplaceInDom:function(bO){this.node.parentNode.replaceChild(this.node,bO);}},j,p);p.New=bH.Ctor(function(bO){j.New.call(this);this.node=bO;},p);q.SingleNode=function(bO){return new p.New(bO);};r.Activate=function(){var bO;if(self.document){bO=self.document.getElementById("websharper-data");if(bO)r.onReady(function(){var bP,bQ;function bR(bU,bV){if(typeof bV=="object"&&"$init"in bV)bV.$preinit(bU);}function bS(bU,bV){if(typeof bV=="object"&&"Body"in bV)bV.Body().ReplaceInDom(self.document.getElementById(bU));else if(typeof bV=="object"&&"$init"in bV)bV.$init(bU);}function bT(bU,bV){if(typeof bV=="object"&&"$init"in bV)bV.$postinit(bU);}bP=i.Activate(bJ.parse(bO.getAttribute("content")));r.set_Instances(bP);bQ=d.GetFields(bP);M.iter(function(bU){return bR(bU[0],bU[1]);},bQ);M.iter(function(bU){return bS(bU[0],bU[1]);},bQ);M.iter(function(bU){return bT(bU[0],bU[1]);},bQ);});}};r.onReady=function(bO){var bP;function bQ(){if(!bP){bP=true;bO();self.document.removeEventListener("DOMContentLoaded",bQ,false);self.removeEventListener("load",bQ,false);}}bP=false;if(self.document.readyState==="complete")bQ();else{self.document.addEventListener("DOMContentLoaded",bQ,false);self.addEventListener("load",bQ,false);}};r.Instances=function(){s.$cctor();return s.Instances;};r.set_Instances=function(bO){s.$cctor();s.Instances=bO;};r.META_ID=function(){s.$cctor();return s.META_ID;};s.$cctor=function(){s.$cctor=a.ignore;s.META_ID="websharper-data";s.Instances=null;};u=t.EqualityComparer=bH.Class({CGetHashCode0:function(bO){return this.GetHashCode$1(bO);},CEquals0:function(bO,bP){return this.Equals$1(bO,bP);},CGetHashCode:function(bO){return this.GetHashCode$1(bO);},CEquals:function(bO,bP){return this.Equals$1(bO,bP);}},j,u);u.New=bH.Ctor(function(){j.New.call(this);},u);w=v.EquatableEqualityComparer=bH.Class({GetHashCode$1:function(bO){return bz.Hash(bO);},Equals$1:function(bO,bP){return bO.EEquals(bP);}},u,w);w.New=bH.Ctor(function(){u.New.call(this);},w);x=v.BaseEqualityComparer=bH.Class({GetHashCode$1:function(bO){return bz.Hash(bO);},Equals$1:function(bO,bP){return bz.Equals(bO,bP);}},u,x);x.New=bH.Ctor(function(){u.New.call(this);},x);y=t.Comparer=bH.Class({Compare0:function(bO,bP){return this.Compare$1(bO,bP);},Compare:function(bO,bP){return this.Compare$1(bO,bP);}},j,y);y.New=bH.Ctor(function(){j.New.call(this);},y);z=v.ComparableComparer=bH.Class({Compare$1:function(bO,bP){return bO.CompareTo(bP);}},y,z);z.New=bH.Ctor(function(){y.New.call(this);},z);A=v.BaseComparer=bH.Class({Compare$1:function(bO,bP){return bz.Compare(bO,bP);}},y,A);A.New=bH.Ctor(function(){y.New.call(this);},A);B.charRange=function(bO,bP){var bQ,bR;bQ=bO.charCodeAt();bR=1+bP.charCodeAt()-bQ;return bR<=0?[]:N.init(bR,function(bS){return bK.fromCharCode(bS+bQ);});};C.op=function(bO,bP,bQ){return bO==null||bP==null?null:bQ(bO,bP);};C.opL=function(bO,bP,bQ){return bO==null?null:bQ(bO,bP);};C.opR=function(bO,bP,bQ){return bP==null?null:bQ(bO,bP);};C.cmp=function(bO,bP,bQ){return bO==null||bP==null?false:bQ(bO,bP);};C.cmpE=function(bO,bP,bQ){return bO==null?bP==null:bP==null?false:bQ(bO,bP);};C.cmpL=function(bO,bP,bQ){return bO==null?false:bQ(bO,bP);};C.cmpR=function(bO,bP,bQ){return bP==null?false:bQ(bO,bP);};C.conv=function(bO,bP){return bO==null?null:bP(bO);};D.prettyPrint=function(bO){var bP,bQ;function bR(bS,bT){return bS+" = "+D.prettyPrint(bT);}return bO===null?"null":(bP=typeof bO,bP=="string"?"\""+bO+"\"":bP=="object"?bO instanceof a.Array?"[|"+bv.concat("; ",M.map(D.prettyPrint,bO))+"|]":(bQ=bK(bO),bQ==="[object Object]"?"{"+bv.concat("; ",M.map(function(bS){return bR(bS[0],bS[1]);},d.GetFields(bO)))+"}":bQ):bK(bO));};D.printArray2D=function(bO,bP){return bP===null?"null":"[["+bv.concat("][",N.delay(function(){var bQ;bQ=bP.length?bP[0].length:0;return N.map(function(bR){return bv.concat("; ",N.delay(function(){return N.map(function(bS){return bO(M.get2D(bP,bR,bS));},B.range(0,bQ-1));}));},B.range(0,bP.length-1));}))+"]]";};D.printArray=function(bO,bP){return bP===null?"null":"[|"+bv.concat("; ",M.map(bO,bP))+"|]";};D.printList=function(bO,bP){return"["+bv.concat("; ",N.map(bO,bP))+"]";};D.padNumLeft=function(bO,bP){var bQ;bQ=M.get(bO,0);return bQ===" "||bQ==="+"||bQ==="-"?bQ+bv.PadLeftWith(bO.substr(1),bP-1,"0"):bv.PadLeftWith(bO,bP,"0");};D.spaceForPos=function(bO,bP){return 0<=bO?" "+bP:bP;};D.plusForPos=function(bO,bP){return 0<=bO?"+"+bP:bP;};D.toSafe=function(bO){return bO==null?"":bO;};F.New=function(bO,bP){return{c:bO,r:bP};};G.New=function(bO,bP){return{k:bO,ct:bP};};H=E.Scheduler=bH.Class({tick:function(){var bO,bP,bQ;bP=this;bQ=bL.now();bO=true;while(bO)if(this.robin.length===0){this.idle=true;bO=false;}else{(this.robin.shift())();bL.now()-bQ>40?(a.setTimeout(function(){bP.tick();},0),bO=false):void 0;}},Fork:function(bO){var bP;bP=this;this.robin.push(bO);if(this.idle){this.idle=false;a.setTimeout(function(){bP.tick();},0);}}},j,H);H.New=bH.Ctor(function(){j.New.call(this);this.idle=true;this.robin=[];},H);E.For=function(bO,bP){return E.Using(J.Get(bO),function(bQ){return E.While(function(){return bQ.MoveNext();},E.Delay(function(){return bP(bQ.Current());}));});};E.While=function(bO,bP){return bO()?E.Bind(bP,function(){return E.While(bO,bP);}):E.Return();};E.Using=function(bO,bP){return E.TryFinally(bP(bO),function(){bO.Dispose();});};E.TryCancelled=function(bO,bP){return function(bQ){bO(G.New(function(bR){if(bR.$==2){bP(bR.$0);bQ.k(bR);}else bQ.k(bR);},bQ.ct));};};E.OnCancel=function(bO){return function(bP){bP.k({$:0,$0:E.Register(bP.ct,bO)});};};E.StartChildAsTask=function(bO){return function(bP){(E.StartChild(bO,null))(G.New(function(bQ){if(bQ.$==0)bP.k({$:0,$0:E.StartImmediateAsTask(bQ.$0,{$:1,$0:bP.ct})});},bP.ct));};};E.StartChild=function(bO,bP){return function(bQ){var bR,bS,bT,bU;bR=[true];bS=[null];bT=[];bU=bP!=null&&bP.$==1?{$:1,$0:a.setTimeout(function(){var bV;bR[0]=false;bV={$:1,$0:new _.New()};while(bT.length>0)(bT.shift())(bV);},bP.$0)}:null;E.scheduler().Fork(function(){if(!bQ.ct.c)bO(G.New(function(bV){if(bR[0]){bS[0]={$:1,$0:bV};if(bU!=null&&bU.$==1)a.clearTimeout(bU.$0);while(bT.length>0)(bT.shift())(bV);}},bQ.ct));});bQ.k({$:0,$0:function(bV){var bW;if(bR[0]){bW=bS[0];if(bW==null)bT.push(bV.k);else bV.k(bW.$0);}else bV.k({$:1,$0:new _.New()});}});};};E.Sequential=function(bO){var bP;bP=M.ofSeq(bO);return M.length(bP)===0?E.Return([]):function(bQ){var bR,bS;function bT(bV){var bW;while(true){bW=function(bX){return function(){(M.get(bP,bX))(G.New(function(bY){return bU(bX,bY);},bQ.ct));};}(bV);return E.scheduler().Fork(bW);}}function bU(bV,bW){return bW.$==0?(M.set(bS,bV,bW.$0),bV===bR-1?bQ.k({$:0,$0:bS}):bQ.ct.c?E.cancel(bQ):bT(bV+1)):bQ.k(bW);}bR=bP.length;bS=new a.Array(bR);bT(0);};};E.ParallelWithMaxDegree=function(bO,bP){var bQ;if(bP<=0)B.InvalidArg("maxDegreeOfParallelism","maxDegreeOfParallelism must be positive, was "+bK(bP));bQ=M.ofSeq(bO);return M.length(bQ)===0?E.Return([]):function(bR){var bU,bV,bW,bX,bY;function bS(bZ){E.scheduler().Fork(function(){(M.get(bQ,bZ))(G.New(bT(bZ),bR.ct));});}function bT(bZ){return function(b0){var b1,b2,b3;b2=bV[0];switch(b2===0?0:b2===1?b0.$==0?1:(b1=[b2,b0],3):b0.$==0?2:(b1=[b2,b0],3)){case 0:return null;case 1:M.set(bW,bZ,b0.$0);bV[0]=0;return bR.k({$:0,$0:bW});case 2:return bR.ct.c?(bV[0]=0,E.cancel(bR)):(M.set(bW,bZ,b0.$0),bV[0]=b2-1,b3=bU-b2+bP,b3<bU?bS(b3):null);case 3:bV[0]=0;return bR.k(b1[1]);}};}bU=bQ.length;bV=[bU];bW=new a.Array(bU);for(bX=0,bY=(bz.Compare(bP,bU)===-1?bP:bU)-1;bX<=bY;bX++)bS(bX);};};E.Parallel=function(bO){var bP;bP=M.ofSeq(bO);return M.length(bP)===0?E.Return([]):function(bQ){var bS,bT,bU,bV,bW;function bR(bX,bY){var bZ,b0;b0=bT[0];switch(b0===0?0:b0===1?bY.$==0?1:(bZ=bY,3):bY.$==0?2:(bZ=bY,3)){case 0:return null;case 1:M.set(bU,bX,bY.$0);bT[0]=0;return bQ.k({$:0,$0:bU});case 2:M.set(bU,bX,bY.$0);{bT[0]=b0-1;return;}break;case 3:bT[0]=0;return bQ.k(bZ);}}bS=bP.length;bT=[bS];bU=new a.Array(bS);for(bV=0,bW=bS-1;bV<=bW;bV++)(function(bX){return E.scheduler().Fork(function(){(M.get(bP,bX))(G.New(function(bY){return bR(bX,bY);},bQ.ct));});}(bV));};};E.Sleep=function(bO){return function(bP){var bQ,bR;bQ=void 0;bR=void 0;bQ=a.setTimeout(function(){bR.Dispose();E.scheduler().Fork(function(){bP.k({$:0,$0:null});});},bO);bR=E.Register(bP.ct,function(){a.clearTimeout(bQ);E.scheduler().Fork(function(){E.cancel(bP);});});};};E.StartImmediateAsTask=function(bO,bP){var bQ;bQ=new by.New();E.StartWithContinuations(bO,function(bR){bQ.SetResult(bR);},function(bR){bQ.SetException$1(bR);},function(){bQ.SetCanceled();},bP);return bQ.get_Task();};E.StartAsTask=function(bO,bP){var bQ;bQ=new by.New();E.scheduler().Fork(function(){E.StartWithContinuations(bO,function(bR){bQ.SetResult(bR);},function(bR){bQ.SetException$1(bR);},function(){bQ.SetCanceled();},bP);});return bQ.get_Task();};E.AwaitTask1=function(bO){return E.FromContinuations(function(bP,bQ,bR){bz.Equals(bO.get_Status(),0)?bO.Start():void 0;bO.ContinueWith$1(function(bS){return bS.get_IsCanceled()?bR(new _4.New(E.noneCT())):bS.get_IsFaulted()?bQ(bS.get_Exception()):bP(bS.get_Result());},E.noneCT());});};E.AwaitTask=function(bO){return E.FromContinuations(function(bP,bQ,bR){bz.Equals(bO.get_Status(),0)?bO.Start():void 0;bO.ContinueWith$1(function(bS){return bS.get_IsCanceled()?bR(new _4.New(E.noneCT())):bS.get_IsFaulted()?bQ(bS.get_Exception()):bP();},E.noneCT());});};E.AwaitEvent=function(bO,bP){return function(bQ){var bR,bS;bR=void 0;bS=void 0;bR=bO.Subscribe(T.observer(function(bT){bR.Dispose();bS.Dispose();E.scheduler().Fork(function(){bQ.k({$:0,$0:bT});});}));bS=E.Register(bQ.ct,function(){if(bP!=null&&bP.$==1)bP.$0();else{bR.Dispose();E.scheduler().Fork(function(){E.cancel(bQ);});}});};};E.StartImmediate=function(bO,bP){var bQ,bR;bQ=(bR=(E.defCTS())[0],bP==null?bR:bP.$0);if(!bQ.c)bO(G.New(function(bS){if(bS.$==1)E.UncaughtAsyncError(bS.$0);},bQ));};E.Start=function(bO,bP){var bQ,bR;bQ=(bR=(E.defCTS())[0],bP==null?bR:bP.$0);E.scheduler().Fork(function(){if(!bQ.c)bO(G.New(function(bS){if(bS.$==1)E.UncaughtAsyncError(bS.$0);},bQ));});};E.UncaughtAsyncError=function(bO){bM.log("WebSharper: Uncaught asynchronous exception",bO);};E.StartWithContinuations=function(bO,bP,bQ,bR,bS){var bT,bU;bT=(bU=(E.defCTS())[0],bS==null?bU:bS.$0);if(!bT.c)bO(G.New(function(bV){if(bV.$==1)bQ(bV.$0);else if(bV.$==2)bR(bV.$0);else bP(bV.$0);},bT));};E.FromContinuations=function(bO){return function(bP){var bQ;function bR(bS){if(bQ[0])B.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bQ[0]=true;E.scheduler().Fork(bS);}}bQ=[false];bO(function(bS){bR(function(){bP.k({$:0,$0:bS});});},function(bS){bR(function(){bP.k({$:1,$0:bS});});},function(bS){bR(function(){bP.k({$:2,$0:bS});});});};};E.GetCT=function(){I.$cctor();return I.GetCT;};E.Catch=function(bO){return function(bP){try{bO(G.New(function(bQ){if(bQ.$==0)bP.k({$:0,$0:{$:0,$0:bQ.$0}});else if(bQ.$==1)bP.k({$:0,$0:{$:1,$0:bQ.$0}});else bP.k(bQ);},bP.ct));}catch(bQ){bP.k({$:0,$0:{$:1,$0:bQ}});}};};E.TryWith=function(bO,bP){return function(bQ){bO(G.New(function(bR){if(bR.$==0)bQ.k({$:0,$0:bR.$0});else if(bR.$==1)try{(bP(bR.$0))(bQ);}catch(bS){bQ.k(bR);}else bQ.k(bR);},bQ.ct));};};E.TryFinally=function(bO,bP){return function(bQ){bO(G.New(function(bR){try{bP();bQ.k(bR);}catch(bS){bQ.k({$:1,$0:bS});}},bQ.ct));};};E.Delay=function(bO){return function(bP){try{(bO(null))(bP);}catch(bQ){bP.k({$:1,$0:bQ});}};};E.Combine=function(bO,bP){return E.Bind(bO,function(){return bP;});};E.Bind=function(bO,bP){return E.checkCancel(function(bQ){bO(G.New(function(bR){var bS;if(bR.$==0){bS=bR.$0;E.scheduler().Fork(function(){try{(bP(bS))(bQ);}catch(bT){bQ.k({$:1,$0:bT});}});}else E.scheduler().Fork(function(){bQ.k(bR);});},bQ.ct));});};E.Zero=function(){I.$cctor();return I.Zero;};E.Return=function(bO){return function(bP){bP.k({$:0,$0:bO});};};E.checkCancel=function(bO){return function(bP){if(bP.ct.c)E.cancel(bP);else bO(bP);};};E.cancel=function(bO){bO.k({$:2,$0:new _4.New(bO.ct)});};E.defCTS=function(){I.$cctor();return I.defCTS;};E.scheduler=function(){I.$cctor();return I.scheduler;};E.Register=function(bO,bP){var bQ;return bO===E.noneCT()?{Dispose:function(){return null;}}:(bQ=bO.r.push(bP)-1,{Dispose:function(){return M.set(bO.r,bQ,a.ignore);}});};E.noneCT=function(){I.$cctor();return I.noneCT;};I.$cctor=function(){I.$cctor=a.ignore;I.noneCT=F.New(false,[]);I.scheduler=new H.New();I.defCTS=[new Q.New()];I.Zero=E.Return();I.GetCT=function(bO){bO.k({$:0,$0:bO.ct});};};K=J.T=bH.Class({Dispose:function(){if(this.d)this.d(this);},Current:function(){return this.c;},Current0:function(){return this.c;},MoveNext:function(){return this.n(this);}},j,K);K.New=bH.Ctor(function(bO,bP,bQ,bR){j.New.call(this);this.s=bO;this.c=bP;this.n=bQ;this.d=bR;},K);J.Get0=function(bO){return bO instanceof a.Array?J.ArrayEnumerator(bO):bz.Equals(typeof bO,"string")?J.StringEnumerator(bO):"GetEnumerator0"in bO?bO.GetEnumerator0():bO.GetEnumerator();};J.Get=function(bO){return bO instanceof a.Array?J.ArrayEnumerator(bO):bz.Equals(typeof bO,"string")?J.StringEnumerator(bO):bO.GetEnumerator();};J.StringEnumerator=function(bO){return new K.New(0,null,function(bP){var bQ;bQ=bP.s;return bQ<bO.length&&(bP.c=bO[bQ],bP.s=bQ+1,true);},void 0);};J.ArrayEnumerator=function(bO){return new K.New(0,null,function(bP){var bQ;bQ=bP.s;return bQ<M.length(bO)&&(bP.c=M.get(bO,bQ),bP.s=bQ+1,true);},void 0);};L.Undefined={$:0};M.splitInto=function(bO,bP){var bQ,bR,bS,bT,bU,bV,bW,bX,bY;if(bO<=0)B.FailWith("Count must be positive");bR=M.length(bP);if(bR===0)return[];else{bS=bz.Compare(bO,bR)===-1?bO:bR;bT=M.create(bS,null);bU=bR/bS>>0;bQ=0;for(bV=0,bW=bR%bS-1;bV<=bW;bV++){bT[bV]=M.sub(bP,bQ,bU+1);bQ=bQ+bU+1;}for(bX=bR%bS,bY=bS-1;bX<=bY;bX++){bT[bX]=M.sub(bP,bQ,bU);bQ=bQ+bU;}return bT;}};M.contains=function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=M.length(bP);while(bQ&&bR<bT)if(bz.Equals(bP[bR],bO))bQ=false;else bR=bR+1;return!bQ;};M.tryFindBack=function(bO,bP){var bQ,bR,bS;bQ=null;bR=bP.length-1;while(bR>=0&&bQ==null){bS=bP[bR];if(bO(bS))bQ={$:1,$0:bS};bR=bR-1;}return bQ;};M.tryFindIndexBack=function(bO,bP){var bQ,bR;bQ=null;bR=bP.length-1;while(bR>=0&&bQ==null){bO(M.get(bP,bR))?bQ={$:1,$0:bR}:void 0;bR=bR-1;}return bQ;};M.mapFold=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bS=new a.Array(bQ.length);bR=bP;for(bT=0,bU=bQ.length-1;bT<=bU;bT++){bV=bO(bR,bQ[bT]);bS[bT]=bV[0];bR=bV[1];}return[bS,bR];};M.mapFoldBack=function(bO,bP,bQ){var bR,bS,bT,bU,bV,bW,bX,bY;bT=new a.Array(bP.length);bR=bQ;bU=bP.length;for(bV=1,bW=bU;bV<=bW;bV++){bX=bU-bV;bY=bO(bP[bX],bR);bT[bX]=bY[0];bR=bY[1];}return[bT,bR];};M.mapInPlace=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bP[bQ]=bO(bP[bQ]);};M.mapiInPlace=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bP[bQ]=bO(bQ,bP[bQ]);return bP;};M.sortInPlaceByDescending=function(bO,bP){M.mapInPlace(function(bQ){return bQ[0];},M.mapiInPlace(function(bQ,bR){return[bR,[bO(bR),bQ]];},bP).sort(function(bQ,bR){return-bz.Compare(bQ[1],bR[1]);}));};N.tryHead=function(bO){var bP;bP=J.Get(bO);try{return bP.MoveNext()?{$:1,$0:bP.Current()}:null;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.tryItem=function(bO,bP){var bQ,bR,bS;if(bO<0)return null;else{bQ=0;bR=J.Get(bP);try{bS=true;while(bS&&bQ<=bO)if(bR.MoveNext())bQ=bQ+1;else bS=false;return bS?{$:1,$0:bR.Current()}:null;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}}};N.tryLast=function(bO){var bP,bQ;bP=J.Get(bO);try{if(bP.MoveNext()){while(bP.MoveNext());bQ={$:1,$0:bP.Current()};}else bQ=null;return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.chunkBySize=function(bO,bP){bO<=0?B.FailWith("Chunk size must be positive"):void 0;return{GetEnumerator:function(){var bQ;bQ=J.Get(bP);return new K.New(true,null,function(bR){var bS;if(bR.s&&bQ.MoveNext()){bS=[bQ.Current()];while(bR.s&&M.length(bS)<bO)if(bQ.MoveNext())bS.push(bQ.Current());else bR.s=false;bR.c=bS;return true;}else return false;},function(){bQ.Dispose();});}};};M.countBy=function(bO,bP){var bQ,bR,bS,bT,bU;bQ=new _0.New$5();bR=[];for(bS=0,bT=M.length(bP)-1;bS<=bT;bS++){bU=bO(bP[bS]);if(bQ.ContainsKey(bU))bQ.set_Item(bU,bQ.get_Item(bU)+1);else{bR.push(bU);bQ.Add(bU,1);}}M.mapInPlace(function(bV){return[bV,bQ.get_Item(bV)];},bR);return bR;};N.except=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=J.Get(bP);bR=new bg.New$2(bO);return new K.New(null,null,function(bS){var bT,bU;if(bQ.MoveNext()){bT=bQ.Current();bU=bR.Add(bT);while(!bU&&bQ.MoveNext()){bT=bQ.Current();bU=bR.Add(bT);}return bU&&(bS.c=bT,true);}else return false;},function(){bQ.Dispose();});}};};O.skip=function(bO,bP){var bQ,bR,bS;bQ=bP;for(bR=1,bS=bO;bR<=bS;bR++)if(bQ.$==0)B.FailWith("Input list too short.");else bQ=bQ.$1;return bQ;};M.groupBy=function(bO,bP){var bQ,bR,bS,bT,bU,bV;bQ=new _0.New$5();bR=[];for(bS=0,bT=M.length(bP)-1;bS<=bT;bS++){bU=bP[bS];bV=bO(bU);if(bQ.ContainsKey(bV))bQ.get_Item(bV).push(bU);else{bR.push(bV);bQ.Add(bV,[bU]);}}M.mapInPlace(function(bW){return[bW,bQ.get_Item(bW)];},bR);return bR;};N.insufficient=function(){return B.FailWith("The input sequence has an insufficient number of elements.");};N.last=function(bO){var bP,bQ;bP=J.Get(bO);try{if(!bP.MoveNext())bQ=N.insufficient();else{while(bP.MoveNext());bQ=bP.Current();}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.contains=function(bO,bP){var bQ,bR;bQ=J.Get(bP);try{bR=false;while(!bR&&bQ.MoveNext())bR=bz.Equals(bQ.Current(),bO);return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};O.skipWhile=function(bO,bP){var bQ;bQ=bP;while(!(bQ.$==0)&&bO(O.head(bQ)))bQ=O.tail(bQ);return bQ;};N.nonNegative=function(){return B.FailWith("The input must be non-negative.");};M.transposeArray=function(bO){var bP,bQ,bR,bS,bT,bU,bV,bW,bX;bP=M.length(bO);if(bP===0)return[];else{bQ=M.length(M.get(bO,0));for(bR=1,bS=bP-1;bR<=bS;bR++)if(bQ!==M.length(M.get(bO,bR)))B.FailWith("The arrays have different lengths.");bT=new a.Array(bQ);for(bU=0,bV=bQ-1;bU<=bV;bU++){bT[bU]=new a.Array(bP);for(bW=0,bX=bP-1;bW<=bX;bW++)bT[bU][bW]=M.get(M.get(bO,bW),bU);}return bT;}};M.checkBounds=function(bO,bP){if(bP<0||bP>=bO.length)B.FailWith("Index was outside the bounds of the array.");};M.checkBounds2D=function(bO,bP,bQ){if(bP<0||bQ<0||bP>=bO.length||bQ>=(bO.length?bO[0].length:0))throw new _3.New();};M.checkRange=function(bO,bP,bQ){if(bQ<0||bP<0||bO.length<bP+bQ)B.FailWith("Index was outside the bounds of the array.");};M.set=function(bO,bP,bQ){M.checkBounds(bO,bP);bO[bP]=bQ;};M.get=function(bO,bP){M.checkBounds(bO,bP);return bO[bP];};M.sub=function(bO,bP,bQ){M.checkRange(bO,bP,bQ);return bO.slice(bP,bP+bQ);};M.setSub=function(bO,bP,bQ,bR){var bS,bT;for(bS=0,bT=bQ-1;bS<=bT;bS++)M.set(bO,bP+bS,M.get(bR,bS));};M.get2D=function(bO,bP,bQ){M.checkBounds2D(bO,bP,bQ);return bO[bP][bQ];};M.set2D=function(bO,bP,bQ,bR){M.checkBounds2D(bO,bP,bQ);bO[bP][bQ]=bR;};M.zeroCreate2D=function(bO,bP){var bQ;bQ=M.init(bO,function(){return M.create(bP,null);});bQ.dims=2;return bQ;};M.sub2D=function(bO,bP,bQ,bR,bS){var bT,bU,bV,bW,bX,bY,bZ;bT=bR<0?0:bR;bU=bS<0?0:bS;bV=M.zeroCreate2D(bT,bU);for(bW=0,bX=bT-1;bW<=bX;bW++){for(bY=0,bZ=bU-1;bY<=bZ;bY++)M.set2D(bV,bW,bY,M.get2D(bO,bP+bW,bQ+bY));}return bV;};M.setSub2D=function(bO,bP,bQ,bR,bS,bT){var bU,bV,bW,bX;for(bU=0,bV=bR-1;bU<=bV;bU++){for(bW=0,bX=bS-1;bW<=bX;bW++)M.set2D(bO,bP+bU,bQ+bW,M.get2D(bT,bU,bW));}};M.length=function(bO){return bO.dims===2?bO.length*bO.length:bO.length;};b.checkThis=function(bO){return bz.Equals(bO,null)?B.InvalidOp("The initialization of an object or value resulted in an object or value being accessed recursively before it was fully initialized."):bO;};M.binarySearch=function(bO,bP,bQ,bR){function bS(bT,bU){var bV,bW;while(true)if(bT>bU)return~bT;else{bV=(bT+bU)/2>>0;bW=bP(M.get(bO,bV));if(bT===bU)return bW===0?bT:bW>0?~(bT+1):~bT;else if(bW<=0)bU=bV;else bT=bV+1;}}if(bQ<0)throw new _6.New("index","Non-negative number required.");else null;if(bR>M.length(bO))throw new _5.New$2("Offset and length were out of bounds for the array or count is greater than the number of elements from index to the end of the source collection.");else null;if(bR<bQ)throw new _6.New("length","Non-negative number required.");else null;return bS(bQ,bR-1);};M.binarySearchComparer=function(bO){return bO.CompareTo0?function(bP){return bO.CompareTo0(bP);}:function(bP){if(bP.CompareTo0)return-bP.CompareTo0(bO);else throw new _8.New$2("Failed to compare two elements in the array.",new _5.New$2("At least one object must implement IComparable."));};};M.sortInternal=function(bO,bP,bQ,bR,bS){function bT(bV,bW){var bX,bY,bZ,b0;bY=bO[bW];bX=bV-1;for(bZ=bV,b0=bW-1;bZ<=b0;bZ++)if(bR(bO[bZ],bY)<0){bX=bX+1;bS(bX,bZ);}if(bR(bO[bW],bO[bX+1])<0)bS(bX+1,bW);return bX+1;}function bU(bV,bW){var bX;while(true)if(bV<bW){bX=bT(bV,bW);bU(bV,bX-1);bV=bX+1;}else return null;}bU(bP,bP+bQ-1);};M.sortSub=function(bO,bP,bQ,bR){M.sortInternal(bO,bP,bQ,bR,function(bS,bT){var bU;bU=bO[bS];bO[bS]=bO[bT];bO[bT]=bU;});};M.sortByKeys=function(bO,bP,bQ,bR,bS){M.sortInternal(bO,bQ,bR,bS,function(bT,bU){var bV,bW;bV=bO[bT];bO[bT]=bO[bU];bO[bU]=bV;bW=bP[bT];bP[bT]=bP[bU];bP[bU]=bW;});};M.clear=function(bO,bP,bQ){var bR,bS;if(bO==null)throw new _7.New$1("array");else void 0;if(bP<0||bQ<0||bP+bQ>M.length(bO))throw new _3.New();else void 0;for(bR=bP,bS=bP+bQ-1;bR<=bS;bR++)bO[bR]=typeof bO[bR]=="number"?0:null;};M.constrainedCopy=function(bO,bP,bQ,bR,bS){if(bO===bQ&&bR<=bP+bS)M.blit(M.init(bS,function(bT){return M.get(bO,bP+bT);}),0,bQ,bR,bS);else M.blit(bO,bP,bQ,bR,bS);};M.findIndexBound=function(bO,bP,bQ,bR){function bS(bT,bU){while(true)if(bU===bT)return -1;else if(bR(M.get(bO,bU)))return bU;else bU=bU+1;}if(bO==null)throw new _7.New$1("array");else null;if(bR==null)throw new _7.New$1("match");else null;if(bP<0)throw new _6.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bQ<0||bP+bQ>M.length(bO))throw new _6.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;return bS(bP+bQ,bP);};M.findLastIndexBound=function(bO,bP,bQ,bR){function bS(bT){while(true)if(bT<bP)return -1;else if(bR(M.get(bO,bT)))return bT;else bT=bT-1;}if(bO==null)throw new _7.New$1("array");else null;if(bR==null)throw new _7.New$1("match");else null;if(bP<0)throw new _6.New("startIndex","Index was out of range. Must be non-negative and less than the size of the collection.");else null;if(bQ<0||bP+bQ>M.length(bO))throw new _6.New("count","Count must be positive and count must refer to a location within the string/array/collection.");else null;return bS(bP+bQ-1);};M.reverse=function(bO,bP,bQ){var bR;bR=M.sub(bO,bP,bQ).slice().reverse();M.blit(bR,0,bO,bP,M.length(bR));};M.sum=function(bO){var bP,bQ;bP=0;bQ=0;for(;bQ<bO.length;bQ++)bP+=bO[bQ];return bP;};M.sumBy=function(bO,bP){var bQ,bR;bQ=0;bR=0;for(;bR<bP.length;bR++)bQ+=bO(bP[bR]);return bQ;};M.allPairs=function(bO,bP){var bQ,bR,bS,bT,bU,bV,bW;bQ=bO.length;bR=bP.length;bS=new a.Array(bQ*bR);for(bT=0,bU=bQ-1;bT<=bU;bT++){for(bV=0,bW=bR-1;bV<=bW;bV++)bS[bT*bR+bV]=[bO[bT],bP[bV]];}return bS;};M.average=function(bO){return a.Number(M.sum(bO))/bO.length;};M.averageBy=function(bO,bP){return a.Number(M.sumBy(bO,bP))/bP.length;};M.blit=function(bO,bP,bQ,bR,bS){var bT,bU;M.checkRange(bO,bP,bS);M.checkRange(bQ,bR,bS);for(bT=0,bU=bS-1;bT<=bU;bT++)bQ[bR+bT]=bO[bP+bT];};M.choose=function(bO,bP){var bQ,bR,bS,bT;bQ=[];for(bR=0,bS=bP.length-1;bR<=bS;bR++){bT=bO(bP[bR]);if(bT==null);else bQ.push(bT.$0);}return bQ;};M.collect=function(bO,bP){return a.Array.prototype.concat.apply([],M.map(bO,bP));};M.concat=function(bO){return a.Array.prototype.concat.apply([],M.ofSeq(bO));};M.create=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bO);for(bR=0,bS=bO-1;bR<=bS;bR++)bQ[bR]=bP;return bQ;};M.exists=function(bO,bP){var bQ,bR,bS,bT;bQ=false;bR=0;bT=M.length(bP);while(!bQ&&bR<bT)if(bO(bP[bR]))bQ=true;else bR=bR+1;return bQ;};M.exists2=function(bO,bP,bQ){var bR,bS,bT,bU;M.checkLength(bP,bQ);bR=false;bS=0;bU=M.length(bP);while(!bR&&bS<bU)if(bO(bP[bS],bQ[bS]))bR=true;else bS=bS+1;return bR;};M.fill=function(bO,bP,bQ,bR){var bS,bT;M.checkRange(bO,bP,bQ);for(bS=bP,bT=bP+bQ-1;bS<=bT;bS++)bO[bS]=bR;};M.filter=function(bO,bP){var bQ,bR,bS;bQ=[];for(bR=0,bS=bP.length-1;bR<=bS;bR++)if(bO(bP[bR]))bQ.push(bP[bR]);return bQ;};M.find=function(bO,bP){var bQ;bQ=M.tryFind(bO,bP);return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};M.findIndex=function(bO,bP){var bQ;bQ=M.tryFindIndex(bO,bP);return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};M.fold=function(bO,bP,bQ){var bR,bS,bT;bR=bP;for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR=bO(bR,bQ[bS]);return bR;};M.fold2=function(bO,bP,bQ,bR){var bS,bT,bU;M.checkLength(bQ,bR);bS=bP;for(bT=0,bU=bQ.length-1;bT<=bU;bT++)bS=bO(bS,bQ[bT],bR[bT]);return bS;};M.foldBack=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bR=bQ;bT=bP.length;for(bU=1,bV=bT;bU<=bV;bU++)bR=bO(bP[bT-bU],bR);return bR;};M.foldBack2=function(bO,bP,bQ,bR){var bS,bT,bU,bV,bW;M.checkLength(bP,bQ);bU=bP.length;bT=bR;for(bV=1,bW=bU;bV<=bW;bV++)bT=bO(bP[bU-bV],bQ[bU-bV],bT);return bT;};M.forall=function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=M.length(bP);while(bQ&&bR<bT)if(bO(bP[bR]))bR=bR+1;else bQ=false;return bQ;};M.forall2=function(bO,bP,bQ){var bR,bS,bT,bU;M.checkLength(bP,bQ);bR=true;bS=0;bU=M.length(bP);while(bR&&bS<bU)if(bO(bP[bS],bQ[bS]))bS=bS+1;else bR=false;return bR;};M.init=function(bO,bP){var bQ,bR,bS;if(bO<0)B.FailWith("Negative size given.");else null;bQ=new a.Array(bO);for(bR=0,bS=bO-1;bR<=bS;bR++)bQ[bR]=bP(bR);return bQ;};M.iter=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bO(bP[bQ]);};M.iter2=function(bO,bP,bQ){var bR,bS;M.checkLength(bP,bQ);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bO(bP[bR],bQ[bR]);};M.iteri=function(bO,bP){var bQ,bR;for(bQ=0,bR=bP.length-1;bQ<=bR;bQ++)bO(bQ,bP[bQ]);};M.iteri2=function(bO,bP,bQ){var bR,bS;M.checkLength(bP,bQ);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bO(bR,bP[bR],bQ[bR]);};M.map=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR]=bO(bP[bR]);return bQ;};M.map2=function(bO,bP,bQ){var bR,bS,bT;M.checkLength(bP,bQ);bR=new a.Array(bQ.length);for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR[bS]=bO(bP[bS],bQ[bS]);return bR;};M.mapi=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bR]=bO(bR,bP[bR]);return bQ;};M.mapi2=function(bO,bP,bQ){var bR,bS,bT;M.checkLength(bP,bQ);bR=new a.Array(bP.length);for(bS=0,bT=bP.length-1;bS<=bT;bS++)bR[bS]=bO(bS,bP[bS],bQ[bS]);return bR;};M.max=function(bO){var bP,bQ,bR,bS;M.nonEmpty(bO);bP=bO[0];for(bQ=1,bR=bO.length-1;bQ<=bR;bQ++){bS=bO[bQ];if(bz.Compare(bS,bP)===1)bP=bS;}return bP;};M.maxBy=function(bO,bP){var bQ,bR,bS,bT,bU,bV;M.nonEmpty(bP);bQ=bP[0];bR=bO(bQ);for(bS=1,bT=bP.length-1;bS<=bT;bS++){bU=bP[bS];bV=bO(bU);if(bz.Compare(bV,bR)===1){bQ=bU;bR=bV;}}return bQ;};M.min=function(bO){var bP,bQ,bR,bS;M.nonEmpty(bO);bP=bO[0];for(bQ=1,bR=bO.length-1;bQ<=bR;bQ++){bS=bO[bQ];if(bz.Compare(bS,bP)===-1)bP=bS;}return bP;};M.minBy=function(bO,bP){var bQ,bR,bS,bT,bU,bV;M.nonEmpty(bP);bQ=bP[0];bR=bO(bQ);for(bS=1,bT=bP.length-1;bS<=bT;bS++){bU=bP[bS];bV=bO(bU);if(bz.Compare(bV,bR)===-1){bQ=bU;bR=bV;}}return bQ;};M.ofList=function(bO){var bP,bQ;bQ=[];bP=bO;while(!(bP.$==0)){bQ.push(O.head(bP));bP=O.tail(bP);}return bQ;};M.ofSeq=function(bO){var bP,bQ;if(bO instanceof a.Array)return bO.slice();else if(bO instanceof bm)return M.ofList(bO);else{bP=[];bQ=J.Get(bO);try{while(bQ.MoveNext())bP.push(bQ.Current());return bP;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}}};M.partition=function(bO,bP){var bQ,bR,bS,bT;bQ=[];bR=[];for(bS=0,bT=bP.length-1;bS<=bT;bS++)if(bO(bP[bS]))bQ.push(bP[bS]);else bR.push(bP[bS]);return[bQ,bR];};M.permute=function(bO,bP){var bQ,bR,bS;bQ=new a.Array(bP.length);for(bR=0,bS=bP.length-1;bR<=bS;bR++)bQ[bO(bR)]=bP[bR];return bQ;};M.pick=function(bO,bP){var bQ;bQ=M.tryPick(bO,bP);return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};M.reduce=function(bO,bP){var bQ,bR,bS;M.nonEmpty(bP);bQ=bP[0];for(bR=1,bS=bP.length-1;bR<=bS;bR++)bQ=bO(bQ,bP[bR]);return bQ;};M.reduceBack=function(bO,bP){var bQ,bR,bS,bT,bU;M.nonEmpty(bP);bS=bP.length;bR=bP[bS-1];for(bT=2,bU=bS;bT<=bU;bT++)bR=bO(bP[bS-bT],bR);return bR;};M.scan=function(bO,bP,bQ){var bR,bS,bT;bR=new a.Array(1+bQ.length);bR[0]=bP;for(bS=0,bT=bQ.length-1;bS<=bT;bS++)bR[bS+1]=bO(bR[bS],bQ[bS]);return bR;};M.scanBack=function(bO,bP,bQ){var bR,bS,bT,bU;bR=bP.length;bS=new a.Array(1+bR);bS[bR]=bQ;for(bT=0,bU=bR-1;bT<=bU;bT++)bS[bR-bT-1]=bO(bP[bR-bT-1],bS[bR-bT]);return bS;};M.sort=function(bO){return M.map(function(bP){return bP[0];},M.mapi(function(bP,bQ){return[bQ,bP];},bO).sort(bz.Compare));};M.sortBy=function(bO,bP){return M.map(function(bQ){return bQ[0];},M.mapi(function(bQ,bR){return[bR,[bO(bR),bQ]];},bP).sort(function(bQ,bR){return bz.Compare(bQ[1],bR[1]);}));};M.sortInPlace=function(bO){M.mapInPlace(function(bP){return bP[0];},M.mapiInPlace(function(bP,bQ){return[bQ,bP];},bO).sort(bz.Compare));};M.sortInPlaceBy=function(bO,bP){M.mapInPlace(function(bQ){return bQ[0];},M.mapiInPlace(function(bQ,bR){return[bR,[bO(bR),bQ]];},bP).sort(function(bQ,bR){return bz.Compare(bQ[1],bR[1]);}));};M.sortInPlaceWith=function(bO,bP){bP.sort(bO);};M.sortWith=function(bO,bP){return bP.slice().sort(bO);};M.sortByDescending=function(bO,bP){return M.map(function(bQ){return bQ[0];},M.mapi(function(bQ,bR){return[bR,[bO(bR),bQ]];},bP).sort(function(bQ,bR){return-bz.Compare(bQ[1],bR[1]);}));};M.sortDescending=function(bO){return M.map(function(bP){return bP[0];},M.mapi(function(bP,bQ){return[bQ,bP];},bO).sort(function(bP,bQ){return-bz.Compare(bP,bQ);}));};M.transpose=function(bO){return bO instanceof a.Array?M.transposeArray(bO):M.transposeArray(M.ofSeq(bO));};M.tryFind=function(bO,bP){var bQ,bR;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bO(bP[bR])?bQ={$:1,$0:bP[bR]}:void 0;bR=bR+1;}return bQ;};M.tryFindIndex=function(bO,bP){var bQ,bR;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bO(bP[bR])?bQ={$:1,$0:bR}:void 0;bR=bR+1;}return bQ;};M.tryHead=function(bO){return bO.length===0?null:{$:1,$0:bO[0]};};M.tryItem=function(bO,bP){return bP.length<=bO||bO<0?null:{$:1,$0:bP[bO]};};M.tryLast=function(bO){var bP;bP=bO.length;return bP===0?null:{$:1,$0:bO[bP-1]};};M.tryPick=function(bO,bP){var bQ,bR,bS;bQ=null;bR=0;while(bR<bP.length&&bQ==null){bS=bO(bP[bR]);if(bS!=null&&bS.$==1)bQ=bS;bR=bR+1;}return bQ;};M.unzip=function(bO){var bP,bQ,bR,bS,bT;bP=[];bQ=[];for(bR=0,bS=bO.length-1;bR<=bS;bR++){bT=bO[bR];bP.push(bT[0]);bQ.push(bT[1]);}return[bP,bQ];};M.unzip3=function(bO){var bP,bQ,bR,bS,bT,bU;bP=[];bQ=[];bR=[];for(bS=0,bT=bO.length-1;bS<=bT;bS++){bU=bO[bS];bP.push(bU[0]);bQ.push(bU[1]);bR.push(bU[2]);}return[bP,bQ,bR];};M.zip=function(bO,bP){var bQ,bR,bS;M.checkLength(bO,bP);bQ=M.create(bO.length,null);for(bR=0,bS=bO.length-1;bR<=bS;bR++)bQ[bR]=[bO[bR],bP[bR]];return bQ;};M.zip3=function(bO,bP,bQ){var bR,bS,bT;M.checkLength(bO,bP);M.checkLength(bP,bQ);bR=M.create(bO.length,null);for(bS=0,bT=bO.length-1;bS<=bT;bS++)bR[bS]=[bO[bS],bP[bS],bQ[bS]];return bR;};M.chunkBySize=function(bO,bP){return M.ofSeq(N.chunkBySize(bO,bP));};M.compareWith=function(bO,bP,bQ){return N.compareWith(bO,bP,bQ);};M.distinct=function(bO){return M.ofSeq(N.distinct(bO));};M.distinctBy=function(bO,bP){return M.ofSeq(N.distinctBy(bO,bP));};M.except=function(bO,bP){return M.ofSeq(N.except(bO,bP));};M.findBack=function(bO,bP){var bQ;bQ=M.tryFindBack(bO,bP);return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};M.findIndexBack=function(bO,bP){var bQ;bQ=M.tryFindIndexBack(bO,bP);return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};M.head=function(bO){M.nonEmpty(bO);return bO[0];};M.last=function(bO){M.nonEmpty(bO);return bO[bO.length-1];};M.map3=function(bO,bP,bQ,bR){var bS,bT,bU;M.checkLength(bP,bQ);M.checkLength(bP,bR);bS=new a.Array(bR.length);for(bT=0,bU=bR.length-1;bT<=bU;bT++)bS[bT]=bO(bP[bT],bQ[bT],bR[bT]);return bS;};M.pairwise=function(bO){return M.ofSeq(N.pairwise(bO));};M.replicate=function(bO,bP){return M.create(bO,bP);};M.indexed=function(bO){return M.mapi(function(bP,bQ){return[bP,bQ];},bO);};M.skip=function(bO,bP){return bO<0?N.nonNegative():bO>bP.length?N.insufficient():bP.slice(bO);};M.skipWhile=function(bO,bP){var bQ,bR;bR=bP.length;bQ=0;while(bQ<bR&&bO(bP[bQ]))bQ=bQ+1;return bP.slice(bQ);};M.tail=function(bO){return M.skip(1,bO);};M.take=function(bO,bP){return bO<0?N.nonNegative():bO>bP.length?N.insufficient():bP.slice(0,bO);};M.takeWhile=function(bO,bP){var bQ,bR;bR=bP.length;bQ=0;while(bQ<bR&&bO(bP[bQ]))bQ=bQ+1;return bP.slice(0,bQ);};M.exactlyOne=function(bO){return bO.length===1?bO[0]:B.FailWith("The input does not have precisely one element.");};M.tryExactlyOne=function(bO){return bO.length===1?{$:1,$0:bO[0]}:null;};M.unfold=function(bO,bP){return M.ofSeq(N.unfold(bO,bP));};M.windowed=function(bO,bP){return M.ofSeq(N.windowed(bO,bP));};M.splitAt=function(bO,bP){return[M.take(bO,bP),M.skip(bO,bP)];};M.nonEmpty=function(bO){if(bO.length===0)B.FailWith("The input array was empty.");};M.checkLength=function(bO,bP){if(bO.length!==bP.length)B.FailWith("The arrays have different lengths.");};P.init=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bR=M.zeroCreate2D(bO,bP);for(bS=0,bT=bO-1;bS<=bT;bS++){for(bU=0,bV=bP-1;bU<=bV;bU++)M.set2D(bR,bS,bU,bQ(bS,bU));}return bR;};P.iter=function(bO,bP){var bQ,bR,bS,bT,bU,bV;bQ=bP.length;bR=bP.length?bP[0].length:0;for(bS=0,bT=bQ-1;bS<=bT;bS++){for(bU=0,bV=bR-1;bU<=bV;bU++)bO(M.get2D(bP,bS,bU));}};P.iteri=function(bO,bP){var bQ,bR,bS,bT,bU,bV;bQ=bP.length;bR=bP.length?bP[0].length:0;for(bS=0,bT=bQ-1;bS<=bT;bS++){for(bU=0,bV=bR-1;bU<=bV;bU++)bO(bS,bU,M.get2D(bP,bS,bU));}};P.map=function(bO,bP){return P.init(bP.length,bP.length?bP[0].length:0,function(bQ,bR){return bO(M.get2D(bP,bQ,bR));});};P.mapi=function(bO,bP){return P.init(bP.length,bP.length?bP[0].length:0,function(bQ,bR){return bO(bQ,bR,M.get2D(bP,bQ,bR));});};P.copy=function(bO){return P.init(bO.length,bO.length?bO[0].length:0,function(bP,bQ){return M.get2D(bO,bP,bQ);});};Q=b.CancellationTokenSource=bH.Class({CancelAfter:function(bO){var bP,bQ;bP=this;if(!this.c){bQ=this.pending;bQ==null?void 0:a.clearTimeout(bQ.$0);this.pending={$:1,$0:a.setTimeout(function(){bP.Cancel$1();},bO)};}},Cancel:function(bO){if(!bO)this.Cancel$1();else if(!this.c){this.c=true;M.iter(function(bP){bP();},this.r);}},Cancel$1:function(){var bO;if(!this.c){this.c=true;bO=M.choose(function(bP){try{bP();return null;}catch(bQ){return{$:1,$0:bQ};}},this.r);if(M.length(bO)>0)throw new _9.New$3(bO);else void 0;}}},j,Q);Q.CreateLinkedTokenSource=function(bO,bP){return Q.CreateLinkedTokenSource$1([bO,bP]);};Q.CreateLinkedTokenSource$1=function(bO){var bP;bP=new Q.New();M.iter(function(bQ){function bR(bS){return bP.Cancel$1();}E.Register(bQ,function(){bR();});},bO);return bP;};Q.New=bH.Ctor(function(){j.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},Q);R.ToBinaryStr=function(bO){return"0b"+bv.concat("",M.map(R.ToBin,bO.slice().reverse()));};R.ToBin=function(bO){var bP;function bQ(bR,bS){return function(bT){return bR/B.toInt(bN.pow(2,7-bT))>>0===1?[bR%B.toInt(bN.pow(2,7-bT)),bS+"1"]:[bR,bS+"0"];};}return(bP=O.ofSeq(B.range(0,7)),N.fold(function(bR,bS){return(function(bT){return bQ(bT[0],bT[1]);}(bR))(bS);},[B.toInt(bO),""],bP))[1];};S.IsWhiteSpace=function(bO){return bO.match(new a.RegExp("\\s"))!==null;};S.Parse=function(bO){return bO.length===1?bO:B.FailWith("String must be exactly one character long.");};S.IsUpper=function(bO){return bO>="A"&&bO<="Z";};S.IsLower=function(bO){return bO>="a"&&bO<="z";};S.IsLetterOrDigit=function(bO){return S.IsLetter(bO)||S.IsDigit(bO);};S.IsLetter=function(bO){return bO>="A"&&bO<="Z"||bO>="a"&&bO<="z";};S.IsDigit=function(bO){return bO>="0"&&bO<="9";};S.IsControl=function(bO){return bO>="\u0000"&&bO<="\u001f"||bO>="\u0080"&&bO<="\u009f";};S.GetNumericValue=function(bO){return bO>="0"&&bO<="9"?bO.charCodeAt()-"0".charCodeAt():-1;};T.observer=function(bO){return{OnCompleted:function(){return null;},OnError:function(){return null;},OnNext:bO};};U.LongTime=function(bO){return(new bL(bO)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});};U.ShortTime=function(bO){return(new bL(bO)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});};U.LongDate=function(bO){return(new bL(bO)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});};U.Parse=function(bO){var bP;bP=U.TryParse(bO);return bP!=null&&bP.$==1?bP.$0:B.FailWith("Failed to parse date string.");};U.TryParse=function(bO){var bP;bP=bL.parse(bO);return a.isNaN(bP)?null:{$:1,$0:bP};};U.AddMonths=function(bO,bP){var bQ;bQ=new bL(bO);return(new bL(bQ.getFullYear(),bQ.getMonth()+bP,bQ.getDate(),bQ.getHours(),bQ.getMinutes(),bQ.getSeconds(),bQ.getMilliseconds())).getTime();};U.AddYears=function(bO,bP){var bQ;bQ=new bL(bO);return(new bL(bQ.getFullYear()+bP,bQ.getMonth(),bQ.getDate(),bQ.getHours(),bQ.getMinutes(),bQ.getSeconds(),bQ.getMilliseconds())).getTime();};U.TimePortion=function(bO){var bP;bP=new bL(bO);return(((24*0+bP.getHours())*60+bP.getMinutes())*60+bP.getSeconds())*1000+bP.getMilliseconds();};U.DatePortion=function(bO){var bP;bP=new bL(bO);return(new bL(bP.getFullYear(),bP.getMonth(),bP.getDate())).getTime();};V.get_Now=function(){var bO;bO=new bL();return{d:bO.getTime(),o:-bO.getTimezoneOffset()};};V.get_DateTime=function(bO){return bO.d;};W.InvocationList=function(bO){return bO.$Invokes||[bO];};W.RemoveAll=function(bO,bP){var bQ;bQ=W.InvocationList(bO);if(M.length(W.InvocationList(bP))>1)B.FailWith("TODO: Remove multicast delegates");return bH.CreateDelegate(M.filter(function(bR){return!bz.Equals(bR,bP);},bQ));};W.Remove=function(bO,bP){var bQ,bR,bS,bT,bU,bV,bW;bS=W.InvocationList(bO);if(M.length(W.InvocationList(bP))>1)B.FailWith("TODO: Remove multicast delegates");bT=[];bR=false;for(bU=M.length(bS)-1,bV=0;bU>=bV;bU--){bW=M.get(bS,bU);if(!bR&&bH.DelegateEqual(bW,bP))bR=true;else bT.unshift(bW);}return bH.CreateDelegate(bT);};W.DelegateTarget=function(bO){var bP;return!bO?null:"$Target"in bO?bO.$Target:"$Invokes"in bO?(bP=bO.$Invokes,(M.get(bP,M.length(bP)-1))[1]):null;};X.getHashCode=function(bO,bP){return bO.CGetHashCode(bP);};X.equals=function(bO){return function(bP,bQ){return bO.CEquals(bP,bQ);};};X.alreadyAdded=function(){return B.FailWith("An item with the same key has already been added.");};X.notPresent=function(){return B.FailWith("The given key was not present in the dictionary.");};Y=t.KeyCollection=bH.Class({GetEnumerator$1:function(){return J.Get(N.map(function(bO){return bO.K;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},j,Y);Y.New=bH.Ctor(function(bO){j.New.call(this);this.d=bO;},Y);Z=t.ValueCollection=bH.Class({GetEnumerator$1:function(){return J.Get(N.map(function(bO){return bO.V;},this.d));},get_Count:function(){return this.d.count;},GetEnumerator0:function(){return this.GetEnumerator$1();},GetEnumerator:function(){return this.GetEnumerator$1();}},j,Z);Z.New=bH.Ctor(function(bO){j.New.call(this);this.d=bO;},Z);_0=t.Dictionary=bH.Class({remove:function(bO){var bP,bQ,bR,bS;bP=this;bQ=this.hash(bO);bR=this.data[bQ];return bR==null?false:(bS=M.filter(function(bT){return!bP.equals.apply(null,[(B.KeyValue(bT))[0],bO]);},bR),M.length(bS)<bR.length&&(this.count=this.count-1,this.data[bQ]=bS,true));},add:function(bO,bP){var bQ,bR,bS;bQ=this;bR=this.hash(bO);bS=this.data[bR];if(bS==null){this.count=this.count+1;this.data[bR]=new a.Array({K:bO,V:bP});}else{M.exists(function(bT){return bQ.equals.apply(null,[(B.KeyValue(bT))[0],bO]);},bS)?X.alreadyAdded():void 0;this.count=this.count+1;bS.push({K:bO,V:bP});}},set:function(bO,bP){var bQ,bR,bS,bT;bQ=this;bR=this.hash(bO);bS=this.data[bR];if(bS==null){this.count=this.count+1;this.data[bR]=new a.Array({K:bO,V:bP});}else{bT=M.tryFindIndex(function(bU){return bQ.equals.apply(null,[(B.KeyValue(bU))[0],bO]);},bS);bT==null?(this.count=this.count+1,bS.push({K:bO,V:bP})):bS[bT.$0]={K:bO,V:bP};}},get:function(bO){var bP,bQ;bP=this;bQ=this.data[this.hash(bO)];return bQ==null?X.notPresent():M.pick(function(bR){var bS;bS=B.KeyValue(bR);return bP.equals.apply(null,[bS[0],bO])?{$:1,$0:bS[1]}:null;},bQ);},get_Keys:function(){return new Y.New(this);},get_Values:function(){return new Z.New(this);},TryGetValue:function(bO,bP){var bQ,bR,bS;bQ=this;bR=this.data[this.hash(bO)];return bR==null?false:(bS=M.tryPick(function(bT){var bU;bU=B.KeyValue(bT);return bQ.equals.apply(null,[bU[0],bO])?{$:1,$0:bU[1]}:null;},bR),bS!=null&&bS.$==1&&(bP.set(bS.$0),true));},Remove:function(bO){return this.remove(bO);},GetEnumerator$1:function(){return J.Get0(this);},set_Item:function(bO,bP){this.set(bO,bP);},get_Item:function(bO){return this.get(bO);},ContainsKey:function(bO){var bP,bQ;bP=this;bQ=this.data[this.hash(bO)];return bQ==null?false:M.exists(function(bR){return bP.equals.apply(null,[(B.KeyValue(bR))[0],bO]);},bQ);},Clear:function(){this.data=[];this.count=0;},Add:function(bO,bP){this.add(bO,bP);},GetEnumerator:function(){return J.Get0(this);},GetEnumerator0:function(){return J.Get0(M.concat(d.GetFieldValues(this.data)));}},j,_0);_0.New=bH.Ctor(function(bO,bP){_0.New$6.call(this,bO,X.equals(bP),function(bQ){return X.getHashCode(bP,bQ);});},_0);_0.New$1=bH.Ctor(function(bO){_0.New$6.call(this,bO,bz.Equals,bz.Hash);},_0);_0.New$2=bH.Ctor(function(bO,bP){_0.New$3.call(this,bP);},_0);_0.New$3=bH.Ctor(function(bO){_0.New$6.call(this,[],X.equals(bO),function(bP){return X.getHashCode(bO,bP);});},_0);_0.New$4=bH.Ctor(function(bO){_0.New$5.call(this);},_0);_0.New$5=bH.Ctor(function(){_0.New$6.call(this,[],bz.Equals,bz.Hash);},_0);_0.New$6=bH.Ctor(function(bO,bP,bQ){var bR,bS;j.New.call(this);this.equals=bP;this.hash=bQ;this.count=0;this.data=[];bR=J.Get(bO);try{while(bR.MoveNext()){bS=bR.Current();this.set(bS.K,bS.V);}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}},_0);_1.withInner=function(bO,bP){var bQ;bQ=new e(bO);bQ.inner=bP;return bQ;};_2=b.MatchFailureException=bH.Class({},e,_2);_2.New=bH.Ctor(function(bO,bP,bQ){this.message=bO+" at "+bK(bP)+":"+bK(bQ);a.Object.setPrototypeOf(this,_2.prototype);},_2);_3=b.IndexOutOfRangeException=bH.Class({},e,_3);_3.New=bH.Ctor(function(){_3.New$1.call(this,"Index was outside the bounds of the array.");},_3);_3.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,_3.prototype);},_3);_4=b.OperationCanceledException=bH.Class({},e,_4);_4.New=bH.Ctor(function(bO){_4.New$1.call(this,"The operation was canceled.",null,bO);},_4);_4.New$1=bH.Ctor(function(bO,bP,bQ){this.message=bO;this.inner=bP;a.Object.setPrototypeOf(this,_4.prototype);this.ct=bQ;},_4);_5=b.ArgumentException=bH.Class({},e,_5);_5.New=bH.Ctor(function(bO,bP){_5.New$2.call(this,bP+"\nParameter name: "+bO);},_5);_5.New$1=bH.Ctor(function(){_5.New$2.call(this,"Value does not fall within the expected range.");},_5);_5.New$2=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,_5.prototype);},_5);_6=b.ArgumentOutOfRangeException=bH.Class({},e,_6);_6.New=bH.Ctor(function(bO,bP){this.message=bP+"\nParameter name: "+bO;a.Object.setPrototypeOf(this,_6.prototype);},_6);_6.New$1=bH.Ctor(function(bO){_6.New.call(this,bO,"Specified argument was out of the range of valid values.");},_6);_6.New$2=bH.Ctor(function(){this.message="Specified argument was out of the range of valid values.";a.Object.setPrototypeOf(this,_6.prototype);},_6);_7=b.ArgumentNullException=bH.Class({},e,_7);_7.New=bH.Ctor(function(bO,bP){this.message=bP+"\nParameter name: "+bO;a.Object.setPrototypeOf(this,_7.prototype);},_7);_7.New$1=bH.Ctor(function(bO){_7.New.call(this,bO,"Value cannot be null.");},_7);_7.New$2=bH.Ctor(function(){this.message="Value cannot be null.";a.Object.setPrototypeOf(this,_7.prototype);},_7);_8=b.InvalidOperationException=bH.Class({},e,_8);_8.New=bH.Ctor(function(bO){_8.New$2.call(this,bO,null);},_8);_8.New$1=bH.Ctor(function(){_8.New.call(this,"Operation is not valid due to the current state of the object.");},_8);_8.New$2=bH.Ctor(function(bO,bP){this.message=bO;this.inner=bP;a.Object.setPrototypeOf(this,_8.prototype);},_8);_9=b.AggregateException=bH.Class({},e,_9);_9.New=bH.Ctor(function(bO,bP){_9.New$4.call(this,bO,[bP]);},_9);_9.New$1=bH.Ctor(function(bO,bP){_9.New$4.call(this,bO,M.ofSeq(bP));},_9);_9.New$2=bH.Ctor(function(bO){_9.New$4.call(this,"One or more errors occurred.",M.ofSeq(bO));},_9);_9.New$3=bH.Ctor(function(bO){_9.New$4.call(this,"One or more errors occurred.",bO);},_9);_9.New$4=bH.Ctor(function(bO,bP){this.message=bO;a.Object.setPrototypeOf(this,_9.prototype);this.innerExceptions=bP;},_9);_=b.TimeoutException=bH.Class({},e,_);_.New=bH.Ctor(function(){_.New$1.call(this,"The operation has timed out.");},_);_.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,_.prototype);},_);$=b.FormatException=bH.Class({},e,$);$.New=bH.Ctor(function(){$.New$1.call(this,"One of the identified items was in an invalid format.");},$);$.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,$.prototype);},$);ba=b.OverflowException=bH.Class({},e,ba);ba.New=bH.Ctor(function(){ba.New$1.call(this,"Arithmetic operation resulted in an overflow.");},ba);ba.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,ba.prototype);},ba);bb=b.TaskCanceledException=bH.Class({},e,bb);bb.New=bH.Ctor(function(){bb.New$1.call(this,"A task was canceled.");},bb);bb.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,bb.prototype);},bb);bc=b.KeyNotFoundException=bH.Class({},e,bc);bc.New=bH.Ctor(function(){bc.New$1.call(this,"The given key was not present in the dictionary.");},bc);bc.New$1=bH.Ctor(function(bO){this.message=bO;a.Object.setPrototypeOf(this,bc.prototype);},bc);M.create2D=function(bO){var bP;bP=M.ofSeq(N.map(M.ofSeq,bO));bP.dims=2;return bP;};be.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bO){var bP,bQ;bP=bN.random()*16|0;bQ=bO=="x"?bP:bP&3|8;return bQ.toString(16);});};be.TryParseExact=function(bO,bP,bQ){try{bQ.set(be.ParseExact(bO,bP));return true;}catch(bR){return false;}};be.TryParse=function(bO,bP){try{bP.set(be.Parse(bO));return true;}catch(bQ){return false;}};be.ParseExact=function(bO,bP){var bQ,bR,bS,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3;function bT(b4){var b5,b6,b7,b8;for(b5=0,b6=35;b5<=b6;b5++){if(b5===8||(b5===13||(b5===18||b5===23)))b4[b5]!=="-"?be.ShapeError():void 0;else{b8=b4[b5];!("0"<=b8&&b8<="9"||"a"<=b8&&b8<="f")?be.ShapeError():void 0;}}return b4;}bU=bP.toUpperCase();if(bU==="N"){bV=bv.Trim(bO).toLowerCase();if(bV.length!==32)be.ShapeError();for(bW=0,bX=31;bW<=bX;bW++){bY=bV[bW];if(!("0"<=bY&&bY<="9"||"a"<=bY&&bY<="f"))be.ShapeError();}return bv.Substring(bV,0,8)+"-"+bv.Substring(bV,8,4)+"-"+bv.Substring(bV,12,4)+"-"+bv.Substring(bV,16,4)+"-"+bV.substring(20);}else if(bU==="D"){bQ=bv.Trim(bO).toLowerCase();bQ.length!==36?be.ShapeError():void 0;return bT(bQ);}else if(bU==="B"){bR=bv.Trim(bO).toLowerCase();bR.length!==38||bR[0]!=="{"||bR[17]!=="}"?be.ShapeError():void 0;return bT(bv.Substring(bR,1,36));}else if(bU==="P"){bS=bv.Trim(bO).toLowerCase();bS.length!==38||bS[0]!=="("||bS[17]!==")"?be.ShapeError():void 0;return bT(bv.Substring(bS,1,36));}else if(bU==="X"){bZ=bv.Trim(bO).toLowerCase();if(bZ.length!==68)be.ShapeError();for(b0=0,b1=67;b0<=b1;b0++){switch(b0){case 26:case 0:if(bZ[b0]!=="{")be.ShapeError();break;case 62:case 57:case 52:case 47:case 42:case 37:case 32:case 27:case 19:case 12:case 1:if(bZ[b0]!=="0")be.ShapeError();break;case 63:case 58:case 53:case 48:case 43:case 38:case 33:case 28:case 20:case 13:case 2:if(bZ[b0]!=="x")be.ShapeError();break;case 61:case 56:case 51:case 46:case 41:case 36:case 31:case 25:case 18:case 11:if(bZ[b0]!==",")be.ShapeError();break;case 67:case 66:if(bZ[b0]!=="{")be.ShapeError();break;default:b3=bZ[b0];if(!("0"<=b3&&b3<="9"||"a"<=b3&&b3<="f"))be.ShapeError();break;}}return bv.Substring(bZ,3,8)+"-"+bv.Substring(bZ,14,4)+"-"+bv.Substring(bZ,21,4)+"-"+bv.Substring(bZ,29,2)+bv.Substring(bZ,34,2)+"-"+bv.Substring(bZ,39,2)+bv.Substring(bZ,44,2)+bv.Substring(bZ,49,2)+bv.Substring(bZ,54,2)+bv.Substring(bZ,59,2)+bv.Substring(bZ,64,2);}else return be.FormatError();};be.Parse=function(bO){var bP,bQ,bR;try{return be.ParseExact(bO,"D");}catch(bS){try{bP=be.ParseExact(bO,"B");}catch(bT){try{bQ=be.ParseExact(bO,"P");}catch(bU){try{bR=be.ParseExact(bO,"N");}catch(bV){bR=be.ParseExact(bO,"X");}bQ=bR;}bP=bQ;}return bP;}};be.ToString=function(bO,bP){var bQ;bQ=bP.toUpperCase();return bQ==="N"?bv.Replace(bO,"-",""):bQ==="D"?bO:bQ==="B"?"{"+bO+"}":bQ==="P"?"("+bO+")":bQ==="X"?"{0x"+bv.Substring(bO,0,8)+",0x"+bv.Substring(bO,9,4)+",0x"+bv.Substring(bO,14,4)+",{0x"+bv.Substring(bO,19,2)+",0x"+bv.Substring(bO,21,2)+",0x"+bv.Substring(bO,24,2)+",0x"+bv.Substring(bO,26,2)+",0x"+bv.Substring(bO,28,2)+",0x"+bv.Substring(bO,30,2)+",0x"+bv.Substring(bO,32,2)+",0x"+bv.Substring(bO,34,2)+"}}":be.FormatError();};be.ParseError=function(){throw new $.New$1("Unrecognized Guid format.");};be.ShapeError=function(){throw new $.New$1("Guid should contain 32 digits with 4 dashes (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");};be.HexaError=function(){throw new $.New$1("Hexadecimal Guid printing not implemented by WebSharper.");};be.FormatError=function(){throw new $.New$1("Format String can be only \"D\", \"d\", \"N\", \"n\", \"P\", \"p\", \"B\", \"b\", \"X\" or \"x\".");};bf.concat=function(bO){var bP,bQ;bP=[];for(var bR in bO)bP.push.apply(bP,bO[bR]);return bP;};bg=t.HashSet=bH.Class({add:function(bO){var bP,bQ;bP=this.hash(bO);bQ=this.data[bP];return bQ==null?(this.data[bP]=[bO],this.count=this.count+1,true):this.arrContains(bO,bQ)?false:(bQ.push(bO),this.count=this.count+1,true);},arrRemove:function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=bP.length;while(bQ&&bR<bT)if(this.equals.apply(null,[bP[bR],bO])){bP.splice.apply(bP,[bR,1]);bQ=false;}else bR=bR+1;return!bQ;},arrContains:function(bO,bP){var bQ,bR,bS,bT;bQ=true;bR=0;bT=bP.length;while(bQ&&bR<bT)if(this.equals.apply(null,[bP[bR],bO]))bQ=false;else bR=bR+1;return!bQ;},UnionWith:function(bO){var bP;bP=J.Get(bO);try{while(bP.MoveNext())this.Add(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},SymmetricExceptWith:function(bO){var bP,bQ;bP=J.Get(bO);try{while(bP.MoveNext()){bQ=bP.Current();if(this.Contains(bQ))this.Remove(bQ);else this.Add(bQ);}}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},SetEquals:function(bO){var bP;bP=new bg.New$4(bO,this.equals,this.hash);return this.get_Count()===bP.get_Count()&&this.IsSupersetOf(bP);},RemoveWhere:function(bO){var bP,bQ,bR,bS,bT;bQ=bf.concat(this.data);bP=0;for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=bQ[bR];if(bO(bT))this.Remove(bT)?bP=bP+1:void 0;}return bP;},Remove:function(bO){var bP;bP=this.data[this.hash(bO)];return bP==null?false:this.arrRemove(bO,bP)&&(this.count=this.count-1,true);},Overlaps:function(bO){var bP;bP=this;return N.exists(function(bQ){return bP.Contains(bQ);},bO);},IsSupersetOf:function(bO){var bP;bP=this;return N.forall(function(bQ){return bP.Contains(bQ);},bO);},IsSubsetOf:function(bO){var bP;bP=new bg.New$4(bO,this.equals,this.hash);return M.forall(function(bQ){return bP.Contains(bQ);},bf.concat(this.data));},IsProperSupersetOf:function(bO){var bP;bP=M.ofSeq(bO);return this.count>M.length(bP)&&this.IsSupersetOf(bP);},IsProperSubsetOf:function(bO){var bP;bP=M.ofSeq(bO);return this.count<M.length(bP)&&this.IsSubsetOf(bP);},IntersectWith:function(bO){var bP,bQ,bR,bS,bT;bP=new bg.New$4(bO,this.equals,this.hash);bQ=bf.concat(this.data);for(bR=0,bS=bQ.length-1;bR<=bS;bR++){bT=bQ[bR];if(!bP.Contains(bT))this.Remove(bT);}},ExceptWith:function(bO){var bP;bP=J.Get(bO);try{while(bP.MoveNext())this.Remove(bP.Current());}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bO){var bP,bQ,bR,bS;bP=0;bQ=bf.concat(this.data);for(bR=0,bS=bQ.length-1;bR<=bS;bR++)M.set(bO,bR,bQ[bR]);},Contains:function(bO){var bP;bP=this.data[this.hash(bO)];return bP==null?false:this.arrContains(bO,bP);},Clear:function(){this.data=[];this.count=0;},Add:function(bO){return this.add(bO);},GetEnumerator:function(){return J.Get(bf.concat(this.data));},GetEnumerator0:function(){return J.Get(bf.concat(this.data));}},j,bg);bg.New=bH.Ctor(function(bO,bP){bg.New$4.call(this,bO,X.equals(bP),function(bQ){return X.getHashCode(bP,bQ);});},bg);bg.New$1=bH.Ctor(function(bO){bg.New$4.call(this,[],X.equals(bO),function(bP){return X.getHashCode(bO,bP);});},bg);bg.New$2=bH.Ctor(function(bO){bg.New$4.call(this,bO,bz.Equals,bz.Hash);},bg);bg.New$3=bH.Ctor(function(){bg.New$4.call(this,[],bz.Equals,bz.Hash);},bg);bg.New$4=bH.Ctor(function(bO,bP,bQ){var bR;j.New.call(this);this.equals=bP;this.hash=bQ;this.data=[];this.count=0;bR=J.Get(bO);try{while(bR.MoveNext())this.add(bR.Current());}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}},bg);bi=bh.DictionaryEntry=bH.Class({set_Value:function(bO){this.innerValue=bO;},Value:function(){return this.innerValue;},set_Key:function(bO){this.innerKey=bO;},Key:function(){return this.innerKey;}},j,bi);bi.New=bH.Ctor(function(bO,bP){j.New.call(this);this.innerKey=bO;this.innerValue=bP;},bi);bk.New=function(bO,bP,bQ){return{c:bO,v:bP,f:bQ};};bl.Force=function(bO){return bO.f();};bl.CreateFromValue=function(bO){return bk.New(true,bO,bl.cachedLazy);};bl.Create=function(bO){return bk.New(false,bO,bl.forceLazy);};bl.forceLazy=function(){var bO;bO=this.v();this.c=true;this.v=bO;this.f=bl.cachedLazy;return bO;};bl.cachedLazy=function(){return this.v;};bm=O.T=bH.Class({GetSlice:function(bO,bP){var bQ,bR,bS;try{return bO!=null&&bO.$==1?bP!=null&&bP.$==1?(bQ=bO.$0,bR=bP.$0,bR<0?bm.Empty:O.ofSeq(N.take(bR-bQ+1,O.skip(bQ,this)))):O.skip(bO.$0,this):bP!=null&&bP.$==1?(bS=bP.$0,bS<0?bm.Empty:O.ofSeq(N.take(bS+1,this))):this;}catch(bT){return bm.Empty;}},get_Item:function(bO){return N.nth(bO,this);},get_Length:function(){return O.length(this);},GetEnumerator:function(){return new K.New(this,null,function(bO){var bP;bP=bO.s;return bP.$==0?false:(bO.c=bP.$0,bO.s=bP.$1,true);},void 0);},GetEnumerator0:function(){return J.Get(this);}},null,bm);bm.Empty=new bm({$:0});O.allPairs=function(bO,bP){return O.ofArray(M.allPairs(M.ofList(bO),M.ofList(bP)));};O.append=function(bO,bP){var bQ,bR,bS,bT,bU;if(bO.$==0)return bP;else if(bP.$==0)return bO;else{bT=new bm({$:1});bQ=bT;bR=bO;bS=true;while(bS){bQ.$0=bR.$0;bR=bR.$1;if(bR.$==0)bS=false;else bQ=(bU=new bm({$:1}),bQ.$1=bU,bU);}bQ.$1=bP;return bT;}};O.choose=function(bO,bP){return O.ofSeq(N.choose(bO,bP));};O.collect=function(bO,bP){return O.ofSeq(N.collect(bO,bP));};O.concat=function(bO){return O.ofSeq(N.concat(bO));};O.exists=function(bO,bP){var bQ,bR;bQ=false;bR=bP;while(!bQ&&bR.$==1){bQ=bO(bR.$0);bR=bR.$1;}return bQ;};O.exists2=function(bO,bP,bQ){var bR,bS,bT;bR=false;bS=bP;bT=bQ;while(!bR&&bS.$==1&&bT.$==1){bR=bO(bS.$0,bT.$0);bS=bS.$1;bT=bT.$1;}if(!bR&&(bS.$==1||bT.$==1))O.badLengths();return bR;};O.filter=function(bO,bP){return O.ofSeq(N.filter(bO,bP));};O.fold2=function(bO,bP,bQ,bR){return M.fold2(bO,bP,M.ofList(bQ),M.ofList(bR));};O.foldBack=function(bO,bP,bQ){return M.foldBack(bO,M.ofList(bP),bQ);};O.foldBack2=function(bO,bP,bQ,bR){return M.foldBack2(bO,M.ofList(bP),M.ofList(bQ),bR);};O.forAll=function(bO,bP){var bQ,bR;bQ=true;bR=bP;while(bQ&&bR.$==1){bQ=bO(bR.$0);bR=bR.$1;}return bQ;};O.forall2=function(bO,bP,bQ){var bR,bS,bT;bR=true;bS=bP;bT=bQ;while(bR&&bS.$==1&&bT.$==1){bR=bO(bS.$0,bT.$0);bS=bS.$1;bT=bT.$1;}if(bR&&(bS.$==1||bT.$==1))O.badLengths();return bR;};O.head=function(bO){return bO.$==1?bO.$0:O.listEmpty();};O.init=function(bO,bP){return O.ofArray(M.init(bO,bP));};O.iter=function(bO,bP){var bQ;bQ=bP;while(bQ.$==1){bO(O.head(bQ));bQ=O.tail(bQ);}};O.iter2=function(bO,bP,bQ){var bR,bS;bR=bP;bS=bQ;while(bR.$==1){bS.$==0?O.badLengths():void 0;bO(O.head(bR),O.head(bS));bR=O.tail(bR);bS=O.tail(bS);}if(bS.$==1)O.badLengths();};O.iteri=function(bO,bP){var bQ,bR;bQ=bP;bR=0;while(bQ.$==1){bO(bR,O.head(bQ));bQ=O.tail(bQ);bR=bR+1;}};O.iteri2=function(bO,bP,bQ){var bR,bS,bT;bR=bP;bS=bQ;bT=0;while(bR.$==1){bS.$==0?O.badLengths():void 0;bO(bT,O.head(bR),O.head(bS));bR=O.tail(bR);bS=O.tail(bS);bT=bT+1;}if(bS.$==1)O.badLengths();};O.length=function(bO){var bP,bQ;bP=bO;bQ=0;while(bP.$==1){bP=O.tail(bP);bQ=bQ+1;}return bQ;};O.map=function(bO,bP){var bQ,bR,bS,bT,bU;if(bP.$==0)return bP;else{bT=new bm({$:1});bQ=bT;bR=bP;bS=true;while(bS){bQ.$0=bO(bR.$0);bR=bR.$1;if(bR.$==0)bS=false;else bQ=(bU=new bm({$:1}),bQ.$1=bU,bU);}bQ.$1=bm.Empty;return bT;}};O.map2=function(bO,bP,bQ){var bR,bS,bT,bU,bV,bW;bR=bP.$==1&&bQ.$==1;if(!bR)return bP.$==1||bQ.$==1?O.badLengths():bP;else{bV=new bm({$:1});bS=bV;bT=bP;bU=bQ;while(bR){bS.$0=bO(bT.$0,bU.$0);bT=bT.$1;bU=bU.$1;if(bT.$==1&&bU.$==1)bS=(bW=new bm({$:1}),bS.$1=bW,bW);else bR=false;}if(bT.$==1||bU.$==1)O.badLengths();bS.$1=bm.Empty;return bV;}};O.map3=function(bO,bP,bQ,bR){var bS,bT,bU,bV,bW,bX,bY;bS=bP.$==1&&bQ.$==1&&bR.$==1;if(!bS)return bP.$==1||bQ.$==1||bR.$==1?O.badLengths():bP;else{bX=new bm({$:1});bT=bX;bU=bP;bV=bQ;bW=bR;while(bS){bT.$0=bO(bU.$0,bV.$0,bW.$0);bU=bU.$1;bV=bV.$1;bW=bW.$1;if(bU.$==1&&bV.$==1&&bW.$==1)bT=(bY=new bm({$:1}),bT.$1=bY,bY);else bS=false;}if(bU.$==1||bV.$==1||bW.$==1)O.badLengths();bT.$1=bm.Empty;return bX;}};O.mapi=function(bO,bP){var bQ,bR,bS,bT,bU,bV;if(bP.$==0)return bP;else{bU=new bm({$:1});bQ=bU;bR=bP;bS=0;bT=true;while(bT){bQ.$0=bO(bS,bR.$0);bR=bR.$1;if(bR.$==0)bT=false;else{bQ=(bV=new bm({$:1}),bQ.$1=bV,bV);bS=bS+1;}}bQ.$1=bm.Empty;return bU;}};O.mapi2=function(bO,bP,bQ){var bR,bS,bT,bU,bV,bW,bX;bR=bP.$==1&&bQ.$==1;if(!bR)return bP.$==1||bQ.$==1?O.badLengths():bP;else{bW=new bm({$:1});bS=bW;bT=bP;bU=bQ;bV=0;while(bR){bS.$0=bO(bV,bT.$0,bU.$0);bT=bT.$1;bU=bU.$1;if(bT.$==1&&bU.$==1){bS=(bX=new bm({$:1}),bS.$1=bX,bX);bV=bV+1;}else bR=false;}if(bT.$==1||bU.$==1)O.badLengths();bS.$1=bm.Empty;return bW;}};O.max=function(bO){var bP,bQ,bR;O.nonEmpty(bO);bP=bO.$0;bQ=bO.$1;while(bQ.$==1){bR=bQ.$0;if(bz.Compare(bR,bP)===1)bP=bR;bQ=bQ.$1;}return bP;};O.maxBy=function(bO,bP){var bQ,bR,bS,bT,bU;O.nonEmpty(bP);bQ=bP.$0;bR=bO(bQ);bS=bP.$1;while(bS.$==1){bT=bS.$0;bU=bO(bT);if(bz.Compare(bU,bR)===1){bQ=bT;bR=bU;}bS=bS.$1;}return bQ;};O.min=function(bO){var bP,bQ,bR;O.nonEmpty(bO);bP=bO.$0;bQ=bO.$1;while(bQ.$==1){bR=bQ.$0;if(bz.Compare(bR,bP)===-1)bP=bR;bQ=bQ.$1;}return bP;};O.minBy=function(bO,bP){var bQ,bR,bS,bT,bU;O.nonEmpty(bP);bQ=bP.$0;bR=bO(bQ);bS=bP.$1;while(bS.$==1){bT=bS.$0;bU=bO(bT);if(bz.Compare(bU,bR)===-1){bQ=bT;bR=bU;}bS=bS.$1;}return bQ;};O.ofArray=function(bO){var bP,bQ,bR;bP=bm.Empty;for(bQ=M.length(bO)-1,bR=0;bQ>=bR;bQ--)bP=new bm({$:1,$0:M.get(bO,bQ),$1:bP});return bP;};O.ofSeq=function(bO){var bP,bQ,bR,bS,bT,bU;if(bO instanceof bm)return bO;else if(bO instanceof a.Array)return O.ofArray(bO);else{bP=J.Get(bO);try{bR=bP.MoveNext();if(!bR)bQ=bm.Empty;else{bT=new bm({$:1});bS=bT;while(bR){bS.$0=bP.Current();if(bP.MoveNext())bS=(bU=new bm({$:1}),bS.$1=bU,bU);else bR=false;}bS.$1=bm.Empty;bQ=bT;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}}};O.partition=function(bO,bP){var bQ;bQ=M.partition(bO,M.ofList(bP));return[O.ofArray(bQ[0]),O.ofArray(bQ[1])];};O.permute=function(bO,bP){return O.ofArray(M.permute(bO,M.ofList(bP)));};O.reduce=function(bO,bP){var bQ,bR;O.nonEmpty(bP);bQ=bP.$0;bR=bP.$1;while(bR.$==1){bQ=bO(bQ,bR.$0);bR=bR.$1;}return bQ;};O.reduceBack=function(bO,bP){return M.reduceBack(bO,M.ofList(bP));};O.replicate=function(bO,bP){return O.ofArray(M.create(bO,bP));};O.rev=function(bO){var bP,bQ;bP=bm.Empty;bQ=bO;while(bQ.$==1){bP=new bm({$:1,$0:bQ.$0,$1:bP});bQ=bQ.$1;}return bP;};O.scan=function(bO,bP,bQ){return O.ofSeq(N.scan(bO,bP,bQ));};O.scanBack=function(bO,bP,bQ){return O.ofArray(M.scanBack(bO,M.ofList(bP),bQ));};O.sort=function(bO){var bP;bP=M.ofList(bO);M.sortInPlace(bP);return O.ofArray(bP);};O.sortBy=function(bO,bP){var bQ;bQ=M.ofList(bP);M.sortInPlaceBy(bO,bQ);return O.ofArray(bQ);};O.sortByDescending=function(bO,bP){var bQ;bQ=M.ofList(bP);M.sortInPlaceByDescending(bO,bQ);return O.ofArray(bQ);};O.sortDescending=function(bO){var bP;bP=M.ofList(bO);M.sortInPlaceByDescending(a.id,bP);return O.ofArray(bP);};O.sortWith=function(bO,bP){var bQ;bQ=M.ofList(bP);M.sortInPlaceWith(bO,bQ);return O.ofArray(bQ);};O.tail=function(bO){return bO.$==1?bO.$1:O.listEmpty();};O.transpose=function(bO){return O.ofSeq(N.map(O.ofArray,M.transposeArray(M.ofSeq(N.map(M.ofList,bO)))));};O.unzip=function(bO){var bP,bQ,bR,bS;bP=[];bQ=[];bR=J.Get(bO);try{while(bR.MoveNext()){bS=bR.Current();bP.push(bS[0]);bQ.push(bS[1]);}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}return[O.ofArray(bP.slice(0)),O.ofArray(bQ.slice(0))];};O.unzip3=function(bO){var bP,bQ,bR,bS,bT;bP=[];bQ=[];bR=[];bS=J.Get(bO);try{while(bS.MoveNext()){bT=bS.Current();bP.push(bT[0]);bQ.push(bT[1]);bR.push(bT[2]);}}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}return[O.ofArray(bP.slice(0)),O.ofArray(bQ.slice(0)),O.ofArray(bR.slice(0))];};O.zip=function(bO,bP){return O.map2(function(bQ,bR){return[bQ,bR];},bO,bP);};O.zip3=function(bO,bP,bQ){return O.map3(function(bR,bS,bT){return[bR,bS,bT];},bO,bP,bQ);};O.chunkBySize=function(bO,bP){return O.map(O.ofArray,O.ofSeq(N.chunkBySize(bO,bP)));};O.compareWith=function(bO,bP,bQ){return N.compareWith(bO,bP,bQ);};O.countBy=function(bO,bP){return O.ofArray(M.countBy(bO,M.ofList(bP)));};O.distinct=function(bO){return O.ofSeq(N.distinct(bO));};O.distinctBy=function(bO,bP){return O.ofSeq(N.distinctBy(bO,bP));};O.splitInto=function(bO,bP){return O.map(O.ofArray,O.ofArray(M.splitInto(bO,M.ofList(bP))));};O.except=function(bO,bP){return O.ofSeq(N.except(bO,bP));};O.tryFindBack=function(bO,bP){return M.tryFindBack(bO,M.ofList(bP));};O.findBack=function(bO,bP){var bQ;bQ=O.tryFindBack(bO,bP);return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};O.findIndexBack=function(bO,bP){var bQ;bQ=M.tryFindIndexBack(bO,M.ofList(bP));return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};O.groupBy=function(bO,bP){var bQ;function bR(bS,bT){return[bS,O.ofArray(bT)];}bQ=M.groupBy(bO,M.ofList(bP));M.mapInPlace(function(bS){return bR(bS[0],bS[1]);},bQ);return O.ofArray(bQ);};O.last=function(bO){var bP,bQ;O.nonEmpty(bO);bP=bO;bQ=bP.$1;while(bQ.$==1){bP=bQ;bQ=bP.$1;}return bP.$0;};O.contains=function(bO,bP){var bQ,bR;bQ=false;bR=bP;while(!bQ&&bR.$==1){bQ=bz.Equals(bO,bR.$0);bR=bR.$1;}return bQ;};O.mapFold=function(bO,bP,bQ){var bR;bR=M.mapFold(bO,bP,M.ofList(bQ));return[O.ofArray(bR[0]),bR[1]];};O.mapFoldBack=function(bO,bP,bQ){var bR;bR=M.mapFoldBack(bO,M.ofList(bP),bQ);return[O.ofArray(bR[0]),bR[1]];};O.pairwise=function(bO){return O.ofSeq(N.pairwise(bO));};O.indexed=function(bO){return O.mapi(function(bP,bQ){return[bP,bQ];},bO);};O.tryHead=function(bO){return bO.$==0?null:{$:1,$0:bO.$0};};O.exactlyOne=function(bO){var bP;return bO.$==1&&(bO.$1.$==0&&(bP=bO.$0,true))?bP:B.FailWith("The input does not have precisely one element.");};O.tryExactlyOne=function(bO){var bP;return bO.$==1&&(bO.$1.$==0&&(bP=bO.$0,true))?{$:1,$0:bP}:null;};O.unfold=function(bO,bP){return O.ofSeq(N.unfold(bO,bP));};O.windowed=function(bO,bP){return O.ofSeq(N.map(O.ofArray,N.windowed(bO,bP)));};O.splitAt=function(bO,bP){return[O.ofSeq(N.take(bO,bP)),O.skip(bO,bP)];};O.nonEmpty=function(bO){if(bO.$==0)O.listEmpty();};O.listEmpty=function(){return B.FailWith("The input list was empty.");};O.badLengths=function(){return B.FailWith("The lists have different lengths.");};C.getOrValue=function(bO,bP){return bO===null?bP:bO;};C.get=function(bO){return bO===null?B.FailWith("Nullable object must have a value."):bO;};B.range=function(bO,bP){var bQ;bQ=1+bP-bO;return bQ<=0?[]:N.init(bQ,function(bR){return bR+bO;});};B.step=function(bO,bP,bQ){var bR;bR=B.Sign(bP);return N.takeWhile(function(bS){return bR*(bQ-bS)>=0;},N.initInfinite(function(bS){return bO+bS*bP;}));};B.KeyValue=function(bO){return[bO.K,bO.V];};B.Sign=function(bO){return bO===0?0:bO<0?-1:1;};B.Pown=function(bO,bP){function bQ(bR){var bS;return bR===1?bO:bR%2===0?(bS=bQ(bR/2>>0),bS*bS):bO*bQ(bR-1);}return bQ(bP);};B.toInt=function(bO){var bP;bP=B.toUInt(bO);return bP>=2147483648?bP-4294967296:bP;};B.toUInt=function(bO){return(bO<0?bN.ceil(bO):bN.floor(bO))>>>0;};B.InvalidArg=function(bO,bP){throw new _5.New(bO,bP);};B.InvalidOp=function(bO){throw new _8.New(bO);};B.FailWith=function(bO){throw new e(bO);};bn.string=function(bO,bP,bQ){var bR,bS;return bP==null?bQ!=null&&bQ.$==1?(bR=bQ.$0,bR<0?"":bO.slice(0,bR+1)):"":bQ==null?bO.slice(bP.$0):(bS=bQ.$0,bS<0?"":bO.slice(bP.$0,bS+1));};bn.array=function(bO,bP,bQ){var bR,bS;return bP==null?bQ!=null&&bQ.$==1?(bR=bQ.$0,bR<0?[]:bO.slice(0,bR+1)):[]:bQ==null?bO.slice(bP.$0):(bS=bQ.$0,bS<0?[]:bO.slice(bP.$0,bS+1));};bn.setArray=function(bO,bP,bQ,bR){var bS;bS=bP!=null&&bP.$==1?bP.$0:0;M.setSub(bO,bS,(bQ!=null&&bQ.$==1?bQ.$0:bO.length-1)-bS+1,bR);};bn.array2D=function(bO,bP,bQ,bR,bS){var bT,bU;bT=bP!=null&&bP.$==1?bP.$0:0;bU=bR!=null&&bR.$==1?bR.$0:0;return M.sub2D(bO,bT,bU,(bQ!=null&&bQ.$==1?bQ.$0:bO.length-1)-bT+1,(bS!=null&&bS.$==1?bS.$0:(bO.length?bO[0].length:0)-1)-bU+1);};bn.array2Dfix1=function(bO,bP,bQ,bR){var bS,bT,bU,bV,bW,bX;bS=bQ!=null&&bQ.$==1?bQ.$0:0;bT=bR!=null&&bR.$==1?bR.$0:(bO.length?bO[0].length:0)-1;bU=bT-bS+1;bV=new a.Array(bU);for(bW=0,bX=bU-1;bW<=bX;bW++)M.set(bV,bW,M.get2D(bO,bP,bS+bW));return bV;};bn.array2Dfix2=function(bO,bP,bQ,bR){var bS,bT,bU,bV,bW,bX;bS=bP!=null&&bP.$==1?bP.$0:0;bT=bQ!=null&&bQ.$==1?bQ.$0:bO.length-1;bU=bT-bS+1;bV=new a.Array(bU);for(bW=0,bX=bU-1;bW<=bX;bW++)M.set(bV,bW,M.get2D(bO,bS+bW,bR));return bV;};bn.setArray2Dfix1=function(bO,bP,bQ,bR,bS){var bT,bU,bV,bW;bT=bQ!=null&&bQ.$==1?bQ.$0:0;bU=bR!=null&&bR.$==1?bR.$0:(bO.length?bO[0].length:0)-1;for(bV=0,bW=bU-bT+1-1;bV<=bW;bV++)M.set2D(bO,bP,bT+bV,M.get(bS,bV));};bn.setArray2Dfix2=function(bO,bP,bQ,bR,bS){var bT,bU,bV,bW;bT=bP!=null&&bP.$==1?bP.$0:0;bU=bQ!=null&&bQ.$==1?bQ.$0:bO.length-1;for(bV=0,bW=bU-bT+1-1;bV<=bW;bV++)M.set2D(bO,bT+bV,bR,M.get(bS,bV));};bn.setArray2D=function(bO,bP,bQ,bR,bS,bT){var bU,bV;bU=bP!=null&&bP.$==1?bP.$0:0;bV=bR!=null&&bR.$==1?bR.$0:0;M.setSub2D(bO,bU,bV,(bQ!=null&&bQ.$==1?bQ.$0:bO.length-1)-bU+1,(bS!=null&&bS.$==1?bS.$0:(bO.length?bO[0].length:0)-1)-bV+1,bT);};bo.filter=function(bO,bP){var bQ;return bP!=null&&bP.$==1&&(bO(bP.$0)&&(bQ=bP.$0,true))?bP:null;};bo.fold=function(bO,bP,bQ){return bQ==null?bP:bO(bP,bQ.$0);};bo.foldBack=function(bO,bP,bQ){return bP==null?bQ:bO(bP.$0,bQ);};bo.ofNullable=function(bO){return bO==null?null:{$:1,$0:C.get(bO)};};bo.ofObj=function(bO){return bO==null?null:{$:1,$0:bO};};bo.toArray=function(bO){return bO==null?[]:[bO.$0];};bo.toList=function(bO){return bO==null?bm.Empty:O.ofArray([bO.$0]);};bo.toNullable=function(bO){return bO!=null&&bO.$==1?bO.$0:null;};bo.toObj=function(bO){return bO==null?null:bO.$0;};bp.CopyTo=function(bO,bP,bQ){M.blit(bO,0,bP,bQ,M.length(bO));};bp.Contains=function(bO,bP){return N.exists(function(bQ){return bz.Equals(bP,bQ);},bO);};bp.Clear=function(bO){bO.splice(0,M.length(bO));};bq=b.Random=bH.Class({NextBytes:function(bO){var bP,bQ;for(bP=0,bQ=M.length(bO)-1;bP<=bQ;bP++)M.set(bO,bP,bN.floor(bN.random()*256));},Next:function(bO,bP){return bO>bP?B.FailWith("'minValue' cannot be greater than maxValue."):bO+bN.floor(bN.random()*(bP-bO));},Next$1:function(bO){return bO<0?B.FailWith("'maxValue' must be greater than zero."):bN.floor(bN.random()*bO);},Next$2:function(){return bN.floor(bN.random()*2147483648);}},j,bq);bq.New=bH.Ctor(function(){j.New.call(this);},bq);br.New=function(bO){return[bO];};bs.MapError=function(bO,bP){return bP.$==1?{$:1,$0:bO(bP.$0)}:{$:0,$0:bP.$0};};bs.Map=function(bO,bP){return bP.$==1?{$:1,$0:bP.$0}:{$:0,$0:bO(bP.$0)};};bs.Bind=function(bO,bP){return bP.$==1?{$:1,$0:bP.$0}:bO(bP.$0);};N.enumFinally=function(bO,bP){return{GetEnumerator:function(){var bQ;try{bQ=J.Get(bO);}catch(bR){bP();throw bR;}return new K.New(null,null,function(bS){return bQ.MoveNext()&&(bS.c=bQ.Current(),true);},function(){bQ.Dispose();bP();});}};};N.enumUsing=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;try{bQ=J.Get(bP(bO));}catch(bS){bR=bO;bR.Dispose();throw bS;}return new K.New(null,null,function(bT){return bQ.MoveNext()&&(bT.c=bQ.Current(),true);},function(){var bT;bQ.Dispose();bT=bO;bT.Dispose();});}};};N.enumWhile=function(bO,bP){return{GetEnumerator:function(){function bQ(bR){var bS;while(true){bS=bR.s;if(bz.Equals(bS,null)){if(bO()){bR.s=J.Get(bP);bR=bR;}else return false;}else if(bS.MoveNext()){bR.c=bS.Current();return true;}else{bS.Dispose();bR.s=null;bR=bR;}}}return new K.New(null,null,bQ,function(bR){var bS;bS=bR.s;if(!bz.Equals(bS,null))bS.Dispose();});}};};bt.createEvent=function(bO,bP,bQ){var bR;bR={AddHandler:bO,RemoveHandler:bP,Subscribe:function(bS){var bT;bT=bQ(function(){return function(bU){return bS.OnNext(bU);};});bO(bT);return{Dispose:function(){return bP(bT);}};}};j.New.call(bR);return bR;};N.allPairs=function(bO,bP){var bQ;bQ=N.cache(bP);return N.collect(function(bR){return N.map(function(bS){return[bR,bS];},bQ);},bO);};N.append=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=J.Get(bO);bR=[true];return new K.New(bQ,null,function(bS){var bT;return bS.s.MoveNext()?(bS.c=bS.s.Current(),true):(bT=bS.s,!bz.Equals(bT,null)?bT.Dispose():void 0,bS.s=null,bR[0]&&(bR[0]=false,bS.s=J.Get(bP),bS.s.MoveNext()?(bS.c=bS.s.Current(),true):(bS.s.Dispose(),bS.s=null,false)));},function(bS){var bT;bT=bS.s;if(!bz.Equals(bT,null))bT.Dispose();});}};};N.average=function(bO){var bP,bQ;bP=N.fold(function(bR,bS){return(function(bT){var bU,bV;bU=bT[0];bV=bT[1];return function(bW){return[bU+1,bV+bW];};}(bR))(bS);},[0,0],bO);bQ=bP[0];return bQ===0?N.seqEmpty():bP[1]/bQ;};N.averageBy=function(bO,bP){var bQ,bR;bQ=N.fold(function(bS,bT){return(function(bU){var bV,bW;bV=bU[0];bW=bU[1];return function(bX){return[bV+1,bW+bO(bX)];};}(bS))(bT);},[0,0],bP);bR=bQ[0];return bR===0?N.seqEmpty():bQ[1]/bR;};N.cache=function(bO){var bP,bQ;bP=[];bQ=[J.Get(bO)];return{GetEnumerator:function(){return new K.New(0,null,function(bR){var bS;return bR.s<bP.length?(bR.c=bP[bR.s],bR.s=bR.s+1,true):(bS=bQ[0],bz.Equals(bS,null)?false:bS.MoveNext()?(bR.s=bR.s+1,bR.c=bS.Current(),bP.push(bR.c),true):(bS.Dispose(),bQ[0]=null,false));},void 0);}};};N.choose=function(bO,bP){return N.collect(function(bQ){var bR;bR=bO(bQ);return bR==null?bm.Empty:O.ofArray([bR.$0]);},bP);};N.collect=function(bO,bP){return N.concat(N.map(bO,bP));};N.compareWith=function(bO,bP,bQ){var bR,bS,bT,bU,bV;bR=J.Get(bP);try{bT=J.Get(bQ);try{bU=0;bV=true;while(bV&&bU===0)if(bR.MoveNext())bU=bT.MoveNext()?bO(bR.Current(),bT.Current()):1;else if(bT.MoveNext())bU=-1;else bV=false;bS=bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}return bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};N.concat=function(bO){return{GetEnumerator:function(){var bP;function bQ(bR){var bS;while(true){bS=bR.s;if(bz.Equals(bS,null)){if(bP.MoveNext()){bR.s=J.Get(bP.Current());bR=bR;}else{bP.Dispose();return false;}}else if(bS.MoveNext()){bR.c=bS.Current();return true;}else{bR.Dispose();bR.s=null;bR=bR;}}}bP=J.Get(bO);return new K.New(null,null,bQ,function(bR){var bS;bS=bR.s;if(!bz.Equals(bS,null))bS.Dispose();if(!bz.Equals(bP,null))bP.Dispose();});}};};N.countBy=function(bO,bP){return N.delay(function(){return M.countBy(bO,M.ofSeq(bP));});};N.delay=function(bO){return{GetEnumerator:function(){return J.Get(bO());}};};N.distinct=function(bO){return N.distinctBy(a.id,bO);};N.distinctBy=function(bO,bP){return{GetEnumerator:function(){var bQ,bR;bQ=J.Get(bP);bR=new bg.New$3();return new K.New(null,null,function(bS){var bT,bU;if(bQ.MoveNext()){bT=bQ.Current();bU=bR.Add(bO(bT));while(!bU&&bQ.MoveNext()){bT=bQ.Current();bU=bR.Add(bO(bT));}return bU&&(bS.c=bT,true);}else return false;},function(){bQ.Dispose();});}};};N.splitInto=function(bO,bP){bO<=0?B.FailWith("Count must be positive"):void 0;return N.delay(function(){return M.splitInto(bO,M.ofSeq(bP));});};N.exactlyOne=function(bO){var bP,bQ;bP=J.Get(bO);try{return bP.MoveNext()?(bQ=bP.Current(),bP.MoveNext()?B.InvalidOp("Sequence contains more than one element"):bQ):B.InvalidOp("Sequence contains no elements");}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.tryExactlyOne=function(bO){var bP,bQ;bP=J.Get(bO);try{return bP.MoveNext()?(bQ=bP.Current(),bP.MoveNext()?null:{$:1,$0:bQ}):null;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.exists=function(bO,bP){var bQ,bR;bQ=J.Get(bP);try{bR=false;while(!bR&&bQ.MoveNext())bR=bO(bQ.Current());return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.exists2=function(bO,bP,bQ){var bR,bS,bT,bU;bR=J.Get(bP);try{bT=J.Get(bQ);try{bU=false;while(!bU&&bR.MoveNext()&&bT.MoveNext())bU=bO(bR.Current(),bT.Current());bS=bU;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}return bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};N.filter=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=J.Get(bP);return new K.New(null,null,function(bR){var bS,bT,bU;bS=bQ.MoveNext();bT=bQ.Current();bU=false;while(bS)if(bO(bT)){bR.c=bT;bU=true;bS=false;}else if(bQ.MoveNext())bT=bQ.Current();else bS=false;return bU;},function(){bQ.Dispose();});}};};N.find=function(bO,bP){var bQ;bQ=N.tryFind(bO,bP);return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};N.findIndex=function(bO,bP){var bQ;bQ=N.tryFindIndex(bO,bP);return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};N.fold=function(bO,bP,bQ){var bR,bS;bR=bP;bS=J.Get(bQ);try{while(bS.MoveNext())bR=bO(bR,bS.Current());return bR;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};N.forall=function(bO,bP){return!N.exists(function(bQ){return!bO(bQ);},bP);};N.forall2=function(bO,bP,bQ){return!N.exists2(function(bR,bS){return!bO(bR,bS);},bP,bQ);};N.groupBy=function(bO,bP){return N.delay(function(){return M.groupBy(bO,M.ofSeq(bP));});};N.head=function(bO){var bP;bP=J.Get(bO);try{return bP.MoveNext()?bP.Current():N.insufficient();}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.init=function(bO,bP){return N.take(bO,N.initInfinite(bP));};N.initInfinite=function(bO){return{GetEnumerator:function(){return new K.New(0,null,function(bP){bP.c=bO(bP.s);bP.s=bP.s+1;return true;},void 0);}};};N.isEmpty=function(bO){var bP;bP=J.Get(bO);try{return!bP.MoveNext();}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.iter=function(bO,bP){var bQ;bQ=J.Get(bP);try{while(bQ.MoveNext())bO(bQ.Current());}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.iter2=function(bO,bP,bQ){var bR,bS,bT;bR=J.Get(bP);try{bT=J.Get(bQ);try{while(bR.MoveNext()&&bT.MoveNext())bO(bR.Current(),bT.Current());bS=void 0;}finally{if(typeof bT=="object"&&"Dispose"in bT)bT.Dispose();}bS;}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};N.iteri=function(bO,bP){var bQ,bR;bQ=0;bR=J.Get(bP);try{while(bR.MoveNext()){bO(bQ,bR.Current());bQ=bQ+1;}}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};N.length=function(bO){var bP,bQ;bP=0;bQ=J.Get(bO);try{while(bQ.MoveNext())bP=bP+1;return bP;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.map=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=J.Get(bP);return new K.New(null,null,function(bR){return bQ.MoveNext()&&(bR.c=bO(bQ.Current()),true);},function(){bQ.Dispose();});}};};N.mapi=function(bO,bP){return N.map2(bO,N.initInfinite(a.id),bP);};N.map2=function(bO,bP,bQ){return{GetEnumerator:function(){var bR,bS;bR=J.Get(bP);bS=J.Get(bQ);return new K.New(null,null,function(bT){return bR.MoveNext()&&bS.MoveNext()&&(bT.c=bO(bR.Current(),bS.Current()),true);},function(){bR.Dispose();bS.Dispose();});}};};N.maxBy=function(bO,bP){var bQ,bR,bS,bT,bU;bQ=J.Get(bP);try{if(!bQ.MoveNext())N.seqEmpty();bR=bQ.Current();bS=bO(bR);while(bQ.MoveNext()){bT=bQ.Current();bU=bO(bT);if(bz.Compare(bU,bS)===1){bR=bT;bS=bU;}}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.minBy=function(bO,bP){var bQ,bR,bS,bT,bU;bQ=J.Get(bP);try{if(!bQ.MoveNext())N.seqEmpty();bR=bQ.Current();bS=bO(bR);while(bQ.MoveNext()){bT=bQ.Current();bU=bO(bT);if(bz.Compare(bU,bS)===-1){bR=bT;bS=bU;}}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.max=function(bO){var bP,bQ,bR;bP=J.Get(bO);try{if(!bP.MoveNext())N.seqEmpty();bQ=bP.Current();while(bP.MoveNext()){bR=bP.Current();if(bz.Compare(bR,bQ)===1)bQ=bR;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.min=function(bO){var bP,bQ,bR;bP=J.Get(bO);try{if(!bP.MoveNext())N.seqEmpty();bQ=bP.Current();while(bP.MoveNext()){bR=bP.Current();if(bz.Compare(bR,bQ)===-1)bQ=bR;}return bQ;}finally{if(typeof bP=="object"&&"Dispose"in bP)bP.Dispose();}};N.nth=function(bO,bP){var bQ,bR;if(bO<0)B.FailWith("negative index requested");bQ=-1;bR=J.Get(bP);try{while(bQ<bO){!bR.MoveNext()?N.insufficient():void 0;bQ=bQ+1;}return bR.Current();}finally{if(typeof bR=="object"&&"Dispose"in bR)bR.Dispose();}};N.pairwise=function(bO){return N.map(function(bP){return[M.get(bP,0),M.get(bP,1)];},N.windowed(2,bO));};N.pick=function(bO,bP){var bQ;bQ=N.tryPick(bO,bP);return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};N.readOnly=function(bO){return{GetEnumerator:function(){return J.Get(bO);}};};N.reduce=function(bO,bP){var bQ,bR;bQ=J.Get(bP);try{if(!bQ.MoveNext())N.seqEmpty();bR=bQ.Current();while(bQ.MoveNext())bR=bO(bR,bQ.Current());return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.scan=function(bO,bP,bQ){return{GetEnumerator:function(){var bR;bR=J.Get(bQ);return new K.New(false,null,function(bS){return bS.s?bR.MoveNext()&&(bS.c=bO(bS.c,bR.Current()),true):(bS.c=bP,bS.s=true,true);},function(){bR.Dispose();});}};};N.skip=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=J.Get(bP);return new K.New(true,null,function(bR){var bS,bT;if(bR.s){for(bS=1,bT=bO;bS<=bT;bS++)if(!bQ.MoveNext())N.insufficient();bR.s=false;}else null;return bQ.MoveNext()&&(bR.c=bQ.Current(),true);},function(){bQ.Dispose();});}};};N.skipWhile=function(bO,bP){return{GetEnumerator:function(){var bQ;bQ=J.Get(bP);return new K.New(true,null,function(bR){var bS,bT;if(bR.s){bS=true;bT=false;while(bS)if(bQ.MoveNext()){if(!bO(bQ.Current()))bS=false;}else{bS=false;bT=true;}bR.s=false;return bT?false:(bR.c=bQ.Current(),true);}else return bQ.MoveNext()&&(bR.c=bQ.Current(),true);},function(){bQ.Dispose();});}};};N.sort=function(bO){return N.sortBy(a.id,bO);};N.sortBy=function(bO,bP){return N.delay(function(){var bQ;bQ=M.ofSeq(bP);M.sortInPlaceBy(bO,bQ);return bQ;});};N.sortByDescending=function(bO,bP){return N.delay(function(){var bQ;bQ=M.ofSeq(bP);M.sortInPlaceByDescending(bO,bQ);return bQ;});};N.sortDescending=function(bO){return N.sortByDescending(a.id,bO);};N.sum=function(bO){return N.fold(function(bP,bQ){return bP+bQ;},0,bO);};N.sumBy=function(bO,bP){return N.fold(function(bQ,bR){return bQ+bO(bR);},0,bP);};N.take=function(bO,bP){bO<0?N.nonNegative():void 0;return{GetEnumerator:function(){var bQ;bQ=[J.Get(bP)];return new K.New(0,null,function(bR){var bS;bR.s=bR.s+1;return bR.s>bO?false:(bS=bQ[0],bz.Equals(bS,null)?N.insufficient():bS.MoveNext()?(bR.c=bS.Current(),bR.s===bO?(bS.Dispose(),bQ[0]=null):void 0,true):(bS.Dispose(),bQ[0]=null,N.insufficient()));},function(){var bR;bR=bQ[0];if(!bz.Equals(bR,null))bR.Dispose();});}};};N.takeWhile=function(bO,bP){return N.delay(function(){return N.enumUsing(J.Get(bP),function(bQ){return N.enumWhile(function(){return bQ.MoveNext()&&bO(bQ.Current());},N.delay(function(){return[bQ.Current()];}));});});};N.transpose=function(bO){return N.delay(function(){return M.transposeArray(M.ofSeq(N.map(M.ofSeq,bO)));});};N.truncate=function(bO,bP){return N.delay(function(){return N.enumUsing(J.Get(bP),function(bQ){var bR;bR=[0];return N.enumWhile(function(){return bQ.MoveNext()&&bR[0]<bO;},N.delay(function(){bR[0]++;return[bQ.Current()];}));});});};N.tryFind=function(bO,bP){var bQ,bR,bS;bQ=J.Get(bP);try{bR=null;while(bR==null&&bQ.MoveNext()){bS=bQ.Current();if(bO(bS))bR={$:1,$0:bS};}return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.findBack=function(bO,bP){var bQ;bQ=M.tryFindBack(bO,M.ofSeq(bP));return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};N.tryFindIndex=function(bO,bP){var bQ,bR,bS;bQ=J.Get(bP);try{bR=true;bS=0;while(bR&&bQ.MoveNext())if(bO(bQ.Current()))bR=false;else bS=bS+1;return bR?null:{$:1,$0:bS};}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.findIndexBack=function(bO,bP){var bQ;bQ=M.tryFindIndexBack(bO,M.ofSeq(bP));return bQ==null?B.FailWith("KeyNotFoundException"):bQ.$0;};N.tryPick=function(bO,bP){var bQ,bR;bQ=J.Get(bP);try{bR=null;while(bz.Equals(bR,null)&&bQ.MoveNext())bR=bO(bQ.Current());return bR;}finally{if(typeof bQ=="object"&&"Dispose"in bQ)bQ.Dispose();}};N.unfold=function(bO,bP){return{GetEnumerator:function(){return new K.New(bP,null,function(bQ){var bR;bR=bO(bQ.s);return bR==null?false:(bQ.c=bR.$0[0],bQ.s=bR.$0[1],true);},void 0);}};};N.windowed=function(bO,bP){bO<=0?B.FailWith("The input must be positive."):void 0;return N.delay(function(){return N.enumUsing(J.Get(bP),function(bQ){var bR;bR=[];return N.append(N.enumWhile(function(){return bR.length<bO&&bQ.MoveNext();},N.delay(function(){bR.push(bQ.Current());return[];})),N.delay(function(){return bR.length===bO?N.append([bR.slice(0)],N.delay(function(){return N.enumWhile(function(){return bQ.MoveNext();},N.delay(function(){bR.shift();bR.push(bQ.Current());return[bR.slice(0)];}));})):[];}));});});};N.zip=function(bO,bP){return N.map2(function(bQ,bR){return[bQ,bR];},bO,bP);};N.map3=function(bO,bP,bQ,bR){return{GetEnumerator:function(){var bS,bT,bU;bS=J.Get(bP);bT=J.Get(bQ);bU=J.Get(bR);return new K.New(null,null,function(bV){return bS.MoveNext()&&bT.MoveNext()&&bU.MoveNext()&&(bV.c=bO(bS.Current(),bT.Current(),bU.Current()),true);},function(){bS.Dispose();bT.Dispose();bU.Dispose();});}};};N.zip3=function(bO,bP,bQ){return N.map3(function(bR,bS,bT){return[bR,bS,bT];},bO,bP,bQ);};N.fold2=function(bO,bP,bQ,bR){return M.fold2(bO,bP,M.ofSeq(bQ),M.ofSeq(bR));};N.foldBack=function(bO,bP,bQ){return M.foldBack(bO,M.ofSeq(bP),bQ);};N.foldBack2=function(bO,bP,bQ,bR){return M.foldBack2(bO,M.ofSeq(bP),M.ofSeq(bQ),bR);};N.iteri2=function(bO,bP,bQ){var bR,bS,bT,bU;bR=0;bS=J.Get(bP);try{bU=J.Get(bQ);try{while(bS.MoveNext()&&bU.MoveNext()){bO(bR,bS.Current(),bU.Current());bR=bR+1;}bT=void 0;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}bT;}finally{if(typeof bS=="object"&&"Dispose"in bS)bS.Dispose();}};N.mapi2=function(bO,bP,bQ){return N.map3(bO,N.initInfinite(a.id),bP,bQ);};N.mapFold=function(bO,bP,bQ){return M.mapFold(bO,bP,M.ofSeq(bQ));};N.mapFoldBack=function(bO,bP,bQ){return M.mapFoldBack(bO,M.ofSeq(bP),bQ);};N.permute=function(bO,bP){return N.delay(function(){return M.permute(bO,M.ofSeq(bP));});};N.reduceBack=function(bO,bP){return M.reduceBack(bO,M.ofSeq(bP));};N.replicate=function(bO,bP){bO<0?N.nonNegative():void 0;return N.delay(function(){return N.map(function(){return bP;},B.range(0,bO-1));});};N.rev=function(bO){return N.delay(function(){return M.ofSeq(bO).slice().reverse();});};N.scanBack=function(bO,bP,bQ){return N.delay(function(){return M.scanBack(bO,M.ofSeq(bP),bQ);});};N.indexed=function(bO){return N.mapi(function(bP,bQ){return[bP,bQ];},bO);};N.sortWith=function(bO,bP){return N.delay(function(){var bQ;bQ=M.ofSeq(bP);M.sortInPlaceWith(bO,bQ);return bQ;});};N.tail=function(bO){return N.skip(1,bO);};N.seqEmpty=function(){return B.FailWith("The input sequence was empty.");};bu.CopyTo=function(bO,bP,bQ){M.blit(bP,0,bP,bQ,M.length(bO));};bu.Contains=function(bO,bP){return N.exists(function(bQ){return bz.Equals(bP,bQ);},bO);};bu.Clear=function(bO){bO.splice(0,M.length(bO));};bv.RegexEscape=function(bO){return bO.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};bv.SplitWith=function(bO,bP){return bO.split(bP);};bv.Join=function(bO,bP){return bP.join(bO);};bv.TrimEndWS=function(bO){return bO.replace(new a.RegExp("\\s+$"),"");};bv.TrimStartWS=function(bO){return bO.replace(new a.RegExp("^\\s+"),"");};bv.Trim=function(bO){return bO.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};bv.StartsWith=function(bO,bP){return bO.substring(0,bP.length)==bP;};bv.Substring=function(bO,bP,bQ){return bO.substr(bP,bQ);};bv.ReplaceOnce=function(bO,bP,bQ){return bO.replace(bP,bQ);};bv.Remove=function(bO,bP,bQ){return bO.substring(0,bP)+bO.substring(bP+bQ);};bv.PadRightWith=function(bO,bP,bQ){return bP>bO.length?bO+a.Array(bP-bO.length+1).join(bQ):bO;};bv.PadLeftWith=function(bO,bP,bQ){return bP>bO.length?a.Array(bP-bO.length+1).join(bQ)+bO:bO;};bv.LastIndexOf=function(bO,bP,bQ){return bO.lastIndexOf(bP,bQ);};bv.IsNullOrWhiteSpace=function(bO){return bO==null||(new a.RegExp("^\\s*$")).test(bO);};bv.IsNullOrEmpty=function(bO){return bO==null||bO=="";};bv.Insert=function(bO,bP,bQ){return bO.substring(0,bP-1)+bQ+bO.substring(bP);};bv.IndexOf=function(bO,bP,bQ){return bO.indexOf(bP,bQ);};bv.EndsWith=function(bO,bP){return bO.substring(bO.length-bP.length)==bP;};bv.collect=function(bO,bP){return M.init(bP.length,function(bQ){return bO(bP[bQ]);}).join("");};bv.concat=function(bO,bP){return M.ofSeq(bP).join(bO);};bv.exists=function(bO,bP){return N.exists(bO,bv.protect(bP));};bv.forall=function(bO,bP){return N.forall(bO,bv.protect(bP));};bv.init=function(bO,bP){return M.init(bO,bP).join("");};bv.iter=function(bO,bP){N.iter(bO,bv.protect(bP));};bv.iteri=function(bO,bP){N.iteri(bO,bv.protect(bP));};bv.length=function(bO){return bv.protect(bO).length;};bv.map=function(bO,bP){return bv.collect(bO,bv.protect(bP));};bv.mapi=function(bO,bP){return M.ofSeq(N.mapi(bO,bP)).join("");};bv.replicate=function(bO,bP){return M.create(bO,bP).join("");};bv.protect=function(bO){return bO===null?"":bO;};bv.SFormat=function(bO,bP){return bO.replace(new a.RegExp("{(0|[1-9]\\d*)(?:,(-?[1-9]\\d*|0))?(?::(.*?))?}","g"),function(bQ,bR,bS){var bT,bU,bV;bT=bK(M.get(bP,+bR));return!bz.Equals(bS,void 0)?(bU=+bS,(bV=bN.abs(bU),bV>bT.length?bU>0?bv.PadLeft(bT,bV):bv.PadRight(bT,bV):bT)):bT;});};bv.Filter=function(bO,bP){return M.ofSeq(N.choose(function(bQ){return bO(bQ)?{$:1,$0:bQ}:null;},bP)).join("");};bv.SplitStrings=function(bO,bP,bQ){return bv.Split(bO,new a.RegExp(bv.concat("|",M.map(bv.RegexEscape,bP))),bQ);};bv.SplitChars=function(bO,bP,bQ){return bv.Split(bO,new a.RegExp("["+bv.RegexEscape(bP.join(""))+"]"),bQ);};bv.Split=function(bO,bP,bQ){return bQ===1?M.filter(function(bR){return bR!=="";},bv.SplitWith(bO,bP)):bv.SplitWith(bO,bP);};bv.TrimEnd=function(bO,bP){var bQ,bR;if(bz.Equals(bP,null)||bP.length==0)return bv.TrimEndWS(bO);else{bQ=bO.length-1;bR=true;while(bQ>=0&&bR)(function(){var bS;bS=bO[bQ];return M.exists(function(bT){return bS===bT;},bP)?void(bQ=bQ-1):void(bR=false);}());return bv.Substring(bO,0,bQ+1);}};bv.TrimStart=function(bO,bP){var bQ,bR;if(bz.Equals(bP,null)||bP.length==0)return bv.TrimStartWS(bO);else{bQ=0;bR=true;while(bQ<bO.length&&bR)(function(){var bS;bS=bO[bQ];return M.exists(function(bT){return bS===bT;},bP)?void(bQ=bQ+1):void(bR=false);}());return bO.substring(bQ);}};bv.ToCharArrayRange=function(bO,bP,bQ){return M.init(bQ,function(bR){return bO[bP+bR];});};bv.ToCharArray=function(bO){return M.init(bO.length,function(bP){return bO[bP];});};bv.ReplaceChar=function(bO,bP,bQ){return bv.Replace(bO,bP,bQ);};bv.Replace=function(bO,bP,bQ){function bR(bS){var bT,bU,bV;bT=bS.indexOf(bP);return bT!==-1?(bU=bv.ReplaceOnce(bS,bP,bQ),(bV=bT+bQ.length,bv.Substring(bU,0,bT+bQ.length)+bR(bU.substring(bV)))):bS;}return bR(bO);};bv.PadRight=function(bO,bP){return bv.PadRightWith(bO,bP," ");};bv.PadLeft=function(bO,bP){return bv.PadLeftWith(bO,bP," ");};bv.CopyTo=function(bO,bP,bQ,bR,bS){M.blit(bv.ToCharArray(bO),bP,bQ,bR,bS);};bv.Compare=function(bO,bP){return bz.Compare(bO,bP);};bw=b.Task=bH.Class({Start:function(){var bO;bO=this;if(bz.Equals(this.status,0)){this.status=2;E.scheduler().Fork(function(){var bP;bO.status=3;try{bO.Execute();bO.status=5;}catch(bQ){if(bQ instanceof _4&&(bz.Equals(bQ.ct,bO.token)&&(bP=bQ,true))){bM.log("Task cancellation caught:",bP);bO.exc=new _9.New$3([bP]);bO.status=6;}else{bM.log("Task error caught:",bQ);bO.exc=new _9.New$3([bQ]);bO.status=7;}}bO.RunContinuations();});}else B.InvalidOp("Task not in initial state");},StartContinuation:function(){var bO;bO=this;if(bz.Equals(this.status,1)){this.status=2;E.scheduler().Fork(function(){if(bz.Equals(bO.status,2)){bO.status=3;try{bO.Execute();bO.status=5;}catch(bP){bO.exc=new _9.New$3([bP]);bO.status=7;}bO.RunContinuations();}});}},ContinueWith:function(bO,bP){var bQ,bR;bQ=this;bR=new bx.New$4(function(){return bO(bQ);},bP,1,null,void 0);if(this.get_IsCompleted())bR.StartContinuation();else this.continuations.push(bR);return bR;},ContinueWith$1:function(bO,bP){var bQ,bR;bQ=this;bR=new bw.New$4(function(){return bO(bQ);},bP,1,null);if(this.get_IsCompleted())bR.StartContinuation();else this.continuations.push(bR);return bR;},RunContinuations:function(){var bO,bP,bQ;bO=this.continuations;for(bP=0,bQ=bO.length-1;bP<=bQ;bP++)M.get(bO,bP).StartContinuation();},OnCompleted:function(bO){if(this.get_IsCompleted())bO();else{bz.Equals(this.get_Status(),0)?this.Start():void 0;this.ContinueWith$1(function(){return bO();},E.noneCT());}},get_Status:function(){return this.status;},get_IsFaulted:function(){return bz.Equals(this.status,7);},get_IsCompleted:function(){return bz.Equals(this.status,5)||bz.Equals(this.status,7)||bz.Equals(this.status,6);},get_IsCanceled:function(){return bz.Equals(this.status,6);},get_Exception:function(){return this.exc;},Execute:function(){this.action();}},j,bw);bw.Yield=function(){return new bw.New$3(function(){return null;});};bw.WhenAll=function(bO){var bP,bQ,bR,bS,bT,bU;bP=M.length(bO);bQ=[0];bR=new a.Array(bP);bS=new by.New();for(bT=0,bU=bP-1;bT<=bU;bT++)(function(bV){M.get(bO,bT).ContinueWith$1(function(bW){return bW.get_IsFaulted()?void bS.TrySetException$1(bW.get_Exception()):bW.get_IsCanceled()?void bS.TrySetCanceled$1():(bQ[0]++,bR[bV]=bW.get_Result(),bQ[0]===bP?bS.SetResult(bR):null);},E.noneCT());}(bT));return bS.get_Task();};bw.WhenAll$1=function(bO){var bP,bQ,bR,bS,bT;bP=M.length(bO);bQ=[0];bR=new by.New();for(bS=0,bT=bP-1;bS<=bT;bS++)M.get(bO,bS).ContinueWith$1(function(bU){return bU.get_IsFaulted()?void bR.TrySetException$1(bU.get_Exception()):bU.get_IsCanceled()?void bR.TrySetCanceled$1():(bQ[0]++,bQ[0]===bP?void bR.TrySetResult():null);},E.noneCT());return bR.get_Task();};bw.WhenAny=function(bO){var bP,bQ,bR;bP=new by.New();for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)M.get(bO,bQ).ContinueWith(function(bS){bP.TrySetResult(bS);},E.noneCT());return bP.get_Task();};bw.WhenAny$1=function(bO){var bP,bQ,bR;bP=new by.New();for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)M.get(bO,bQ).ContinueWith$1(function(bS){bP.TrySetResult(bS);},E.noneCT());return bP.get_Task();};bw.Delay=function(bO,bP){return E.StartAsTask(E.Sleep(bO),{$:1,$0:bP});};bw.Delay$1=function(bO){return E.StartAsTask(E.Sleep(bO),null);};bw.Run=function(bO,bP){var bQ;bQ=bO();return bP.c?bw.FromCanceled(bP):(bz.Equals(bQ.get_Status(),0)?bQ.Start():void 0,bQ);};bw.Run$1=function(bO,bP){var bQ;bQ=new bx.New$4(bO,bP,0,null,void 0);bQ.Start();return bQ;};bw.Run$2=function(bO,bP){var bQ;bQ=bO();return bP.c?bw.FromCanceled$1(bP):(bz.Equals(bQ.get_Status(),0)?bQ.Start():void 0,bQ);};bw.Run$3=function(bO,bP){var bQ;bQ=new bw.New$4(bO,bP,0,null);bQ.Start();return bQ;};bw.FromResult=function(bO){return new bx.New$4(null,E.noneCT(),5,null,bO);};bw.FromException=function(bO){return new bx.New$4(null,E.noneCT(),7,new _9.New$3([bO]),null);};bw.FromException$1=function(bO){return new bw.New$4(null,E.noneCT(),7,new _9.New$3([bO]));};bw.FromCanceled=function(bO){return new bx.New$4(null,bO,6,new _9.New$3([new bb.New()]),null);};bw.FromCanceled$1=function(bO){return new bw.New$4(null,bO,6,new _9.New$3([new bb.New()]));};bw.New=bH.Ctor(function(bO,bP,bQ){bw.New$4.call(this,function(){return bO(bP);},bQ,0,null);},bw);bw.New$1=bH.Ctor(function(bO,bP){bw.New$4.call(this,function(){return bO(bP);},E.noneCT(),0,null);},bw);bw.New$2=bH.Ctor(function(bO,bP){bw.New$4.call(this,bO,bP,0,null);},bw);bw.New$3=bH.Ctor(function(bO){bw.New$4.call(this,bO,E.noneCT(),0,null);},bw);bw.New$4=bH.Ctor(function(bO,bP,bQ,bR){j.New.call(this);this.action=bO;this.token=bP;this.status=bQ;this.continuations=[];this.exc=bR;},bw);bx=b.Task1=bH.Class({Execute:function(){this.result=this.func();},get_Result:function(){var bO;switch(this.get_Status()){case 5:return this.result;case 7:case 6:throw this.get_Exception();default:return B.InvalidOp("Task has not been completed, has no Result");}}},bw,bx);bx.New=bH.Ctor(function(bO,bP,bQ){bx.New$4.call(this,function(){return bO(bP);},bQ,0,null,void 0);},bx);bx.New$1=bH.Ctor(function(bO,bP){bx.New$4.call(this,function(){return bO(bP);},E.noneCT(),0,null,void 0);},bx);bx.New$2=bH.Ctor(function(bO,bP){bx.New$4.call(this,bO,bP,0,null,void 0);},bx);bx.New$3=bH.Ctor(function(bO){bx.New$4.call(this,bO,E.noneCT(),0,null,void 0);},bx);bx.New$4=bH.Ctor(function(bO,bP,bQ,bR,bS){bw.New$4.call(this,null,bP,bQ,bR);this.func=bO;this.result=bS;},bx);by=b.TaskCompletionSource=bH.Class({TrySetResult:function(bO){return!this.task.get_IsCompleted()&&(this.task.status=5,this.task.result=bO,this.task.RunContinuations(),true);},TrySetException:function(bO){return this.TrySetException$1(new _9.New$2(bO));},TrySetException$1:function(bO){return!this.task.get_IsCompleted()&&(this.task.status=7,this.task.exc=new _9.New$3([bO]),this.task.RunContinuations(),true);},TrySetCanceled:function(bO){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.token=bO,this.task.RunContinuations(),true);},TrySetCanceled$1:function(){return!this.task.get_IsCompleted()&&(this.task.status=6,this.task.RunContinuations(),true);},SetResult:function(bO){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=5;this.task.result=bO;this.task.RunContinuations();},SetException:function(bO){this.SetException$1(new _9.New$2(bO));},SetException$1:function(bO){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=7;this.task.exc=new _9.New$3([bO]);this.task.RunContinuations();},SetCanceled:function(){this.task.get_IsCompleted()?B.FailWith("Task already completed."):void 0;this.task.status=6;this.task.RunContinuations();},get_Task:function(){return this.task;}},j,by);by.New=bH.Ctor(function(){j.New.call(this);this.task=new bx.New$4(null,E.noneCT(),1,null,void 0);},by);bz.Hash=function(bO){var bP;bP=typeof bO;return bP=="function"?0:bP=="boolean"?bO?1:0:bP=="number"?bO:bP=="string"?bz.hashString(bO):bP=="object"?bO==null?0:bO instanceof a.Array?bz.hashArray(bO):bz.hashObject(bO):0;};bz.hashObject=function(bO){var bP,bQ;if("GetHashCode"in bO)return bO.GetHashCode();else{bP=[0];for(var bR in bO)if(function(bS){bP[0]=bz.hashMix(bz.hashMix(bP[0],bz.hashString(bS)),bz.Hash(bO[bS]));return false;}(bR))break;return bP[0];}};bz.hashString=function(bO){var bP,bQ,bR;if(bO===null)return 0;else{bP=5381;for(bQ=0,bR=bO.length-1;bQ<=bR;bQ++)bP=bz.hashMix(bP,bO[bQ].charCodeAt());return bP;}};bz.hashArray=function(bO){var bP,bQ,bR;bP=-34948909;for(bQ=0,bR=M.length(bO)-1;bQ<=bR;bQ++)bP=bz.hashMix(bP,bz.Hash(M.get(bO,bQ)));return bP;};bz.hashMix=function(bO,bP){return(bO<<5)+bO+bP;};bz.Equals=function(bO,bP){var bQ,bR,bS,bT;if(bO===bP)return true;else{bQ=typeof bO;if(bQ=="object"){if(bO===null||bO===void 0||bP===null||bP===void 0||!bz.Equals(typeof bP,"object"))return false;else if("Equals"in bO)return bO.Equals(bP);else if("Equals"in bP)return false;else if(bO instanceof a.Array&&bP instanceof a.Array)return bz.arrayEquals(bO,bP);else if(bO instanceof bL&&bP instanceof bL)return bz.dateEquals(bO,bP);else{bR=[true];for(var bU in bO)if(function(bV){bR[0]=!bO.hasOwnProperty(bV)||bP.hasOwnProperty(bV)&&bz.Equals(bO[bV],bP[bV]);return!bR[0];}(bU))break;if(bR[0]){for(var bV in bP)if(function(bW){bR[0]=!bP.hasOwnProperty(bW)||bO.hasOwnProperty(bW);return!bR[0];}(bV))break;}return bR[0];}}else return bQ=="function"&&("$Func"in bO?bO.$Func===bP.$Func&&bO.$Target===bP.$Target:"$Invokes"in bO&&"$Invokes"in bP&&bz.arrayEquals(bO.$Invokes,bP.$Invokes));}};bz.dateEquals=function(bO,bP){return bO.getTime()===bP.getTime();};bz.arrayEquals=function(bO,bP){var bQ,bR;if(M.length(bO)===M.length(bP)){bQ=true;bR=0;while(bQ&&bR<M.length(bO)){!bz.Equals(M.get(bO,bR),M.get(bP,bR))?bQ=false:void 0;bR=bR+1;}return bQ;}else return false;};bz.Compare=function(bO,bP){var bQ,bR,bS,bT,bU,bV;if(bO===bP)return 0;else{bR=typeof bO;switch(bR=="function"?1:bR=="boolean"?2:bR=="number"?2:bR=="string"?2:bR=="object"?3:0){case 0:return typeof bP=="undefined"?0:-1;case 1:return B.FailWith("Cannot compare function values.");case 2:return bO<bP?-1:1;case 3:if(bO===null)bS=-1;else if(bP===null)bS=1;else if("CompareTo"in bO)bS=bO.CompareTo(bP);else if("CompareTo0"in bO)bS=bO.CompareTo0(bP);else if(bO instanceof a.Array&&bP instanceof a.Array)bS=bz.compareArrays(bO,bP);else if(bO instanceof bL&&bP instanceof bL)bS=bz.compareDates(bO,bP);else{bT=[0];for(var bW in bO)if(function(bX){return!bO.hasOwnProperty(bX)?false:!bP.hasOwnProperty(bX)?(bT[0]=1,true):(bT[0]=bz.Compare(bO[bX],bP[bX]),bT[0]!==0);}(bW))break;if(bT[0]===0){for(var bX in bP)if(function(bY){return!bP.hasOwnProperty(bY)?false:!bO.hasOwnProperty(bY)&&(bT[0]=-1,true);}(bX))break;}bS=bT[0];}return bS;}}};bz.compareDates=function(bO,bP){return bz.Compare(bO.getTime(),bP.getTime());};bz.compareArrays=function(bO,bP){var bQ,bR;if(M.length(bO)<M.length(bP))return -1;else if(M.length(bO)>M.length(bP))return 1;else{bQ=0;bR=0;while(bQ===0&&bR<M.length(bO)){bQ=bz.Compare(M.get(bO,bR),M.get(bP,bR));bR=bR+1;}return bQ;}};bD.ValueNone={$:0};bD.get_Value=function(bO){return bO.$==1?bO.$0:B.InvalidOp("ValueOption.Value");};bE.filter=function(bO,bP){var bQ;return bP.$==1&&bO(bP.$0)?bP:bD.ValueNone;};bE.fold=function(bO,bP,bQ){return bQ.$==0?bP:bO(bP,bQ.$0);};bE.foldBack=function(bO,bP,bQ){return bP.$==0?bQ:bO(bP.$0,bQ);};bE.ofNullable=function(bO){return bO==null?bD.ValueNone:{$:1,$0:C.get(bO)};};bE.ofObj=function(bO){return bO==null?bD.ValueNone:{$:1,$0:bO};};bE.toArray=function(bO){return bO.$==0?[]:[bO.$0];};bE.toList=function(bO){return bO.$==0?bm.Empty:O.ofArray([bO.$0]);};bE.toNullable=function(bO){return bO.$==1?bO.$0:null;};bE.toObj=function(bO){return bO.$==0?null:bO.$0;};bF.TryParseBool=function(bO,bP){var bQ;bQ=bO.toLowerCase();return bQ==="true"?(bP.set(true),true):bQ==="false"&&(bP.set(false),true);};bF.ParseBool=function(bO){var bP;bP=bO.toLowerCase();if(bP==="true")return true;else if(bP==="false")return false;else throw new $.New$1("String was not recognized as a valid Boolean.");};bF.TryParse=function(bO,bP,bQ,bR){var bS,bT;bS=+bO;bT=bS===bS-bS%1&&bS>=bP&&bS<=bQ;if(bT)bR.set(bS);return bT;};bF.Parse=function(bO,bP,bQ,bR){var bS;bS=+bO;if(bS!==bS-bS%1)throw new $.New$1("Input string was not in a correct format.");else if(bS<bP||bS>bQ)throw new ba.New$1(bR);else return bS;};bF.ParseByte=function(bO){return bF.Parse(bO,0,255,"Value was either too large or too small for an unsigned byte.");};bF.TryParseByte=function(bO,bP){return bF.TryParse(bO,0,255,bP);};bF.ParseSByte=function(bO){return bF.Parse(bO,-128,127,"Value was either too large or too small for a signed byte.");};bF.TryParseSByte=function(bO,bP){return bF.TryParse(bO,-128,127,bP);};bF.ParseInt16=function(bO){return bF.Parse(bO,-32768,32767,"Value was either too large or too small for an Int16.");};bF.TryParseInt16=function(bO,bP){return bF.TryParse(bO,-32768,32767,bP);};bF.ParseInt32=function(bO){return bF.Parse(bO,-2147483648,2147483647,"Value was either too large or too small for an Int32.");};bF.TryParseInt32=function(bO,bP){return bF.TryParse(bO,-2147483648,2147483647,bP);};bF.ParseUInt16=function(bO){return bF.Parse(bO,0,65535,"Value was either too large or too small for an UInt16.");};bF.TryParseUInt16=function(bO,bP){return bF.TryParse(bO,0,65535,bP);};bF.ParseUInt32=function(bO){return bF.Parse(bO,0,4294967295,"Value was either too large or too small for an UInt32.");};bF.TryParseUInt32=function(bO,bP){return bF.TryParse(bO,0,4294967295,bP);};bF.ParseInt64=function(bO){return bF.Parse(bO,-9223372036854775808,9223372036854775807,"Value was either too large or too small for an Int64.");};bF.TryParseInt64=function(bO,bP){return bF.TryParse(bO,-9223372036854775808,9223372036854775807,bP);};bF.ParseUInt64=function(bO){return bF.Parse(bO,0,18446744073709551615,"Value was either too large or too small for an UInt64.");};bF.TryParseUInt64=function(bO,bP){return bF.TryParse(bO,0,18446744073709551615,bP);};}(self));
